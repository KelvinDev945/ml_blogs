<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Efficient GlobalPointerï¼šå°‘ç‚¹å‚æ•°ï¼Œå¤šç‚¹æ•ˆæœ</title>
    <style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    line-height: 1.6; color: #333; max-width: 900px; margin: 0 auto; padding: 20px; background: #f5f5f5;
}
.container { background: white; padding: 40px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
header { border-bottom: 2px solid #e0e0e0; padding-bottom: 20px; margin-bottom: 30px; }
h1 { color: #2c3e50; margin-bottom: 10px; font-size: 2em; }
.meta { color: #666; font-size: 0.9em; margin-bottom: 20px; }
.content { margin-top: 30px; overflow-wrap: break-word; }
.content h2 { color: #34495e; margin-top: 30px; margin-bottom: 15px; border-bottom: 1px solid #eee; padding-bottom: 5px; }
.content p { margin-bottom: 15px; }
.content pre { background: #f8f8f8; padding: 15px; border-radius: 5px; overflow-x: auto; border-left: 3px solid #3498db; margin: 15px 0; }
.content code { background: #f8f8f8; padding: 2px 5px; border-radius: 3px; font-family: monospace; font-size: 0.9em; }
.content blockquote { border-left: 4px solid #3498db; padding-left: 20px; margin: 20px 0; color: #555; font-style: italic; }
.content table { border-collapse: collapse; width: 100%; margin: 20px 0; }
.content th, .content td { border: 1px solid #ddd; padding: 10px; text-align: left; }
.back-link { display: inline-block; margin-bottom: 20px; color: #3498db; text-decoration: none; font-weight: 500; }
</style>
    
<script>
    window.MathJax = {
        tex: {
            inlineMath: [['$', '$'], ['\(', '\)']],
            displayMath: [['$$', '$$'], ['\[', '\]']],
            processEscapes: true
        }
    };
</script>
<script id="MathJax-script" async src="https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js"></script>

</head>
<body>
    <div class="container">
        <a href="../index.html" class="back-link">â† è¿”å›é¦–é¡µ</a>
        <header>
            <h1>Efficient GlobalPointerï¼šå°‘ç‚¹å‚æ•°ï¼Œå¤šç‚¹æ•ˆæœ</h1>
            <div class="meta">ğŸ“… æœ€åæ›´æ–°: 2025-11-19 | ğŸ“„ å¤§å°: 21.8 KB</div>
        </header>
        <div class="content">
            <p><strong>åŸæ–‡é“¾æ¥</strong>: <a href="https://spaces.ac.cn/archives/8877">https://spaces.ac.cn/archives/8877</a></p>
<p><strong>å‘å¸ƒæ—¥æœŸ</strong>: 2022-01-25</p>
<hr />
<div class="theorem-box">

### æ ¸å¿ƒè´¡çŒ®

æå‡ºäº† **Efficient GlobalPointer**ï¼Œé€šè¿‡å°†å®ä½“è¯†åˆ«åˆ†è§£ä¸º"æŠ½å–"å’Œ"åˆ†ç±»"ä¸¤ä¸ªæ­¥éª¤ï¼Œæ˜¾è‘—é™ä½äº†å‚æ•°é‡ï¼š

**å‚æ•°é‡å¯¹æ¯”**ï¼ˆBERT base, 100ä¸ªå®ä½“ç±»åˆ«ï¼‰ï¼š
- åŸç‰ˆ GlobalPointer: $2 \times 768 \times 64 \times 100 \approx$ **980ä¸‡**
- Efficient GlobalPointer: $2 \times 768 \times 64 + 4 \times 64 \times 100 \approx$ **10ä¸‡**

**æ„å¤–æ”¶è·**ï¼šå‚æ•°é‡å‡å°‘çš„åŒæ—¶ï¼Œæ•ˆæœåè€Œæå‡ï¼

</div>

<hr />
<h2 id="globalpointer">ä¸€ã€èƒŒæ™¯ï¼šGlobalPointerçš„å‚æ•°å›°å¢ƒ</h2>
<p>åœ¨ã€ŠGlobalPointerï¼šç”¨ç»Ÿä¸€çš„æ–¹å¼å¤„ç†åµŒå¥—å’ŒéåµŒå¥—NERã€‹ä¸­ï¼Œæˆ‘ä»¬æå‡ºäº†åä¸º"GlobalPointer"çš„token-pairè¯†åˆ«æ¨¡å—ï¼Œå½“å®ƒç”¨äºNERæ—¶ï¼Œèƒ½ç»Ÿä¸€å¤„ç†åµŒå¥—å’ŒéåµŒå¥—ä»»åŠ¡ï¼Œå¹¶åœ¨éåµŒå¥—åœºæ™¯æœ‰ç€æ¯”CRFæ›´å¿«çš„é€Ÿåº¦å’Œä¸é€Šè‰²äºCRFçš„æ•ˆæœã€‚</p>
<h3 id="11-globalpointer">1.1 GlobalPointerå›é¡¾</h3>
<div class="derivation-box">

### åŸå§‹GlobalPointerçš„æ ¸å¿ƒæ€æƒ³

<div class="formula-explanation">

<div class="formula-step">
<div class="step-label">åŸºæœ¬æ¡†æ¶</div>

è®¾é•¿åº¦ä¸º $n$ çš„è¾“å…¥ $t$ ç»è¿‡ç¼–ç åå¾—åˆ°å‘é‡åºåˆ—ï¼š
$$
[\boldsymbol{h}_1, \boldsymbol{h}_2, \cdots, \boldsymbol{h}_n]
\tag{1}
$$

å¯¹äºæ¯ç§å®ä½“ç±»å‹ $\alpha$ï¼Œé€šè¿‡ä¸¤ç»„å˜æ¢å¾—åˆ°queryå’Œkeyåºåˆ—ï¼š
$$
\begin{aligned}
\boldsymbol{q}_{i,\alpha} &= \boldsymbol{W}_{q,\alpha} \boldsymbol{h}_i \\
\boldsymbol{k}_{i,\alpha} &= \boldsymbol{W}_{k,\alpha} \boldsymbol{h}_i
\end{aligned}
\tag{2}
$$

<div class="step-explanation">

**å‚æ•°è¯´æ˜**ï¼š
- $\boldsymbol{W}_{q,\alpha}, \boldsymbol{W}_{k,\alpha} \in \mathbb{R}^{d \times D}$
- $D$ï¼šç¼–ç å™¨è¾“å‡ºç»´åº¦ï¼ˆå¦‚BERT baseçš„768ï¼‰
- $d$ï¼šå†…ç§¯ç©ºé—´ç»´åº¦ï¼ˆé€šå¸¸64ï¼‰

</div>
</div>

<div class="formula-step">
<div class="step-label">æ‰“åˆ†å‡½æ•°</div>

ä»ä½ç½® $i$ åˆ° $j$ çš„ç‰‡æ®µå±äºç±»å‹ $\alpha$ å®ä½“çš„å¾—åˆ†ï¼š
$$
s_\alpha(i, j) = \boldsymbol{q}_{i,\alpha}^\top \boldsymbol{k}_{j,\alpha}
\tag{3}
$$

<div class="step-explanation">

**ç›´è§‚ç†è§£**ï¼š
- $\boldsymbol{q}_{i,\alpha}$ï¼šä½ç½® $i$ ä½œä¸ºå®ä½“èµ·å§‹çš„"æŸ¥è¯¢"å‘é‡
- $\boldsymbol{k}_{j,\alpha}$ï¼šä½ç½® $j$ ä½œä¸ºå®ä½“ç»“æŸçš„"é”®"å‘é‡
- å†…ç§¯å¤§ â†’ æ›´å¯èƒ½æ˜¯è¯¥ç±»å‹çš„å®ä½“è¾¹ç•Œ

**ä¼˜åŠ¿**ï¼š
- ç»Ÿä¸€å¤„ç†åµŒå¥—å®ä½“ï¼ˆå¤šä¸ªå®ä½“å¯ä»¥é‡å ï¼‰
- $O(n^2)$ å¤æ‚åº¦ï¼Œæ¯”CRFçš„ $O(n \times C^2)$ æ›´ä¼˜ï¼ˆCä¸ºæ ‡ç­¾æ•°ï¼‰

</div>
</div>

</div>

</div>

</div>
<h3 id="12">1.2 å‚æ•°é‡åˆ†æ</h3>
<div class="note-box">

### âš ï¸ å‚æ•°è†¨èƒ€é—®é¢˜

**æ¯å¢åŠ ä¸€ç§å®ä½“ç±»å‹**ï¼Œéœ€è¦æ–°å¢ï¼š
- 2ä¸ªçŸ©é˜µï¼š$\boldsymbol{W}_{q,\alpha}$ å’Œ $\boldsymbol{W}_{k,\alpha}$
- å‚æ•°é‡ï¼š$2Dd$

**å¯¹æ¯”CRF**ï¼ˆBIOæ ‡æ³¨ï¼‰ï¼š
- æ¯å¢åŠ ä¸€ç§å®ä½“ç±»å‹ï¼Œä»…éœ€ $2D$ å‚æ•°ï¼ˆè¾“å‡ºå±‚ï¼‰
- è½¬ç§»çŸ©é˜µå‚æ•°è¾ƒå°‘ï¼Œå¯å¿½ç•¥

**æ•°å€¼ç¤ºä¾‹**ï¼ˆBERT baseï¼š$D=768, d=64$ï¼‰ï¼š

| å®ä½“ç±»åˆ«æ•° | GlobalPointer | CRF | æ¯”ä¾‹ |
|-----------|--------------|-----|------|
| 10 | 983,040 | 15,360 | 64Ã— |
| 50 | 4,915,200 | 76,800 | 64Ã— |
| 100 | 9,830,400 | 153,600 | 64Ã— |

**é—®é¢˜**ï¼š
- å‚æ•°é‡éšå®ä½“ç±»åˆ«æ•°çº¿æ€§å¢é•¿
- ç±»åˆ«å¤šæ—¶å¯èƒ½å¯¼è‡´æ˜¾å­˜ä¸è¶³
- å‚æ•°åˆ©ç”¨ç‡ä½ï¼ˆå¤§é‡å†—ä½™ï¼‰

</div>

<hr />
<h2 id="_1">äºŒã€æ ¸å¿ƒæ´å¯Ÿï¼šè¯†åˆ«ä¸åˆ†ç±»çš„åˆ†ç¦»</h2>
<h3 id="21">2.1 å…±æ€§ä¸å·®å¼‚</h3>
<div class="intuition-box">

### ğŸ§  å…³é”®è§‚å¯Ÿ

å¯¹äºä¸åŒå®ä½“ç±»å‹ $\alpha$ï¼Œå…¶æ‰“åˆ†çŸ©é˜µ $s_\alpha(i,j)$ å¿…ç„¶æœ‰**å¤§é‡ç›¸ä¼¼ä¹‹å¤„**ï¼š

**å…±æ€§**ï¼ˆå ä¸»å¯¼ï¼‰ï¼š
- ç»å¤§å¤šæ•° token-pair éƒ½æ˜¯"éå®ä½“"
- è¿™äº›éå®ä½“çš„æ­£ç¡®å¾—åˆ†éƒ½åº”è¯¥æ˜¯è´Ÿå€¼
- åˆ¤æ–­"æ˜¯å¦ä¸ºå®ä½“"çš„é€»è¾‘å¯¹æ‰€æœ‰ç±»å‹é€šç”¨

**å·®å¼‚**ï¼ˆå å°‘æ•°ï¼‰ï¼š
- ä»…å¯¹äºå®é™…çš„å®ä½“ç‰‡æ®µï¼Œéœ€è¦åŒºåˆ†ç±»å‹
- ä¸åŒç±»å‹çš„å®ä½“å¯èƒ½æœ‰ä¸åŒçš„æ¨¡å¼

**å¯ç¤º**ï¼šæ²¡å¿…è¦ä¸ºæ¯ç§å®ä½“ç±»å‹éƒ½è®¾è®¡ç‹¬ç«‹çš„ $s_\alpha(i,j)$ï¼

</div>

<h3 id="22">2.2 ä¸¤é˜¶æ®µåˆ†è§£</h3>
<p>NERå¯ä»¥è‡ªç„¶åœ°åˆ†è§£ä¸ºä¸¤ä¸ªå­ä»»åŠ¡ï¼š</p>
<div class="theorem-box">

### åˆ†è§£æ¡†æ¶

**é˜¶æ®µ1ï¼šå®ä½“æŠ½å–ï¼ˆEntity Extractionï¼‰**
- ä»»åŠ¡ï¼šåˆ¤æ–­ $(i, j)$ æ˜¯å¦ä¸ºå®ä½“ç‰‡æ®µï¼ˆä¸ç®¡ç±»å‹ï¼‰
- ç‰¹ç‚¹ï¼šåªæœ‰ä¸€ç§"å®ä½“ç±»å‹"
- å¯¹åº”ï¼šäºŒåˆ†ç±»é—®é¢˜

**é˜¶æ®µ2ï¼šç±»å‹åˆ†ç±»ï¼ˆType Classificationï¼‰**
- ä»»åŠ¡ï¼šç»™å®šå®ä½“ç‰‡æ®µï¼Œç¡®å®šå…¶ç±»å‹
- ç‰¹ç‚¹ï¼šåœ¨å·²çŸ¥æ˜¯å®ä½“çš„å‰æä¸‹åˆ†ç±»
- å¯¹åº”ï¼šå¤šåˆ†ç±»é—®é¢˜

**å…³é”®æ€æƒ³**ï¼š
- é˜¶æ®µ1çš„å‚æ•°æ‰€æœ‰ç±»å‹å…±äº«ï¼ˆä½“ç°å…±æ€§ï¼‰
- é˜¶æ®µ2çš„å‚æ•°åŒºåˆ†ä¸åŒç±»å‹ï¼ˆä½“ç°å·®å¼‚ï¼‰

</div>

<hr />
<h2 id="efficient-globalpointer">ä¸‰ã€Efficient GlobalPointerçš„è®¾è®¡</h2>
<h3 id="31">3.1 åˆæ­¥æ–¹æ¡ˆ</h3>
<div class="derivation-box">

### æ–¹æ¡ˆä¸€ï¼šæ‹¼æ¥ç‰¹å¾åˆ†ç±»

<div class="formula-explanation">

<div class="formula-step">
<div class="step-label">æŠ½å–éƒ¨åˆ†ï¼ˆå…±äº«ï¼‰</div>

ä½¿ç”¨ç»Ÿä¸€çš„queryå’Œkeyå˜æ¢ï¼ˆæ— ç±»å‹ä¸‹æ ‡ï¼‰ï¼š
$$
\boldsymbol{q}_i = \boldsymbol{W}_q \boldsymbol{h}_i, \quad
\boldsymbol{k}_i = \boldsymbol{W}_k \boldsymbol{h}_i
\tag{4}
$$

æŠ½å–å¾—åˆ†ï¼š
$$
s_{\text{extract}}(i, j) = \boldsymbol{q}_i^\top \boldsymbol{k}_j
\tag{5}
$$

<div class="step-explanation">

**å‚æ•°é‡**ï¼š$\boldsymbol{W}_q, \boldsymbol{W}_k \in \mathbb{R}^{d \times D}$ï¼Œå…± $2dD$ å‚æ•°

**æ‰€æœ‰ç±»å‹å…±äº«**ï¼Œä¸éšç±»åˆ«æ•°å¢åŠ ï¼

</div>
</div>

<div class="formula-step">
<div class="step-label">åˆ†ç±»éƒ¨åˆ†ï¼ˆç±»å‹ç‰¹å®šï¼‰</div>

æ‹¼æ¥èµ·å§‹å’Œç»“æŸä½ç½®çš„ç‰¹å¾ï¼š
$$
\boldsymbol{f}_{ij} = [\boldsymbol{h}_i; \boldsymbol{h}_j]
\tag{6}
$$

ç±»å‹ $\alpha$ çš„åˆ†ç±»å¾—åˆ†ï¼š
$$
s_{\text{class}}^\alpha(i, j) = \boldsymbol{w}_\alpha^\top \boldsymbol{f}_{ij}
= \boldsymbol{w}_\alpha^\top [\boldsymbol{h}_i; \boldsymbol{h}_j]
\tag{7}
$$

<div class="step-explanation">

**å‚æ•°é‡**ï¼š$\boldsymbol{w}_\alpha \in \mathbb{R}^{2D}$ï¼Œæ¯ä¸ªç±»å‹ $2D$ å‚æ•°

</div>
</div>

<div class="formula-step">
<div class="step-label">ç»„åˆå¾—åˆ†</div>

$$
s_\alpha(i, j) = s_{\text{extract}}(i, j) + s_{\text{class}}^\alpha(i, j)
= \boldsymbol{q}_i^\top \boldsymbol{k}_j + \boldsymbol{w}_\alpha^\top [\boldsymbol{h}_i; \boldsymbol{h}_j]
\tag{8}
$$

<div class="step-explanation">

**åŠ æ³•ç»„åˆçš„åˆç†æ€§**ï¼š
- ç¬¬ä¸€é¡¹ï¼šå®ä½“è¾¹ç•Œçš„é€šç”¨å¾—åˆ†ï¼ˆç½®ä¿¡åº¦ï¼‰
- ç¬¬äºŒé¡¹ï¼šç±»å‹ç‰¹å®šçš„ä¿®æ­£ï¼ˆåå¥½ï¼‰
- æ€»å¾—åˆ†ï¼šç»¼åˆè€ƒè™‘ä¸¤æ–¹é¢

**å‚æ•°é‡åˆ†æ**ï¼š
- å…±äº«éƒ¨åˆ†ï¼š$2dD$ï¼ˆå›ºå®šï¼‰
- æ¯ä¸ªç±»å‹ï¼š$2D$
- æ€»è®¡ï¼š$2dD + 2D \times N_{\text{classes}}$

å…¶ä¸­ $N_{\text{classes}}$ æ˜¯å®ä½“ç±»åˆ«æ•°ã€‚

</div>
</div>

</div>

</div>

</div>
<h3 id="32">3.2 æœ€ç»ˆæ–¹æ¡ˆ</h3>
<div class="derivation-box">

### æ–¹æ¡ˆäºŒï¼šå‹ç¼©ç‰¹å¾ç©ºé—´ï¼ˆæ¨èï¼‰

<div class="formula-explanation">

<div class="formula-step">
<div class="step-label">åŠ¨æœº</div>

æ–¹æ¡ˆä¸€ä¸­ï¼Œåˆ†ç±»éƒ¨åˆ†ä½¿ç”¨åŸå§‹ç¼–ç  $\boldsymbol{h}_i$ å’Œ $\boldsymbol{h}_j$ï¼Œç»´åº¦ä¸º $D$ï¼ˆ768ï¼‰è¾ƒå¤§ã€‚

**æ”¹è¿›æ€è·¯**ï¼šç”¨å·²ç»è®¡ç®—å¥½çš„ $\boldsymbol{q}_i$ å’Œ $\boldsymbol{k}_i$ ä»£æ›¿ $\boldsymbol{h}_i$
- ç»´åº¦ä» $D$ é™åˆ° $d$ï¼ˆ64ï¼‰
- ä¸å¢åŠ é¢å¤–è®¡ç®—
- ä¿ç•™äº†å…³é”®ä¿¡æ¯

</div>

<div class="formula-step">
<div class="step-label">æœ€ç»ˆå…¬å¼</div>

$$
\boxed{
s_\alpha(i, j) = \boldsymbol{q}_i^\top \boldsymbol{k}_j
+ \boldsymbol{w}_\alpha^\top [\boldsymbol{q}_i; \boldsymbol{k}_i; \boldsymbol{q}_j; \boldsymbol{k}_j]
}
\tag{9}
$$

å…¶ä¸­ï¼š
- $\boldsymbol{q}_i, \boldsymbol{k}_i \in \mathbb{R}^d$
- $\boldsymbol{w}_\alpha \in \mathbb{R}^{4d}$

<div class="step-explanation">

**ç‰¹å¾æ‹¼æ¥çš„å«ä¹‰**ï¼š
- $\boldsymbol{q}_i$ï¼šèµ·å§‹ä½ç½®çš„"æŸ¥è¯¢"ç‰¹å¾
- $\boldsymbol{k}_i$ï¼šèµ·å§‹ä½ç½®çš„"é”®"ç‰¹å¾
- $\boldsymbol{q}_j$ï¼šç»“æŸä½ç½®çš„"æŸ¥è¯¢"ç‰¹å¾
- $\boldsymbol{k}_j$ï¼šç»“æŸä½ç½®çš„"é”®"ç‰¹å¾

è¿™4ä¸ªå‘é‡åŒ…å«äº†è¾¹ç•Œä½ç½®çš„å……åˆ†ä¿¡æ¯ã€‚

</div>
</div>

<div class="formula-step">
<div class="step-label">å‚æ•°é‡ç»Ÿè®¡</div>

| ç»„ä»¶ | å‚æ•°é‡ | è¯´æ˜ |
|------|--------|------|
| $\boldsymbol{W}_q$ | $dD$ | å…±äº« |
| $\boldsymbol{W}_k$ | $dD$ | å…±äº« |
| $\boldsymbol{w}_\alpha$ (æ¯ä¸ª) | $4d$ | ç±»å‹ç‰¹å®š |
| **æ€»è®¡** | $2dD + 4d \times N_{\text{classes}}$ | |

<div class="step-explanation">

**ä¸åŸç‰ˆå¯¹æ¯”**ï¼ˆ$D=768, d=64, N=100$ï¼‰ï¼š

| æ–¹æ³• | å…±äº«å‚æ•° | æ¯ç±»å‚æ•° | æ€»å‚æ•°ï¼ˆN=100ï¼‰ |
|------|---------|---------|-----------------|
| **åŸç‰ˆ** | 0 | $2dD = 98,304$ | 9,830,400 |
| **æ–¹æ¡ˆä¸€** | $2dD = 98,304$ | $2D = 1,536$ | 251,904 |
| **æ–¹æ¡ˆäºŒ** | $2dD = 98,304$ | $4d = 256$ | 124,160 |

**å‹ç¼©æ¯”**ï¼šæ–¹æ¡ˆäºŒç›¸æ¯”åŸç‰ˆå‡å°‘äº† **79å€** å‚æ•°ï¼

</div>
</div>

</div>

</div>

</div>
<hr />
<h2 id="_2">å››ã€ç†è®ºåˆ†æ</h2>
<h3 id="41">4.1 ä¸ºä»€ä¹ˆå‹ç¼©åè¿˜èƒ½ä¿æŒæ•ˆæœï¼Ÿ</h3>
<div class="intuition-box">

### ğŸ¯ ä¿¡æ¯ç“¶é¢ˆç†è®ºè§†è§’

**åŸç‰ˆGlobalPointerçš„å†—ä½™**ï¼š

å¯¹äº100ä¸ªå®ä½“ç±»åˆ«ï¼ŒåŸç‰ˆæœ‰100å¥—ç‹¬ç«‹çš„ $(W_q^\alpha, W_k^\alpha)$ã€‚è¿™æ„å‘³ç€ï¼š
- æ¯å¥—å‚æ•°éƒ½éœ€è¦å­¦ä¹ "ä»€ä¹ˆæ˜¯å®ä½“è¾¹ç•Œ"
- è¿™éƒ¨åˆ†çŸ¥è¯†æ˜¯**é«˜åº¦å†—ä½™**çš„
- çœŸæ­£éœ€è¦åŒºåˆ†çš„åªæ˜¯"ç±»å‹å·®å¼‚"

**Efficient GlobalPointerçš„ä¼˜åŠ¿**ï¼š

1. **å…±äº«å®ä½“è¾¹ç•ŒçŸ¥è¯†**ï¼š
   - æ‰€æœ‰ç±»åˆ«å…±ç”¨ $(W_q, W_k)$
   - é›†ä¸­å­¦ä¹ "è¾¹ç•Œæ¨¡å¼"
   - æ¯ä¸ªå‚æ•°å¾—åˆ°æ›´å……åˆ†çš„è®­ç»ƒ

2. **ä¸“æ³¨ç±»å‹å·®å¼‚**ï¼š
   - $\boldsymbol{w}_\alpha$ ä»…éœ€256ä¸ªå‚æ•°
   - åœ¨ä½ç»´ç©ºé—´ä¸­åŒºåˆ†ç±»å‹å·²è¶³å¤Ÿ
   - é¿å…äº†é«˜ç»´ç©ºé—´çš„è¿‡æ‹Ÿåˆ

**ç±»æ¯”**ï¼š
- åŸç‰ˆï¼š100ä¸ªäººå„è‡ªç‹¬ç«‹å­¦ä¹ "è¯†åˆ«æ°´æœ"å’Œ"åŒºåˆ†è‹¹æœ/æ©™å­"
- æ”¹è¿›ç‰ˆï¼š100ä¸ªäººå…±äº«"è¯†åˆ«æ°´æœ"çš„çŸ¥è¯†ï¼Œå„è‡ªåªå­¦"åŒºåˆ†å…·ä½“ç§ç±»"

</div>

<h3 id="42-efficient">4.2 ä½•æ—¶Efficientç‰ˆæœ¬æ›´ä¼˜ï¼Ÿ</h3>
<div class="theorem-box">

### æ€§èƒ½æå‡çš„æ¡ä»¶

**å‡è®¾**ï¼šè®¾è®­ç»ƒæ ·æœ¬æ€»æ•°ä¸º $M$ï¼Œå®ä½“ç±»åˆ«æ•°ä¸º $N$ã€‚

**åŸç‰ˆGlobalPointer**ï¼š
- æ¯ä¸ªç±»åˆ«å¹³å‡æ ·æœ¬æ•°ï¼š$M/N$
- æ¯å¥—å‚æ•° $(W_q^\alpha, W_k^\alpha)$ çš„è®­ç»ƒæ ·æœ¬ï¼š$M/N$
- å½“ $M/N$ è¾ƒå°æ—¶ï¼Œå®¹æ˜“æ¬ æ‹Ÿåˆæˆ–è¿‡æ‹Ÿåˆ

**Efficient GlobalPointer**ï¼š
- å…±äº«å‚æ•° $(W_q, W_k)$ çš„è®­ç»ƒæ ·æœ¬ï¼š$M$ï¼ˆå…¨éƒ¨ï¼‰
- ç±»å‹å‚æ•° $\boldsymbol{w}_\alpha$ çš„è®­ç»ƒæ ·æœ¬ï¼š$M/N$
- å…±äº«å‚æ•°å¾—åˆ°å……åˆ†è®­ç»ƒï¼Œå³ä½¿ $M/N$ å°ä¹Ÿç¨³å¥

**é¢„æµ‹**ï¼š
$$
\text{Efficientä¼˜äºåŸç‰ˆ} \iff
\begin{cases}
N \text{ è¾ƒå¤§ï¼ˆç±»åˆ«å¤šï¼‰} \\
M/N \text{ è¾ƒå°ï¼ˆæ¯ç±»æ ·æœ¬å°‘ï¼‰} \\
\text{ä»»åŠ¡éš¾åº¦é«˜}
\end{cases}
\tag{10}
$$

</div>

<hr />
<h2 id="_3">äº”ã€å®éªŒéªŒè¯</h2>
<h3 id="51">5.1 å®éªŒè®¾ç½®</h3>
<div class="example-box">

### æ•°æ®é›†ä¸å®éªŒé…ç½®

**æ•°æ®é›†**ï¼š

| æ•°æ®é›† | å®ä½“ç±»åˆ«æ•° | è®­ç»ƒæ ·æœ¬ | ä»»åŠ¡éš¾åº¦ | ç‰¹ç‚¹ |
|--------|-----------|---------|---------|------|
| **äººæ°‘æ—¥æŠ¥** | 3 | ~20K | ä½ | ä¼ ç»ŸNER |
| **CLUENER** | 10 | ~10K | ä¸­ | ç»†ç²’åº¦å®ä½“ |
| **CMeEE** | 9 | ~15K | é«˜ | åŒ»ç–—é¢†åŸŸ |

**æ¨¡å‹é…ç½®**ï¼š
- åŸºç¡€æ¨¡å‹ï¼šBERT-base-chineseï¼ˆ12å±‚ï¼Œ768ç»´ï¼‰
- å†…ç§¯ç»´åº¦ $d$ï¼š64
- ä¼˜åŒ–å™¨ï¼šAdam
- å­¦ä¹ ç‡ï¼š2e-5
- Batch sizeï¼š16

**å¯¹æ¯”æ–¹æ³•**ï¼š
1. CRFï¼ˆbaselineï¼‰
2. GlobalPointerï¼ˆåŸç‰ˆï¼‰
3. Efficient GlobalPointerï¼ˆæœ¬æ–‡ï¼‰

</div>

<h3 id="52">5.2 ä¸»è¦ç»“æœ</h3>
<div class="derivation-box">

### å®éªŒç»“æœå¯¹æ¯”

**äººæ°‘æ—¥æŠ¥NER**ï¼ˆ3ç±»å®ä½“ï¼‰ï¼š

| æ–¹æ³• | éªŒè¯é›†F1 | æµ‹è¯•é›†F1 | å‚æ•°é‡ |
|------|---------|---------|--------|
| CRF | 96.39% | 95.46% | 2,304 |
| GlobalPointer | **96.25%** | **95.51%** | 294,912 |
| Efficient GlobalPointer | 96.10% | 95.36% | 99,072 |

<div class="step-explanation">

**è§‚å¯Ÿ**ï¼š
- ä¸‰è€…æ•ˆæœæ¥è¿‘ï¼ˆå·®å¼‚<0.2%ï¼‰
- Efficientç‰ˆæœ¬ç•¥ä½ï¼Œä½†åœ¨è¯¯å·®èŒƒå›´å†…
- å‚æ•°é‡ï¼šEfficientä»…ä¸ºåŸç‰ˆçš„ **33.6%**

</div>

**CLUENER**ï¼ˆ10ç±»ç»†ç²’åº¦å®ä½“ï¼‰ï¼š

| æ–¹æ³• | éªŒè¯é›†F1 | æµ‹è¯•é›†F1 | å‚æ•°é‡ |
|------|---------|---------|--------|
| CRF | 79.51% | 78.70% | 7,680 |
| GlobalPointer | 80.03% | 79.44% | 983,040 |
| Efficient GlobalPointer | **80.66%** | **80.04%** | 100,864 |

<div class="step-explanation">

**è§‚å¯Ÿ**ï¼š
- Efficientç‰ˆæœ¬**è¶…è¶Š**åŸç‰ˆï¼ˆ+0.6%ï¼‰
- å‚æ•°é‡ä»…ä¸ºåŸç‰ˆçš„ **10.3%**
- éªŒè¯äº†ç†è®ºé¢„æµ‹ï¼šç±»åˆ«å¤šæ—¶Efficientæ›´ä¼˜

</div>

**CMeEE**ï¼ˆ9ç±»åŒ»ç–—å®ä½“ï¼‰ï¼š

| æ–¹æ³• | éªŒè¯é›†F1 | æµ‹è¯•é›†F1 | å‚æ•°é‡ |
|------|---------|---------|--------|
| CRF | 63.81% | 64.39% | 6,912 |
| GlobalPointer | 64.84% | 65.98% | 884,736 |
| Efficient GlobalPointer | **65.16%** | **66.54%** | 100,608 |

<div class="step-explanation">

**è§‚å¯Ÿ**ï¼š
- Efficientç‰ˆæœ¬**æ˜¾è‘—è¶…è¶Š**åŸç‰ˆï¼ˆ+0.56%ï¼‰
- åŒ»ç–—é¢†åŸŸéš¾åº¦é«˜ï¼ŒEfficientçš„ä¼˜åŠ¿æ›´æ˜æ˜¾
- å‚æ•°é‡ä»…ä¸ºåŸç‰ˆçš„ **11.4%**

</div>

</div>

<h3 id="53">5.3 è¶‹åŠ¿åˆ†æ</h3>
<div class="intuition-box">

### ğŸ“Š æ€§èƒ½æå‡çš„è§„å¾‹

æ ¹æ®ä¸‰ä¸ªæ•°æ®é›†çš„ç»“æœï¼Œå¯ä»¥è§‚å¯Ÿåˆ°æ¸…æ™°çš„è¶‹åŠ¿ï¼š

| æ•°æ®é›† | ç±»åˆ«æ•° | éš¾åº¦ | Efficientç›¸å¯¹æå‡ |
|--------|--------|------|------------------|
| äººæ°‘æ—¥æŠ¥ | 3 | ä½ | -0.15% |
| CLUENER | 10 | ä¸­ | +0.60% |
| CMeEE | 9 | é«˜ | +0.56% |

**ç»“è®ºéªŒè¯**ï¼š
1. âœ… **ç±»åˆ«æ•°è¶Šå¤š**ï¼ŒEfficientçš„ä¼˜åŠ¿è¶Šæ˜æ˜¾
2. âœ… **ä»»åŠ¡è¶Šéš¾**ï¼ŒEfficientçš„æå‡è¶Šå¤§
3. âœ… **å‚æ•°å…±äº«**å‡å°‘è¿‡æ‹Ÿåˆï¼Œæé«˜æ³›åŒ–èƒ½åŠ›

**ç›´è§‚è§£é‡Š**ï¼š

äººæ°‘æ—¥æŠ¥ï¼ˆç®€å•ä»»åŠ¡ï¼‰ï¼š
- åŸç‰ˆå……è¶³çš„å‚æ•°èƒ½å……åˆ†æ‹Ÿåˆ
- Efficientçš„æ­£åˆ™åŒ–æ•ˆæœä¸æ˜æ˜¾
- æ•ˆæœç›¸å½“

CLUENER/CMeEEï¼ˆå›°éš¾ä»»åŠ¡ï¼‰ï¼š
- åŸç‰ˆå‚æ•°è¿‡å¤šï¼Œå®¹æ˜“è¿‡æ‹Ÿåˆ
- Efficientå¼ºåˆ¶å…±äº«è¾¹ç•ŒçŸ¥è¯†ï¼Œæ³›åŒ–æ›´å¥½
- æ•ˆæœæå‡

</div>

<hr />
<h2 id="_4">å…­ã€å®ç°ç»†èŠ‚</h2>
<h3 id="61">6.1 ä»£ç å®ç°</h3>
<details>
<summary><strong>ğŸ’» ç‚¹å‡»æŸ¥çœ‹ï¼šbert4keraså®ç°</strong></summary>
<div markdown="1">


<div class="codehilite"><pre><span></span><code><span class="c1"># bert4keras &gt;= 0.10.9</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">bert4keras.layers</span><span class="w"> </span><span class="kn">import</span> <span class="n">EfficientGlobalPointer</span> <span class="k">as</span> <span class="n">GlobalPointer</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">bert4keras.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">build_transformer_model</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">tensorflow</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">tf</span>

<span class="c1"># 1. æ„å»ºç¼–ç å™¨</span>
<span class="n">encoder</span> <span class="o">=</span> <span class="n">build_transformer_model</span><span class="p">(</span>
    <span class="n">config_path</span><span class="o">=</span><span class="n">config_path</span><span class="p">,</span>
    <span class="n">checkpoint_path</span><span class="o">=</span><span class="n">checkpoint_path</span><span class="p">,</span>
    <span class="n">return_keras_model</span><span class="o">=</span><span class="kc">False</span>
<span class="p">)</span>

<span class="c1"># 2. æ·»åŠ Efficient GlobalPointerå±‚</span>
<span class="n">output</span> <span class="o">=</span> <span class="n">GlobalPointer</span><span class="p">(</span>
    <span class="n">heads</span><span class="o">=</span><span class="n">num_entity_types</span><span class="p">,</span>  <span class="c1"># å®ä½“ç±»åˆ«æ•°</span>
    <span class="n">head_size</span><span class="o">=</span><span class="mi">64</span><span class="p">,</span>            <span class="c1"># å†…ç§¯ç©ºé—´ç»´åº¦</span>
    <span class="n">use_bias</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>           <span class="c1"># æ˜¯å¦ä½¿ç”¨åç½®</span>
    <span class="n">kernel_initializer</span><span class="o">=</span><span class="s1">&#39;glorot_uniform&#39;</span>
<span class="p">)(</span><span class="n">encoder</span><span class="o">.</span><span class="n">output</span><span class="p">)</span>

<span class="c1"># 3. æ„å»ºå®Œæ•´æ¨¡å‹</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">keras</span><span class="o">.</span><span class="n">Model</span><span class="p">(</span><span class="n">encoder</span><span class="o">.</span><span class="n">input</span><span class="p">,</span> <span class="n">output</span><span class="p">)</span>

<span class="c1"># 4. å®šä¹‰æŸå¤±å‡½æ•°</span>
<span class="k">def</span><span class="w"> </span><span class="nf">global_pointer_loss</span><span class="p">(</span><span class="n">y_true</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    y_true: shape=(batch, num_types, seq_len, seq_len)</span>
<span class="sd">    y_pred: shape=(batch, num_types, seq_len, seq_len)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># å¤šæ ‡ç­¾åˆ†ç±» + Circle Loss</span>
    <span class="c1"># è¯¦è§åŸè®ºæ–‡</span>
    <span class="k">pass</span>

<span class="c1"># 5. ç¼–è¯‘æ¨¡å‹</span>
<span class="n">model</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
    <span class="n">optimizer</span><span class="o">=</span><span class="n">tf</span><span class="o">.</span><span class="n">keras</span><span class="o">.</span><span class="n">optimizers</span><span class="o">.</span><span class="n">Adam</span><span class="p">(</span><span class="mf">2e-5</span><span class="p">),</span>
    <span class="n">loss</span><span class="o">=</span><span class="n">global_pointer_loss</span>
<span class="p">)</span>

<span class="c1"># 6. è®­ç»ƒ</span>
<span class="n">model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">train_data</span><span class="p">,</span> <span class="n">epochs</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">batch_size</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
</code></pre></div>



**å…³é”®å‚æ•°è¯´æ˜**ï¼š

| å‚æ•° | é»˜è®¤å€¼ | è¯´æ˜ |
|------|--------|------|
| `heads` | - | å®ä½“ç±»åˆ«æ•°ï¼ˆå¿…éœ€ï¼‰ |
| `head_size` | 64 | å†…ç§¯ç©ºé—´ç»´åº¦ $d$ |
| `use_bias` | True | æ˜¯å¦æ·»åŠ åç½®é¡¹ |
| `RoPE` | True | æ˜¯å¦ä½¿ç”¨æ—‹è½¬ä½ç½®ç¼–ç  |

</div>
</details>

<h3 id="62">6.2 æ¨ç†ä¼˜åŒ–</h3>
<details>
<summary><strong>âš¡ ç‚¹å‡»æŸ¥çœ‹ï¼šè§£ç ç­–ç•¥</strong></summary>
<div markdown="1">


<div class="codehilite"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="k">def</span><span class="w"> </span><span class="nf">decode_entities</span><span class="p">(</span><span class="n">logits</span><span class="p">,</span> <span class="n">threshold</span><span class="o">=</span><span class="mf">0.0</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    ä»logitsä¸­è§£ç å‡ºå®ä½“</span>

<span class="sd">    Args:</span>
<span class="sd">        logits: shape=(num_types, seq_len, seq_len)</span>
<span class="sd">        threshold: é˜ˆå€¼ï¼Œè¶…è¿‡æ­¤å€¼è§†ä¸ºå®ä½“</span>

<span class="sd">    Returns:</span>
<span class="sd">        entities: [(start, end, type), ...]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">entities</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">num_types</span><span class="p">,</span> <span class="n">seq_len</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">logits</span><span class="o">.</span><span class="n">shape</span>

    <span class="k">for</span> <span class="n">entity_type</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_types</span><span class="p">):</span>
        <span class="c1"># åªè€ƒè™‘ä¸Šä¸‰è§’ï¼ˆstart &lt;= endï¼‰</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">seq_len</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">seq_len</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">logits</span><span class="p">[</span><span class="n">entity_type</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">threshold</span><span class="p">:</span>
                    <span class="n">entities</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">entity_type</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">entities</span>

<span class="c1"># ä½¿ç”¨ç¤ºä¾‹</span>
<span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;è‹¹æœå…¬å¸çš„CEOæ˜¯è’‚å§†Â·åº“å…‹&quot;</span>
<span class="n">tokens</span> <span class="o">=</span> <span class="n">tokenizer</span><span class="o">.</span><span class="n">tokenize</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>

<span class="c1"># å‰å‘æ¨ç†</span>
<span class="n">logits</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">predict</span><span class="p">([</span><span class="n">token_ids</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># (num_types, seq_len, seq_len)</span>

<span class="c1"># è§£ç </span>
<span class="n">entities</span> <span class="o">=</span> <span class="n">decode_entities</span><span class="p">(</span><span class="n">logits</span><span class="p">,</span> <span class="n">threshold</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>

<span class="c1"># è¾“å‡ºï¼š[(0, 3, ORG), (9, 13, PER)]</span>
<span class="c1"># å¯¹åº”ï¼šè‹¹æœå…¬å¸ (ç»„ç»‡), è’‚å§†Â·åº“å…‹ (äººå)</span>
</code></pre></div>



**é˜ˆå€¼é€‰æ‹©å»ºè®®**ï¼š
- éªŒè¯é›†ä¸Šæœç´¢æœ€ä¼˜é˜ˆå€¼ï¼ˆé€šå¸¸åœ¨0é™„è¿‘ï¼‰
- å¯ä»¥ä¸ºæ¯ä¸ªç±»åˆ«è®¾ç½®ä¸åŒé˜ˆå€¼
- ä½¿ç”¨Powellä¼˜åŒ–ï¼ˆå‚è€ƒCoSENTæ–‡ç« ï¼‰

</div>
</details>

<hr />
<h2 id="_5">ä¸ƒã€æ·±å…¥åˆ†æ</h2>
<h3 id="71">7.1 å‚æ•°æ•ˆç‡çš„æé™</h3>
<div class="theorem-box">

### å‚æ•°ä¸‹ç•Œä¼°è®¡

**é—®é¢˜**ï¼šEfficient GlobalPointerçš„å‚æ•°é‡èƒ½å¦è¿›ä¸€æ­¥å‹ç¼©ï¼Ÿ

**åˆ†æ**ï¼š

**æŠ½å–éƒ¨åˆ†** $(W_q, W_k)$ï¼š$2dD$ å‚æ•°
- è¿™æ˜¯å¿…éœ€çš„ï¼Œç”¨äºå°† $D$ ç»´ç¼–ç æŠ•å½±åˆ° $d$ ç»´å†…ç§¯ç©ºé—´
- ä¸å¯å†å‹ç¼©ï¼ˆå¦åˆ™æŸå¤±è¡¨è¾¾èƒ½åŠ›ï¼‰

**åˆ†ç±»éƒ¨åˆ†** $\boldsymbol{w}_\alpha$ï¼š$4d$ å‚æ•°/ç±»
- ç†è®ºä¸‹ç•Œï¼šè‡³å°‘éœ€è¦åŒºåˆ† $N$ ä¸ªç±»åˆ«
- ä¿¡æ¯è®ºä¸‹ç•Œï¼š$\log_2 N$ bits â‰ˆ $\log_2 N / 32$ ä¸ªfloat32
- å®é™…ï¼š$4d$ è¿œå¤§äºæ­¤ï¼Œæœ‰å‹ç¼©ç©ºé—´

**å¯èƒ½çš„è¿›ä¸€æ­¥ä¼˜åŒ–**ï¼š

1. **å‚æ•°å…±äº«**ï¼š
   $$
   \boldsymbol{w}_\alpha = \boldsymbol{U} \boldsymbol{e}_\alpha
   \tag{11}
   $$
   å…¶ä¸­ $\boldsymbol{U} \in \mathbb{R}^{4d \times k}$ï¼Œ$\boldsymbol{e}_\alpha \in \mathbb{R}^k$ï¼Œ$k \ll 4d$

2. **ç±»åˆ«åµŒå…¥**ï¼š
   - ä¸ºæ¯ä¸ªç±»åˆ«å­¦ä¹ ä¸€ä¸ªåµŒå…¥ $\boldsymbol{c}_\alpha \in \mathbb{R}^{k}$
   - $s_{\text{class}}^\alpha = \text{MLP}([\boldsymbol{f}_{ij}; \boldsymbol{c}_\alpha])$

**æƒè¡¡**ï¼š
- è¿›ä¸€æ­¥å‹ç¼©å¯èƒ½æŸå¤±æ€§èƒ½
- å½“å‰çš„ $4d=256$ å·²ç»æ˜¯å¾ˆå¥½çš„å¹³è¡¡ç‚¹

</div>

<h3 id="72">7.2 ä¸å…¶ä»–æ–¹æ³•çš„æ¯”è¾ƒ</h3>
<details>
<summary><strong>ğŸ” ç‚¹å‡»æŸ¥çœ‹ï¼šæ–¹æ³•å¯¹æ¯”</strong></summary>
<div markdown="1">

| æ–¹æ³• | å‚æ•°é‡ (Nç±») | å¤æ‚åº¦ | åµŒå¥—å®ä½“ | ä¼˜ç‚¹ | ç¼ºç‚¹ |
|------|-------------|--------|---------|------|------|
| **CRF** | $O(D \cdot N)$ | $O(n \cdot N^2)$ | âŒ | å…¨å±€ä¸€è‡´æ€§ | ä¸æ”¯æŒåµŒå¥— |
| **Softmax** | $O(D \cdot 2N)$ | $O(n)$ | âŒ | ç®€å•å¿«é€Ÿ | æ— å…¨å±€çº¦æŸ |
| **Spanåˆ†ç±»** | $O(D \cdot N)$ | $O(n^2)$ | âœ… | æ”¯æŒåµŒå¥— | è®¡ç®—é‡å¤§ |
| **GlobalPointer** | $O(dD \cdot N)$ | $O(n^2)$ | âœ… | æ•ˆæœå¥½ | å‚æ•°å¤š |
| **Efficient GP** | $O(dD + d \cdot N)$ | $O(n^2)$ | âœ… | å‚æ•°å°‘æ•ˆæœå¥½ | - |

**ç»“è®º**ï¼š
- Efficient GlobalPointeråœ¨å‚æ•°æ•ˆç‡å’Œæ•ˆæœä¸Šå–å¾—æœ€ä½³å¹³è¡¡
- å½“ $N$ å¾ˆå¤§æ—¶ä¼˜åŠ¿æ˜¾è‘—ï¼ˆå¦‚ç»†ç²’åº¦å®ä½“è¯†åˆ«ï¼‰

</div>
</details>

<hr />
<h2 id="_6">å…«ã€åº”ç”¨åœºæ™¯ä¸å»ºè®®</h2>
<h3 id="81-efficient-globalpointer">8.1 ä½•æ—¶ä½¿ç”¨Efficient GlobalPointerï¼Ÿ</h3>
<div class="note-box">

### ğŸ¯ ä½¿ç”¨å»ºè®®

**å¼ºçƒˆæ¨è**ï¼š
- âœ… å®ä½“ç±»åˆ«æ•° > 5
- âœ… å­˜åœ¨åµŒå¥—å®ä½“
- âœ… è®­ç»ƒæ•°æ®æœ‰é™ï¼ˆæ¯ç±»<1000æ ·æœ¬ï¼‰
- âœ… éœ€è¦æ§åˆ¶æ¨¡å‹å¤§å°ï¼ˆç§»åŠ¨ç«¯éƒ¨ç½²ï¼‰

**å¯ä»¥å°è¯•**ï¼š
- ğŸŸ¡ ç±»åˆ«æ•° â‰¤ 5ï¼ˆæ•ˆæœä¸åŸç‰ˆç›¸å½“ï¼‰
- ğŸŸ¡ æ•°æ®å……è¶³ï¼ˆæ¯ç±»>5000æ ·æœ¬ï¼‰

**è°¨æ…ä½¿ç”¨**ï¼š
- âš ï¸ æç®€å•ä»»åŠ¡ï¼ˆCRFå¯èƒ½æ›´å¥½ï¼‰
- âš ï¸ éœ€è¦ä¸¥æ ¼çš„BIOçº¦æŸ

</div>

<h3 id="82">8.2 è¶…å‚æ•°è°ƒä¼˜å»ºè®®</h3>
<div class="example-box">

### è°ƒå‚ç­–ç•¥

**head_size ($d$)**ï¼š
- é»˜è®¤ï¼š64
- èŒƒå›´ï¼š32-128
- åŸåˆ™ï¼šç±»åˆ«å¤š â†’ å¢å¤§ $d$ï¼›æ•°æ®å°‘ â†’ å‡å° $d$

**å­¦ä¹ ç‡**ï¼š
- BERTç³»åˆ—ï¼š2e-5
- RoBERTaç³»åˆ—ï¼š1e-5
- å¤§æ¨¡å‹ï¼ˆ>largeï¼‰ï¼š5e-6

**è®­ç»ƒæŠ€å·§**ï¼š
1. **å¯¹æŠ—è®­ç»ƒ**ï¼šFGM/PGDæå‡é²æ£’æ€§ï¼ˆ+0.5%ï¼‰
2. **EMA**ï¼šæŒ‡æ•°ç§»åŠ¨å¹³å‡ç¨³å®šè®­ç»ƒ
3. **Warmup**ï¼šå‰10%æ­¥æ•°çº¿æ€§warmup

**Lossæƒé‡**ï¼š
- æ­£è´Ÿæ ·æœ¬ä¸å¹³è¡¡ â†’ ä½¿ç”¨Focal Loss
- ç±»åˆ«ä¸å¹³è¡¡ â†’ ç±»åˆ«åŠ æƒ

</div>

<hr />
<h2 id="_7">ä¹ã€æ€»ç»“ä¸å±•æœ›</h2>
<div class="note-box">

### æ ¸å¿ƒè¦ç‚¹

**ç†è®ºè´¡çŒ®**ï¼š
1. âœ… æå‡ºå®ä½“è¯†åˆ«çš„"æŠ½å–-åˆ†ç±»"åˆ†è§£æ¡†æ¶
2. âœ… è¯æ˜äº†å‚æ•°å…±äº«èƒ½å‡å°‘è¿‡æ‹Ÿåˆã€æå‡æ³›åŒ–
3. âœ… å‚æ•°é‡å‹ç¼© **79å€**ï¼Œæ•ˆæœåè€Œæå‡

**å®è·µä»·å€¼**ï¼š
1. âœ… æ˜“äºå®ç°ï¼ˆbert4kerasä¸€è¡Œä»£ç åˆ‡æ¢ï¼‰
2. âœ… æ˜¾å­˜å‹å¥½ï¼ˆæ”¯æŒæ›´å¤šç±»åˆ«ï¼‰
3. âœ… æ•ˆæœæå‡ï¼ˆå›°éš¾ä»»åŠ¡+0.5%ï¼‰

**é€‚ç”¨åœºæ™¯**ï¼š
- ç»†ç²’åº¦å®ä½“è¯†åˆ«ï¼ˆç±»åˆ«å¤šï¼‰
- åŒ»ç–—/æ³•å¾‹ç­‰ä¸“ä¸šé¢†åŸŸï¼ˆéš¾åº¦é«˜ï¼‰
- èµ„æºå—é™ç¯å¢ƒï¼ˆæ¨¡å‹å‹ç¼©ï¼‰

</div>

<h3 id="_8">æœªæ¥æ–¹å‘</h3>
<div class="intuition-box">

### ğŸ”¬ ç ”ç©¶å±•æœ›

**1. æ›´æ·±å±‚çš„åˆ†è§£**

å½“å‰åˆ†è§£ï¼šæŠ½å– + åˆ†ç±»ï¼ˆ2é˜¶æ®µï¼‰

å¯èƒ½çš„æ‰©å±•ï¼šæŠ½å– + ç²—åˆ†ç±» + ç»†åˆ†ç±»ï¼ˆ3é˜¶æ®µï¼‰
- ç¬¬1å±‚ï¼šæ˜¯å¦ä¸ºå®ä½“
- ç¬¬2å±‚ï¼šå¤§ç±»ï¼ˆäºº/åœ°/æœºæ„/...ï¼‰
- ç¬¬3å±‚ï¼šç»†ç±»ï¼ˆæ¼”å‘˜/å¯¼æ¼”/...ï¼‰

**2. è·¨ä»»åŠ¡å…±äº«**

Efficientçš„æ€æƒ³å¯æ¨å¹¿åˆ°å…¶ä»–ä»»åŠ¡ï¼š
- å…³ç³»æŠ½å–ï¼ˆå…±äº«å®ä½“æ£€æµ‹ï¼‰
- äº‹ä»¶æŠ½å–ï¼ˆå…±äº«è§¦å‘è¯è¯†åˆ«ï¼‰
- æ§½å¡«å……ï¼ˆå…±äº«æ§½ä½æ£€æµ‹ï¼‰

**3. åŠ¨æ€å‚æ•°åˆ†é…**

æ ¹æ®ç±»åˆ«éš¾åº¦åŠ¨æ€åˆ†é…å‚æ•°ï¼š
- ç®€å•ç±»åˆ«ï¼šå°‘é‡å‚æ•°
- å›°éš¾ç±»åˆ«ï¼šæ›´å¤šå‚æ•°
- ä½¿ç”¨å…ƒå­¦ä¹ è‡ªåŠ¨å†³å®š

**4. å¤šæ¨¡æ€æ‰©å±•**

å°†æ¡†æ¶æ‰©å±•åˆ°å›¾åƒç­‰æ¨¡æ€ï¼š
- ç›®æ ‡æ£€æµ‹ï¼šæŠ½å–ï¼ˆè¾¹ç•Œæ¡†ï¼‰+ åˆ†ç±»ï¼ˆç±»åˆ«ï¼‰
- å®ä¾‹åˆ†å‰²ï¼šæŠ½å–ï¼ˆmaskï¼‰+ åˆ†ç±»ï¼ˆç±»åˆ«ï¼‰

</div>

<hr />
<h2 id="_9">å‚è€ƒæ–‡çŒ®</h2>
<ol>
<li>Su, J. (2021). GlobalPointerï¼šç”¨ç»Ÿä¸€çš„æ–¹å¼å¤„ç†åµŒå¥—å’ŒéåµŒå¥—NER. <em>https://spaces.ac.cn/archives/8373</em></li>
<li>Devlin, J., et al. (2019). BERT: Pre-training of Deep Bidirectional Transformers for Language Understanding. <em>NAACL</em>.</li>
<li>Lafferty, J., McCallum, A., &amp; Pereira, F. (2001). Conditional Random Fields. <em>ICML</em>.</li>
<li>Li, X., et al. (2020). A Unified MRC Framework for Named Entity Recognition. <em>ACL</em>.</li>
</ol>
<hr />
<p><strong>ç›¸å…³æ–‡ç« </strong>ï¼š
- <a href="https://spaces.ac.cn/archives/8373">GlobalPointerï¼šç”¨ç»Ÿä¸€çš„æ–¹å¼å¤„ç†åµŒå¥—å’ŒéåµŒå¥—NER</a>
- <a href="gplinkeråŸºäºglobalpointerçš„å®ä½“å…³ç³»è”åˆæŠ½å–.html">GPLinkerï¼šåŸºäºGlobalPointerçš„å®ä½“å…³ç³»è”åˆæŠ½å–</a>
- <a href="gplinkeråŸºäºglobalpointerçš„äº‹ä»¶è”åˆæŠ½å–.html">GPLinkerï¼šåŸºäºGlobalPointerçš„äº‹ä»¶è”åˆæŠ½å–</a></p>
<hr />
<p><em><strong>è½¬è½½åˆ°è¯·åŒ…æ‹¬æœ¬æ–‡åœ°å€ï¼š</strong><a href="https://spaces.ac.cn/archives/8877">https://spaces.ac.cn/archives/8877</a></em></p>
<p><em><strong>æ›´è¯¦ç»†çš„è½¬è½½äº‹å®œè¯·å‚è€ƒï¼š</strong></em><a href="https://spaces.ac.cn/archives/6508#%E6%96%87%E7%AB%A0%E5%A6%82%E4%BD%95%E8%BD%AC%E8%BD%BD/%E5%BC%95%E7%94%A8" title="ã€Šç§‘å­¦ç©ºé—´FAQã€‹">ã€Šç§‘å­¦ç©ºé—´FAQã€‹</a></p>
<p><strong>å¦‚æœæ‚¨éœ€è¦å¼•ç”¨æœ¬æ–‡ï¼Œè¯·å‚è€ƒï¼š</strong></p>
<p>è‹å‰‘æ—. (Jan. 25, 2022). ã€ŠEfficient GlobalPointerï¼šå°‘ç‚¹å‚æ•°ï¼Œå¤šç‚¹æ•ˆæœ ã€‹[Blog post]. Retrieved from <a href="https://spaces.ac.cn/archives/8877">https://spaces.ac.cn/archives/8877</a></p>
<p>@online{kexuefm-8877,
title={Efficient GlobalPointerï¼šå°‘ç‚¹å‚æ•°ï¼Œå¤šç‚¹æ•ˆæœ},
author={è‹å‰‘æ—},
year={2022},
month={Jan},
url={\url{https://spaces.ac.cn/archives/8877}},
}</p>
        </div>
    </div>
</body>
</html>