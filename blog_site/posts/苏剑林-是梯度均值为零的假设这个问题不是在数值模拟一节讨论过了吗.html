<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸ºä»€ä¹ˆAdamçš„Update RMSæ˜¯0.2ï¼Ÿ</title>
    <style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    line-height: 1.6; color: #333; max-width: 900px; margin: 0 auto; padding: 20px; background: #f5f5f5;
}
.container { background: white; padding: 40px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
header { border-bottom: 2px solid #e0e0e0; padding-bottom: 20px; margin-bottom: 30px; }
h1 { color: #2c3e50; margin-bottom: 10px; font-size: 2em; }
.meta { color: #666; font-size: 0.9em; margin-bottom: 20px; }
.content { margin-top: 30px; overflow-wrap: break-word; }
.content h2 { color: #34495e; margin-top: 30px; margin-bottom: 15px; border-bottom: 1px solid #eee; padding-bottom: 5px; }
.content p { margin-bottom: 15px; }
.content pre { background: #f8f8f8; padding: 15px; border-radius: 5px; overflow-x: auto; border-left: 3px solid #3498db; margin: 15px 0; }
.content code { background: #f8f8f8; padding: 2px 5px; border-radius: 3px; font-family: monospace; font-size: 0.9em; }
.content blockquote { border-left: 4px solid #3498db; padding-left: 20px; margin: 20px 0; color: #555; font-style: italic; }
.content table { border-collapse: collapse; width: 100%; margin: 20px 0; }
.content th, .content td { border: 1px solid #ddd; padding: 10px; text-align: left; }
.back-link { display: inline-block; margin-bottom: 20px; color: #3498db; text-decoration: none; font-weight: 500; }
</style>
    
<script>
    window.MathJax = {
        tex: {
            inlineMath: [['$', '$'], ['\(', '\)']],
            displayMath: [['$$', '$$'], ['\[', '\]']],
            processEscapes: true
        }
    };
</script>
<script id="MathJax-script" async src="https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js"></script>

</head>
<body>
    <div class="container">
        <a href="../index.html" class="back-link">â† è¿”å›é¦–é¡µ</a>
        <header>
            <h1>ä¸ºä»€ä¹ˆAdamçš„Update RMSæ˜¯0.2ï¼Ÿ</h1>
            <div class="meta">ğŸ“… æœ€åæ›´æ–°: 2025-12-31 | ğŸ“„ å¤§å°: 13.7 KB</div>
        </header>
        <div class="content">
            <p><strong>åŸæ–‡é“¾æ¥</strong>: <a href="https://spaces.ac.cn/archives/11267">https://spaces.ac.cn/archives/11267</a></p>
<p><strong>å‘å¸ƒæ—¥æœŸ</strong>: </p>
<hr />
<p>ä¼—æ‰€å‘¨çŸ¥ï¼Œæˆ‘ä»¬å¾ˆæ—©å°±å¼€å§‹å°è¯•å°†Muonç”¨äºå¤§è§„æ¨¡LLMçš„è®­ç»ƒã€‚ç‰¹åˆ«åœ°ï¼Œåœ¨<a href="/archives/10739">ã€ŠMuonç»­é›†ï¼šä¸ºä»€ä¹ˆæˆ‘ä»¬é€‰æ‹©å°è¯•Muonï¼Ÿã€‹</a>ä¸­ï¼Œæˆ‘ä»¬æå‡ºäº†â€œMatch Adam Update RMSâ€çš„æŠ€å·§ï¼Œä»¥ä¾¿å¿«é€Ÿä»Adamè¿ç§»åˆ°Muonä¸Šï¼Œè¿™ä¸ªæŠ€å·§åŒæ ·ç”¨åˆ°äº†Kimi K2çš„è®­ç»ƒä¸­ã€‚è¯¥æŠ€å·§æ˜¯æŒ‡å°†Muonçš„Update RMSç»Ÿä¸€æˆ0.2ï¼Œè¿™ä½¿å¾—æˆ‘ä»¬å¤ç”¨Adamçš„å­¦ä¹ ç‡å’Œæƒé‡è¡°å‡ç‡ã€‚</p>
<p>è¿™ä¸€æŠ€å·§çš„èƒŒåï¼Œæ˜¯æˆ‘ä»¬è§‚å¯Ÿåˆ°Adamçš„Update RMSçº¦ç­‰äº0.2ï¼Œå¹¶ä¸”è¿™ä¸€ç°è±¡æ˜¯ç¨³å®šä¸”å¯å¤ç°çš„ã€‚è¿™ä¾¿å¼•å‘äº†ä¸€ä¸ªæœ‰è¶£çš„é—®é¢˜ï¼šä¸ºä»€ä¹ˆAdamçš„Update RMSæ˜¯0.2ï¼Ÿæˆ‘ä»¬å¯ä»¥ä»ç†è®ºä¸Šè§£é‡Šå®ƒå—ï¼Ÿ</p>
<h2 id="_1">é—®é¢˜å¼•å…¥</h2>
<p>é¦–å…ˆæè¿°ä¸€ä¸‹ç°è±¡ï¼šä»å®éªŒä¸­æˆ‘ä»¬è§‚å¯Ÿåˆ°ï¼Œå¤§è‡´ä¸Šåœ¨Warmupç»“æŸã€æ¨¡å‹è¿›å…¥æ­£å¼è®­ç»ƒåï¼ŒAdamçš„Update RMSå‡ ä¹éƒ½ä¿æŒåœ¨0.2ï½0.3ä¹‹é—´ï¼Œå¹¶ä¸”ä¸åŒå°ºå¯¸çš„æ¨¡å‹ä¹Ÿå‘ˆç°å‡ºç›¸ä¼¼çš„è§„å¾‹ã€‚è¿™äº›æ¨¡å‹çš„å…±åŒç‚¹æ˜¯éƒ½ç”¨Adamè®­ç»ƒï¼Œå‚æ•°æ˜¯$\beta_1=0.9,\beta_2=0.95$ã€‚ç”±äºå…±æ€§å¾ˆæ˜æ˜¾ï¼Œæ‰€ä»¥è¿™å¤§æ¦‚ç‡ä¸æ˜¯å·§åˆï¼Œå› æ­¤ç¬”è€…å°è¯•åˆ†æèƒŒåçš„åŸç†ã€‚</p>
<p>ç„¶åæˆ‘ä»¬å›é¡¾ä¸€ä¸‹Adamä¼˜åŒ–å™¨çš„å½¢å¼ï¼š<br />
\begin{equation}\text{Adam}\color{skyblue}{\text{W}}:=\left\{\begin{aligned}<br />
&amp;\boldsymbol{m}<em t-1="t-1">t = \beta_1 \boldsymbol{m}</em>} + \left(1 - \beta_1\right) \boldsymbol{g<em t-1="t-1">t\\\<br />
&amp;\boldsymbol{v}_t = \beta_2 \boldsymbol{v}</em>} + \left(1 - \beta_2\right) \boldsymbol{g<em t-1="t-1">t^2\\\<br />
&amp;\hat{\boldsymbol{m}}_t = \boldsymbol{m}_t\left/\left(1 - \beta_1^t\right)\right.\\\<br />
&amp;\hat{\boldsymbol{v}}_t = \boldsymbol{v}_t\left/\left(1 - \beta_2^t\right)\right.\\\<br />
&amp;\boldsymbol{u}_t =\hat{\boldsymbol{m}}_t\left/\left(\sqrt{\hat{\boldsymbol{v}}_t} + \epsilon\right)\right.\\\<br />
&amp;\boldsymbol{\theta}_t = \boldsymbol{\theta}</em>} - \eta_t (\boldsymbol{u<em t-1="t-1">t \color{skyblue}{ + \lambda_t \boldsymbol{\theta}</em>)}<br />
\end{aligned}\right.\end{equation}<br />
æ³¨æ„ï¼šæœ¬æ–‡æ‰€æœ‰å‘é‡çš„ä¹˜é™¤æ³•ï¼ŒåŒ…æ‹¬å¹³æ–¹ï¼Œé»˜è®¤éƒ½æ˜¯æŒ‡Hadamardç§¯/å•†ï¼Œå³Element-wiseçš„ä¹˜/é™¤ã€‚</p>
<p>æˆ‘ä»¬è¦åšçš„äº‹æƒ…ï¼Œå°±æ˜¯è¯æ˜$\Vert\boldsymbol{u}<em RMS="RMS">t\Vert</em>$ã€‚}\approx 0.2$ï¼Œè‡³å°‘åœ¨$\beta_1=0.9,\beta_2=0.95$è¿™ç»„è®¾ç½®ä¸‹å¦‚æ­¤ã€‚æˆ‘ä»¬å‡è®¾$\epsilon$è¶³å¤Ÿå°ï¼Œä»¥è‡³äºå¯ä»¥å¿½ç•¥å®ƒï¼Œå¹¶ä¸”æˆ‘ä»¬è€ƒè™‘$t\to \infty$çš„ç¨³æ€ï¼Œé‚£ä¹ˆ$\beta_1^t$ã€$\beta_2^t$éƒ½è¶³å¤Ÿæ¥è¿‘äºé›¶ï¼Œæ‰€ä»¥ä¸ç”¨åŒºåˆ†$\boldsymbol{m}_t$å’Œ$\hat{\boldsymbol{m}}_t$ã€$\boldsymbol{v}_t$å’Œ$\hat{\boldsymbol{v}}_t$ï¼Œç”±æ­¤æœ‰$\boldsymbol{u}_t =\boldsymbol{m}_t/\sqrt{\boldsymbol{v}_t</p>
<p>å¯¹äº$\boldsymbol{m}<em i="1">t,\boldsymbol{v}_t$ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°å±•å¼€å¼<br />
\begin{equation}\boldsymbol{m}_t = (1 - \beta_1)\sum</em>}^t \beta_1^{t-i}\boldsymbol{g<em i="1">i,\qquad \boldsymbol{v}_t = (1 - \beta_2)\sum</em>}^t \beta_2^{t-i}\boldsymbol{g}_i^2\end{equation</p>
<h2 id="_2">æ•°å€¼æ¨¡æ‹Ÿ</h2>
<p>å¦‚æœæˆ‘ä»¬å‡è®¾$\boldsymbol{g}<em RMS="RMS">1,\boldsymbol{g}_2,\cdots,\boldsymbol{g}_t$éƒ½æ˜¯ä»åŒä¸€ä¸ªåˆ†å¸ƒé‡‡æ ·å‡ºæ¥çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥ç”¨æ•°å€¼æ¨¡æ‹Ÿçš„æ–¹æ³•ä¼°è®¡$\Vert\boldsymbol{u}_t\Vert</em>)$è¿›è¡Œå°è¯•ï¼Œå‚è€ƒä»£ç å¦‚ä¸‹ï¼š}$ã€‚äº‹ä¸å®œè¿Ÿï¼Œè®©æˆ‘ä»¬ä»æœ€ç®€å•çš„æ ‡å‡†æ­£æ€åˆ†å¸ƒ$\mathcal{N}(\boldsymbol{0},\boldsymbol{I</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="n">N</span><span class="p">,</span> <span class="n">T</span> <span class="o">=</span> <span class="mi">10000</span><span class="p">,</span> <span class="mi">2000</span>
<span class="n">beta1</span><span class="p">,</span> <span class="n">beta2</span> <span class="o">=</span> <span class="mf">0.9</span><span class="p">,</span> <span class="mf">0.95</span>
<span class="n">m</span><span class="p">,</span> <span class="n">v</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">T</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
    <span class="n">g</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>
    <span class="n">m</span> <span class="o">=</span> <span class="n">beta1</span> <span class="o">*</span> <span class="n">m</span> <span class="o">+</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">beta1</span><span class="p">)</span> <span class="o">*</span> <span class="n">g</span>
    <span class="n">v</span> <span class="o">=</span> <span class="n">beta2</span> <span class="o">*</span> <span class="n">v</span> <span class="o">+</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">beta2</span><span class="p">)</span> <span class="o">*</span> <span class="n">g</span><span class="o">**</span><span class="mi">2</span>
    <span class="n">u</span> <span class="o">=</span> <span class="n">m</span> <span class="o">/</span> <span class="n">v</span><span class="o">**</span><span class="mf">0.5</span>

<span class="n">rms</span> <span class="o">=</span> <span class="p">(</span><span class="n">u</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="kp">mean</span><span class="p">()</span><span class="o">**</span><span class="mf">0.5</span>
<span class="nb">print</span><span class="p">(</span><span class="n">rms</span><span class="p">)</span>
</code></pre></div>

<p>å¤§å®¶çŒœçŒœç»“æœæ˜¯å¤šå°‘ï¼Ÿç­”æ¡ˆå¤§æ¦‚æ˜¯0.225ï¼Œå±…ç„¶è·Ÿå®éªŒç»“æœæƒŠäººåœ°ç›¸ä¼¼ï¼è¿™åè¿‡æ¥è¡¨æ˜æˆ‘ä»¬çš„æ¨¡æ‹Ÿå‡è®¾è·Ÿå®é™…æƒ…å†µè¿˜æ˜¯å¾ˆå»åˆçš„ã€‚å¯èƒ½æœ‰è¯»è€…è§‰å¾—ä¸å¯¹ï¼Œ$\boldsymbol{g}\sim\mathcal{N}(\boldsymbol{0},\boldsymbol{I})$ä¸æ˜¯çº¯å™ªå£°äº†å—ï¼Œè¿™è¿˜èƒ½å»åˆï¼Ÿå®é™…è®­ç»ƒå½“ç„¶ä¸å¯èƒ½æ˜¯çº¯å™ªå£°ï¼Œåªèƒ½è¯´å•æ¬¡æ¢¯åº¦çš„ä¿¡å™ªæ¯”å°å¾—å¯æ€œï¼Œå› æ­¤å¯ä»¥ç”¨çº¯å™ªå£°æ¥æ¨¡æ‹Ÿã€‚</p>
<p>è¯»è€…å¯ä»¥è‡ªè¡ŒæŠ˜è…¾ä¸€ä¸‹ä¸Šè¿°å‚è€ƒä»£ç ï¼Œè§‚å¯ŸUpdate RMSçš„å½±å“å˜é‡ï¼Œå¤§ä½“ç»“è®ºæ˜¯ï¼šUpdate RMSè·Ÿ$\beta_1$æ­£ç›¸å…³ï¼Œè·Ÿ$\beta_2$ä¼¼ä¹å…³ç³»ä¸å¤§ï¼Œå¦‚æœ$\boldsymbol{g}$çš„åˆ†å¸ƒå…·æœ‰éé›¶å‡å€¼ï¼ˆç›¸å½“äºå¢å¤§æ¢¯åº¦çš„ä¿¡å™ªæ¯”ï¼‰ï¼Œé‚£ä¹ˆUpdate RMSä¹Ÿä¼šå˜å¤§ã€‚</p>
<h2 id="_3">å¹³å‡è¿‘ä¼¼</h2>
<p>è¿™ä¸€èŠ‚ç¬”è€…å°è¯•ä»ç†è®ºæ–¹é¢æ¨å¯¼ä¸Šè¿°æ¨¡æ‹Ÿç»“æœçš„ä¸€ä¸ªè¿‘ä¼¼è§£æè§£ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬ä»RMSçš„å®šä¹‰å¯çŸ¥ï¼Œè¦æ±‚$\Vert\boldsymbol{u}<em RMS="RMS">t\Vert</em>}$ï¼Œéœ€è¦å…ˆæ±‚$\boldsymbol{u<em i="1">t^2 = \boldsymbol{m}_t^2/\boldsymbol{v}_t$ã€‚ç¬”è€…çš„æƒ³æ³•æ˜¯ï¼Œç”¨$\boldsymbol{u}_t^2$çš„æœŸæœ›ä½œä¸ºå®ƒçš„è¿‘ä¼¼ï¼Œå¹¶è¿›ä¸€æ­¥è½¬åŒ–ä¸ºå¹³å‡åœºè¿‘ä¼¼ï¼š<br />
\begin{equation}\mathbb{E}[\boldsymbol{u}_t^2] = \mathbb{E}\left[\frac{\boldsymbol{m}_t^2}{\boldsymbol{v}_t}\right] \approx \frac{\mathbb{E}[\boldsymbol{m}_t^2]}{\mathbb{E}[\boldsymbol{v}_t]}\end{equation}<br />
å¯èƒ½ä¼šæœ‰è¯»è€…è´¨ç–‘æœ€åä¸€æ­¥è¿‘ä¼¼çš„åˆç†æ€§ã€‚ç¬”è€…çš„å»ºè®®æ˜¯ï¼Œå…ˆä¸ç®¡è¿™äº›ç»†ææœ«èŠ‚ï¼Œå°±å¥½æ¯”ä¸Šä¸€èŠ‚å‡è®¾$\boldsymbol{g}\sim\mathcal{N}(\boldsymbol{0},\boldsymbol{I})$ä¸€æ ·ï¼Œå…ˆç®—äº†å†è¯´ï¼Œå¦‚æœç»“æœåˆç†é‚£ä¹ˆè¿‡ç¨‹å¿…ç„¶ä¸€å®šç¨‹åº¦ä¸Šä¹Ÿæ˜¯åˆç†çš„ã€‚ç°åœ¨æˆ‘ä»¬åˆ†åˆ«ç®—åˆ†å­ã€åˆ†æ¯ï¼Œè¿™æ¬¡æˆ‘ä»¬ä¸€èˆ¬åœ°è®¾$\mathbb{E}[\boldsymbol{g}]=\boldsymbol{\mu},\mathbb{E}[\boldsymbol{g}^2]=\boldsymbol{\mu}^2 + \boldsymbol{\sigma}^2 $ï¼Œå…¶ä¸­åˆ†æ¯æ¯”è¾ƒç®€å•<br />
\begin{equation}\begin{aligned}<br />
\mathbb{E}[\boldsymbol{v}_t] =&amp;\, (1 - \beta_2)\sum</em>}^t \beta_2^{t-i}\mathbb{E}[\boldsymbol{g<em i="1">i^2] \\\<br />
=&amp;\, (1 - \beta_2)\sum</em>^2) \\\}^t \beta_2^{t-i}(\boldsymbol{\mu}^2 + \boldsymbol{\sigma<br />
=&amp;\, (1 - \beta_2^t) (\boldsymbol{\mu}^2 + \boldsymbol{\sigma}^2) \\\[5pt]<br />
\approx &amp;\, \boldsymbol{\mu}^2 + \boldsymbol{\sigma}^2 \qquad(t\to\infty)<br />
\end{aligned}\end{equation}<br />
è‡³äºåˆ†å­ï¼Œå¯ä»¥ç›´æ¥å±•å¼€å¹³æ–¹è®¡ç®—ï¼Œä¹Ÿå¯ä»¥ç¨å¾®å·æ‡’ä¸€ä¸‹ï¼šæˆ‘ä»¬è¦æ±‚çš„æ˜¯$\boldsymbol{m}<em i="1">t$çš„äºŒé˜¶çŸ©$\mathbb{E}[\boldsymbol{m}_t^2]$ï¼Œå®ƒåˆç­‰äº$\mathbb{E}[\boldsymbol{m}_t]^2 + \mathbb{V}ar[\boldsymbol{m}_t]$ã€‚$\mathbb{E}[\boldsymbol{m}_t]$çš„è®¡ç®—è·Ÿ$\mathbb{E}[\boldsymbol{m}_t]$ç±»ä¼¼ï¼Œç»“æœæ˜¯$(1 - \beta_1^t)\boldsymbol{\mu}\approx\boldsymbol{\mu}$ï¼›è‡³äºæ–¹å·®ï¼Œå®ƒå…·æœ‰å¹³æ–¹å¯åŠ æ€§ï¼Œå› æ­¤<br />
\begin{equation}\mathbb{V}ar[\boldsymbol{m}_t] = (1 - \beta_1)^2\sum</em>}^t \beta_1^{2(t-i)}\boldsymbol{\sigma}^2 = \frac{(1 - \beta_1)^2 (1 - \beta_1^{2t})}{1 - \beta_1^2}\boldsymbol{\sigma}^2\approx \frac{1 - \beta_1}{1 + \beta_1}\boldsymbol{\sigma}^2\qquad (t\to\infty)\end{equation<br />
æ‰€ä»¥<br />
\begin{equation}\mathbb{E}[\boldsymbol{u}_t^2]\approx \frac{\boldsymbol{\mu}^2 + \frac{1 - \beta_1}{1 + \beta_1}\boldsymbol{\sigma}^2}{\boldsymbol{\mu}^2 + \boldsymbol{\sigma}^2}\end{equation}</p>
<h2 id="_4">ç»“æœåˆ†æ</h2>
<p>ç”±äº$\mathbb{E}[\boldsymbol{u}<em RMS="RMS">t^2]$å·²ç»æ˜¯å¹³æ–¹åçš„å‘é‡ï¼Œæ‰€ä»¥ä¸ºäº†ä¼°è®¡$\Vert\boldsymbol{u}_t\Vert</em>$ï¼Œæˆ‘ä»¬åªéœ€è¦å¯¹å„ä¸ªåˆ†é‡æ±‚å¹³å‡ç„¶åå¼€å¹³æ–¹ã€‚æ±‚å¹³å‡è¿™ä¸€æ­¥ï¼Œæˆ‘ä»¬ä¸å¦¨å†æ¥ä¸€æ¬¡å¹³å‡åœºè¿‘ä¼¼ï¼ˆåˆ†å­åˆ†æ¯åˆ†åˆ«æ±‚å¹³å‡ï¼‰ï¼Œæœ€ç»ˆå°†å¾—åˆ°<br />
\begin{equation}\Vert\boldsymbol{u}<em RMS="RMS">t\Vert</em>} \approx \sqrt{\frac{\Vert\boldsymbol{\mu}\Vert^2 + \frac{1 - \beta_1}{1 + \beta_1}\Vert\boldsymbol{\sigma}\Vert^2}{\Vert\boldsymbol{\mu}\Vert^2 + \Vert\boldsymbol{\sigma}\Vert^2}} = \sqrt{\frac{\Vert\boldsymbol{\mu}\Vert^2/\Vert\boldsymbol{\sigma}\Vert^2 + \frac{1 - \beta_1}{1 + \beta_1}}{\Vert\boldsymbol{\mu}\Vert^2/\Vert\boldsymbol{\sigma}\Vert^2 + 1}}\label{eq:mean-field}\end{equation<br />
å®ƒæœ‰ä¸¤ä¸ªå½±å“å› å­ï¼šä¸€æ˜¯$\Vert\boldsymbol{\mu}\Vert^2/\Vert\boldsymbol{\sigma}\Vert^2$ï¼Œè¿™å¯ä»¥çœ‹æˆæ˜¯æ¢¯åº¦çš„ä¿¡å™ªæ¯”ï¼ˆSNRï¼‰ï¼›äºŒæ˜¯$\beta_1$ï¼Œè¿™æ˜¯Adamçš„è¶…å‚æ•°ä¹‹ä¸€ã€‚ç‰¹åˆ«åœ°ï¼Œç»“æœä¸ä¾èµ–äº$\beta_2$ï¼Œè¿™è·Ÿå‰é¢çš„æ¨¡æ‹Ÿç»“æœå»åˆã€‚é‚£ä¹ˆè¿™ä¸ªå¼å­ç©¶ç«Ÿè¿‘ä¼¼å¾—å¥½ä¸å¥½å‘¢ï¼Ÿæˆ‘ä»¬ä¸å¦¨è€ƒè™‘æœ€ç®€å•çš„ç‰¹ä¾‹$\boldsymbol{\mu}=\boldsymbol{0}$ï¼Œæ­¤æ—¶<br />
\begin{equation}\Vert\boldsymbol{u}<em RMS="RMS">t\Vert</em>} \approx \sqrt{\frac{1 - \beta_1}{1 + \beta_1}}\end{equation<br />
ä»£å…¥$\beta_1=0.9$ï¼Œç»“æœæ˜¯$0.2294\cdots$ï¼Œè·Ÿæ¨¡æ‹Ÿç»“æœå’Œå®è·µè¡¨ç°å±…ç„¶éƒ½å¾ˆå»åˆï¼è¿›ä¸€æ­¥åœ°ï¼Œå®ƒè·Ÿæ¨¡æ‹Ÿç»“æœçš„å¤šä¸ªå¯¹æ¯”å¦‚ä¸‹ï¼š  </p>
<p><a href="/usr/uploads/2025/09/1430078993.svg" title="ç‚¹å‡»æŸ¥çœ‹åŸå›¾"><img alt="æ¨¡æ‹Ÿç»“æœä¸å¹³å‡åœºè¿‘ä¼¼ï¼ˆä¸åŒbeta1ã€beta2ï¼‰" src="/usr/uploads/2025/09/1430078993.svg" /></a></p>
<p>æ¨¡æ‹Ÿç»“æœä¸å¹³å‡åœºè¿‘ä¼¼ï¼ˆä¸åŒbeta1ã€beta2ï¼‰</p>
<p>åº”è¯¥è¯´ï¼Œæ•´ä½“çš„è¿‘ä¼¼ç¨‹åº¦è¿˜æ˜¯ä¸é”™çš„ï¼Œç‰¹åˆ«æ˜¯$\beta_2 \geq 0.9$ä¹‹åï¼Œç»“æœå‡ ä¹è·Ÿå¹³å‡åœºè¿‘ä¼¼é‡åˆäº†ï¼ˆç» <a href="https://x.com/EIFY/status/1965888629814988984">@EIFY</a> æé†’ï¼Œè®ºæ–‡<a href="https://papers.cool/arxiv/2305.17212">ã€ŠRotational Equilibrium: How Weight Decay Balances Learning Across Neural Networksã€‹</a>ä¹Ÿæ›¾å¾—åˆ°è¿‡ç›¸åŒçš„è®¡ç®—ç»“æœï¼‰ã€‚</p>
<p>è‡³äºè€ƒè™‘SNRçš„æ¯”è¾ƒç»“æœå¦‚ä¸‹ï¼š  </p>
<p><a href="/usr/uploads/2025/09/1584329510.svg" title="ç‚¹å‡»æŸ¥çœ‹åŸå›¾"><img alt="æ¨¡æ‹Ÿç»“æœä¸å¹³å‡åœºè¿‘ä¼¼ï¼ˆä¸åŒbeta1ã€SNRï¼‰" src="/usr/uploads/2025/09/1584329510.svg" /></a></p>
<p>æ¨¡æ‹Ÿç»“æœä¸å¹³å‡åœºè¿‘ä¼¼ï¼ˆä¸åŒbeta1ã€SNRï¼‰</p>
<p>å½“ä¿¡å™ªæ¯”å¢å¤§æ—¶ï¼Œå¹³å‡åœºè¿‘ä¼¼çš„è¯¯å·®å¼€å§‹å˜å¤§ï¼Œä¸è¿‡ä»æ—§èƒ½é¢„æµ‹ä¸€ä¸ªæ•´ä½“è¶‹åŠ¿ã€‚äº‹å®ä¸Šï¼Œå®é™…è®­ç»ƒä¸­æ¢¯åº¦çš„ä¿¡å™ªæ¯”å¾ˆå°‘æœºä¼šèƒ½æœ‰æ¥è¿‘1è¿™ä¹ˆå¤§ï¼Œå› æ­¤ä¾ç„¶å¯ä»¥è®¤ä¸ºå¹³å‡åœºæ˜¯ä¸€ä¸ªè‰¯å¥½è¿‘ä¼¼ã€‚</p>
<h2 id="_5">åå‘é¢„æµ‹</h2>
<p>å¦‚æœæˆ‘ä»¬å·²ç»æ¥å—å¹³å‡åœºè¿‘ä¼¼$\eqref{eq:mean-field}$ï¼Œé‚£ä¹ˆå¯ä»¥åè¿‡æ¥ç”¨å®ƒä¼°ç®—æ¢¯åº¦çš„ä¿¡å™ªæ¯”ï¼š<br />
\begin{equation}\frac{\Vert\boldsymbol{\mu}\Vert^2}{\Vert\boldsymbol{\sigma}\Vert^2} \approx \frac{\Vert\boldsymbol{u}<em RMS="RMS">t\Vert</em>}^2 - \frac{1 - \beta_1}{1 + \beta_1}}{1 - \Vert\boldsymbol{u<em RMS="RMS">t\Vert</em>}^2}\end{equation<br />
åœ¨å®é™…è®­ç»ƒä¸­ï¼Œ$\beta_1$æ˜¯ç»™å®šçš„ï¼Œ$\Vert\boldsymbol{u}<em RMS="RMS">t\Vert</em>$ï¼ˆä¹Ÿå°±æ˜¯Adamçš„Update RMSï¼‰ä¹Ÿæ˜¯å¯ä»¥ç›´æ¥ä¼°ç®—çš„ï¼Œæ‰€ä»¥ä¸Šå¼æ˜¯å¯è®¡ç®—çš„ã€‚å½“ç„¶ï¼Œè¿™ä¸ªå¼å­åªå¯¹Adamé€‚ç”¨ï¼Œæœ‰æ²¡æœ‰æ›´ä¸€èˆ¬çš„ä¼°è®¡æ€è·¯å‘¢ï¼Ÿè¿˜çœŸæœ‰ï¼åˆ«å¿˜äº†å‰é¢æˆ‘ä»¬ä¼°è®¡å¾—åˆ°<br />
\begin{equation}\mathbb{E}[\boldsymbol{m}<em RMS="RMS">t^2]\approx \boldsymbol{\mu}^2 + \frac{1 - \beta_1}{1 + \beta_1}\boldsymbol{\sigma}^2\end{equation}<br />
é‚£ä¹ˆå¯¹å®ƒçš„åˆ†é‡æ±‚å’Œç„¶åå¼€å¹³æ–¹ï¼Œæˆ‘ä»¬è®¤ä¸ºå®ƒä¼šæ˜¯$\Vert\boldsymbol{m}_t\Vert$çš„ä¸€ä¸ªè¿‘ä¼¼ï¼š<br />
\begin{equation}\Vert\boldsymbol{m}_t\Vert\approx \sqrt{\Vert\boldsymbol{\mu}\Vert^2 + \frac{1 - \beta_1}{1 + \beta_1}\Vert\boldsymbol{\sigma}\Vert^2}\end{equation}<br />
è‡³äºäºŒé˜¶çŸ©æ˜¯$\mathbb{E}[\boldsymbol{v}_t]\approx \boldsymbol{\mu}^2 + \boldsymbol{\sigma}^2$ï¼Œè€ŒåƒMuonä¹‹ç±»çš„ä¼˜åŒ–å™¨å¹¶æ²¡æœ‰äºŒé˜¶çŸ©å¯ç”¨ï¼Œä½†æ˜¯æˆ‘ä»¬ç•™æ„åˆ°äºŒé˜¶çŸ©çš„ç»“æœæ˜¯è·Ÿ$\beta_2$æ— å…³çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸å¦¨è€ƒè™‘ä¸€ä¸ªæœ€ç®€å•çš„ç‰¹ä¾‹â€”â€”$\beta_2=0$â€”â€”æ­¤æ—¶$\boldsymbol{v}_t=\boldsymbol{g}_t^2$ã€‚å½“ç„¶è¿™å¯èƒ½æœ‰ç‚¹å‹‰å¼ºï¼Œä½†ä¼°ç®—å˜›è‚¯å®šæ˜¯æ€ä¹ˆæ–¹ä¾¿æ€ä¹ˆæ¥ã€‚è¿™ä¸ªâ€œè¿‘ä¼¼â€æ„å‘³ç€æˆç«‹$\Vert\boldsymbol{g}_t\Vert^2\approx \Vert\boldsymbol{\mu}\Vert^2 + \Vert\boldsymbol{\sigma}\Vert^2$ï¼Œäºæ˜¯æˆ‘ä»¬æœ‰<br />
\begin{equation}\frac{\Vert\boldsymbol{m}_t\Vert}{\Vert\boldsymbol{g}_t\Vert}\approx \sqrt{\frac{\Vert\boldsymbol{\mu}\Vert^2 + \frac{1 - \beta_1}{1 + \beta_1}\Vert\boldsymbol{\sigma}\Vert^2}{\Vert\boldsymbol{\mu}\Vert^2 + \Vert\boldsymbol{\sigma}\Vert^2}}\end{equation}<br />
å³ç«¯çš„å½¢å¼è·Ÿå¼$\eqref{eq:mean-field}$å¦‚å‡ºä¸€è¾™ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å†™å‡º<br />
\begin{equation}\frac{\Vert\boldsymbol{\mu}\Vert^2}{\Vert\boldsymbol{\sigma}\Vert^2} \approx \frac{\Vert\boldsymbol{m}_t\Vert^2/\Vert\boldsymbol{g}_t\Vert^2 - \frac{1 - \beta_1}{1 + \beta_1}}{1 - \Vert\boldsymbol{m}_t\Vert^2/\Vert\boldsymbol{g}_t\Vert^2}\end{equation}<br />
ä¹Ÿå°±æ˜¯ç”¨$\Vert\boldsymbol{m}_t\Vert/\Vert\boldsymbol{g}_t\Vert$æ›¿ä»£$\Vert\boldsymbol{u}_t\Vert</em>\Vert^2$å±äºè·¨ä¼˜åŒ–è½¨è¿¹çš„ç»Ÿè®¡é‡ï¼Œæˆ‘ä»¬æ€»å¾—æœ‰äº›è·¨è½¨è¿¹çš„ç»Ÿè®¡ä¿¡æ¯ï¼Œæ‰æœ‰å¯èƒ½å»ä¼°è®¡å®ƒã€‚}$ï¼Œè¿™å°±ç»™å‡ºäº†ä¸€ç§å¸¦åŠ¨é‡ä¼˜åŒ–å™¨é€šç”¨çš„ä¼°è®¡$\Vert\boldsymbol{\mu}\Vert^2/\Vert\boldsymbol{\sigma}\Vert^2$çš„æ€è·¯ã€‚å¯èƒ½è¿˜æœ‰è¯»è€…æƒ³é—®åŠ¨é‡éƒ½æ²¡æœ‰å’‹åŠï¼Ÿè¿™å°±çœŸæ²¡æœ‰åŠæ³•äº†ï¼Œå› ä¸ºè¿™é‡Œçš„$\Vert\boldsymbol{\mu}\Vert^2/\Vert\boldsymbol{\sigma</p>
<h2 id="_6">æ–‡ç« å°ç»“</h2>
<p>æœ¬æ–‡ä¸»è¦ä»æ¨¡æ‹Ÿå®éªŒå’Œç†è®ºè¿‘ä¼¼ä¸¤ä¸ªè§’åº¦æ¢è®¨äº†Adamçš„Update RMSï¼Œå®ƒå¯ä»¥ä½œä¸ºæˆ‘ä»¬åœ¨Muonä¼˜åŒ–å™¨ä¸­å°†Update RMSå¯¹é½åˆ°0.2çš„ç†è®ºä¾æ®ä¹‹ä¸€ã€‚</p>
<p><em><strong>è½¬è½½åˆ°è¯·åŒ…æ‹¬æœ¬æ–‡åœ°å€ï¼š</strong><a href="https://spaces.ac.cn/archives/11267">https://spaces.ac.cn/archives/11267</a></em></p>
<p><em><strong>æ›´è¯¦ç»†çš„è½¬è½½äº‹å®œè¯·å‚è€ƒï¼š</strong></em><a href="https://spaces.ac.cn/archives/6508#%E6%96%87%E7%AB%A0%E5%A6%82%E4%BD%95%E8%BD%AC%E8%BD%BD/%E5%BC%95%E7%94%A8" title="ã€Šç§‘å­¦ç©ºé—´FAQã€‹">ã€Šç§‘å­¦ç©ºé—´FAQã€‹</a></p>
<p><strong>å¦‚æœæ‚¨è¿˜æœ‰ä»€ä¹ˆç–‘æƒ‘æˆ–å»ºè®®ï¼Œæ¬¢è¿åœ¨ä¸‹æ–¹è¯„è®ºåŒºç»§ç»­è®¨è®ºã€‚</strong></p>
<p><strong>å¦‚æœæ‚¨è§‰å¾—æœ¬æ–‡è¿˜ä¸é”™ï¼Œæ¬¢è¿åˆ†äº«/æ‰“èµæœ¬æ–‡ã€‚æ‰“èµå¹¶éè¦ä»ä¸­è·å¾—æ”¶ç›Šï¼Œè€Œæ˜¯å¸Œæœ›çŸ¥é“ç§‘å­¦ç©ºé—´è·å¾—äº†å¤šå°‘è¯»è€…çš„çœŸå¿ƒå…³æ³¨ã€‚å½“ç„¶ï¼Œå¦‚æœä½ æ— è§†å®ƒï¼Œä¹Ÿä¸ä¼šå½±å“ä½ çš„é˜…è¯»ã€‚å†æ¬¡è¡¨ç¤ºæ¬¢è¿å’Œæ„Ÿè°¢ï¼</strong></p>
<p>æ‰“èµ</p>
<p><img alt="ç§‘å­¦ç©ºé—´" src="https://spaces.ac.cn/usr/themes/geekg/payment/wx.png" /></p>
<p>å¾®ä¿¡æ‰“èµ</p>
<p><img alt="ç§‘å­¦ç©ºé—´" src="https://spaces.ac.cn/usr/themes/geekg/payment/zfb.png" /></p>
<p>æ”¯ä»˜å®æ‰“èµ</p>
<p>å› ä¸ºç½‘ç«™åå°å¯¹æ‰“èµå¹¶æ— è®°å½•ï¼Œå› æ­¤æ¬¢è¿åœ¨æ‰“èµæ—¶å€™å¤‡æ³¨ç•™è¨€ã€‚ä½ è¿˜å¯ä»¥<a href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&amp;email=tN7d1drY3drrx8H0xcWa19vZ"><strong>ç‚¹å‡»è¿™é‡Œ</strong></a>æˆ–åœ¨ä¸‹æ–¹è¯„è®ºåŒºç•™è¨€æ¥å‘ŠçŸ¥ä½ çš„å»ºè®®æˆ–éœ€æ±‚ã€‚</p>
<p><strong>å¦‚æœæ‚¨éœ€è¦å¼•ç”¨æœ¬æ–‡ï¼Œè¯·å‚è€ƒï¼š</strong></p>
<p>è‹å‰‘æ—. (Sep. 02, 2025). ã€Šä¸ºä»€ä¹ˆAdamçš„Update RMSæ˜¯0.2ï¼Ÿ ã€‹[Blog post]. Retrieved from <a href="https://spaces.ac.cn/archives/11267">https://spaces.ac.cn/archives/11267</a></p>
<p>@online{kexuefm-11267,<br />
title={ä¸ºä»€ä¹ˆAdamçš„Update RMSæ˜¯0.2ï¼Ÿ},<br />
author={è‹å‰‘æ—},<br />
year={2025},<br />
month={Sep},<br />
url={\url{https://spaces.ac.cn/archives/11267}},<br />
} </p>
<hr />
<h2 id="_7">å…¬å¼æ¨å¯¼ä¸æ³¨é‡Š</h2>
<p>TODO: æ·»åŠ è¯¦ç»†çš„æ•°å­¦å…¬å¼æ¨å¯¼å’Œæ³¨é‡Š</p>
        </div>
    </div>
</body>
</html>