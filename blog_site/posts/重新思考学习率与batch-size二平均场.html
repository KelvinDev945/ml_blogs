<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é‡æ–°æ€è€ƒå­¦ä¹ ç‡ä¸Batch Sizeï¼ˆäºŒï¼‰ï¼šå¹³å‡åœº</title>
    <style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    line-height: 1.6; color: #333; max-width: 900px; margin: 0 auto; padding: 20px; background: #f5f5f5;
}
.container { background: white; padding: 40px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
header { border-bottom: 2px solid #e0e0e0; padding-bottom: 20px; margin-bottom: 30px; }
h1 { color: #2c3e50; margin-bottom: 10px; font-size: 2em; }
.meta { color: #666; font-size: 0.9em; margin-bottom: 20px; }
.content { margin-top: 30px; overflow-wrap: break-word; }
.content h2 { color: #34495e; margin-top: 30px; margin-bottom: 15px; border-bottom: 1px solid #eee; padding-bottom: 5px; }
.content p { margin-bottom: 15px; }
.content pre { background: #f8f8f8; padding: 15px; border-radius: 5px; overflow-x: auto; border-left: 3px solid #3498db; margin: 15px 0; }
.content code { background: #f8f8f8; padding: 2px 5px; border-radius: 3px; font-family: monospace; font-size: 0.9em; }
.content blockquote { border-left: 4px solid #3498db; padding-left: 20px; margin: 20px 0; color: #555; font-style: italic; }
.content table { border-collapse: collapse; width: 100%; margin: 20px 0; }
.content th, .content td { border: 1px solid #ddd; padding: 10px; text-align: left; }
.back-link { display: inline-block; margin-bottom: 20px; color: #3498db; text-decoration: none; font-weight: 500; }
</style>
    
<script>
    window.MathJax = {
        tex: {
            inlineMath: [['$', '$'], ['\(', '\)']],
            displayMath: [['$$', '$$'], ['\[', '\]']],
            processEscapes: true
        }
    };
</script>
<script id="MathJax-script" async src="https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js"></script>

</head>
<body>
    <div class="container">
        <a href="../index.html" class="back-link">â† è¿”å›é¦–é¡µ</a>
        <header>
            <h1>é‡æ–°æ€è€ƒå­¦ä¹ ç‡ä¸Batch Sizeï¼ˆäºŒï¼‰ï¼šå¹³å‡åœº</h1>
            <div class="meta">ğŸ“… æœ€åæ›´æ–°: 2025-11-26 | ğŸ“„ å¤§å°: 48.9 KB</div>
        </header>
        <div class="content">
            <p><strong>åŸæ–‡é“¾æ¥</strong>: <a href="https://spaces.ac.cn/archives/11280">https://spaces.ac.cn/archives/11280</a></p>
<p><strong>å‘å¸ƒæ—¥æœŸ</strong>: </p>
<hr />
<p>ä¸Šæ–‡<a href="/archives/11260">ã€Šé‡æ–°æ€è€ƒå­¦ä¹ ç‡ä¸Batch Sizeï¼ˆä¸€ï¼‰ï¼šç°çŠ¶ã€‹</a>æœ«å°¾æˆ‘ä»¬è¯´åˆ°ï¼Œå¯¹äºSignSGDã€SoftSignSGDç­‰$\tilde{\boldsymbol{\varphi}}_B$éçº¿æ€§ä¾èµ–äº$\tilde{\boldsymbol{g}}_B$çš„æƒ…å½¢ï¼Œè®¡ç®—è¿‡ç¨‹çš„å¿ƒæ™ºè´Ÿæ‹…ç›¸å½“æ²‰é‡ï¼Œå¹¶ä¸”é¢ä¸´éš¾ä»¥æ¨å¹¿çš„å›°å¢ƒã€‚ä¸ºæ­¤ï¼Œç¬”è€…æŠ•å…¥äº†ä¸€äº›ç²¾åŠ›å»å°è¯•ç®€åŒ–å…¶ä¸­çš„æ¨å¯¼ï¼Œä¸‡å¹¸æœ‰äº›è®¸æ”¶è·ï¼Œå…¶ä¸­çš„å…³é”®æ€è·¯ä¾¿æ˜¯æœ¬æ–‡çš„ä¸»é¢˜â€”â€”å¹³å‡åœºã€‚</p>
<p>å¹³å‡åœºæ˜¯ç‰©ç†ä¸­å¸¸è§çš„è¿‘ä¼¼è®¡ç®—æ–¹æ³•ï¼Œå®ƒæ²¡æœ‰å›ºå®šçš„å½¢å¼ï¼Œä½†å¤§ä½“æ€æƒ³å°±æ˜¯å°†æ±‚å¹³å‡ç§»åˆ°å‡½æ•°ä¹‹å†…ã€‚äº‹å®ä¸Šï¼Œåœ¨<a href="/archives/11267">ã€Šä¸ºä»€ä¹ˆAdamçš„Update RMSæ˜¯0.2ï¼Ÿã€‹</a>ä¸­æˆ‘ä»¬å°±å·²ç»çª¥è§è¿‡å¹³å‡åœºçš„é­…åŠ›ï¼Œè€Œåœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å†æ¥è§è¯†å®ƒåœ¨è®¡ç®—SignSGD/SoftSignSGDçš„å­¦ä¹ ç‡è§„å¾‹ä¸Šçš„å¥‡æ•ˆã€‚</p>
<h2 id="_1">æ–¹æ³•å¤§æ„</h2>
<p>æ²¿ç€ä¸Šæ–‡çš„è®°å·ï¼Œå¯¹äºSignSGDæˆ‘ä»¬æœ‰$\newcommand{sign}{\mathop{\text{sign}}}\tilde{\boldsymbol{\varphi}}_B=\sign(\tilde{\boldsymbol{g}}_B)$ï¼Œæˆ‘ä»¬éœ€è¦å…ˆè®¡ç®—$\mathbb{E}[\tilde{\boldsymbol{\varphi}}_B]$å’Œ$\mathbb{E}[\tilde{\boldsymbol{\varphi}}_B\tilde{\boldsymbol{\varphi}}_B^{\top}]$ï¼Œç»§è€Œå¯ä»¥ç®—å‡º<br />
\begin{equation}\newcommand{tr}{\mathop{\text{tr}}}\eta^<em> \approx \frac{\mathbb{E}[\tilde{\boldsymbol{\varphi}}_B]^{\top}\boldsymbol{g}}{\tr(\mathbb{E}[\tilde{\boldsymbol{\varphi}}_B\tilde{\boldsymbol{\varphi}}_B^{\top}]\boldsymbol{H})}\label{eq:eta-opt}\end{equation}<br />
å…¶ä¸­$\boldsymbol{g}$æ˜¯æ¢¯åº¦ï¼Œ$\boldsymbol{H}$æ˜¯HessiançŸ©é˜µã€‚æ ¹æ®å‡è®¾ï¼Œéšæœºå˜é‡$\tilde{\boldsymbol{g}}_B$çš„å‡å€¼ä¸º$\boldsymbol{g}$ï¼Œåæ–¹å·®çŸ©é˜µä¸º$\boldsymbol{\Sigma}/B$ï¼Œæˆ‘ä»¬ä¸»è¦å…³å¿ƒçš„æ˜¯$\eta^</em>$ä¸Batch Size $B$çš„å…³ç³»ã€‚ç”±äº$\sign$æ˜¯Element-wiseçš„è¿ç®—ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ä»å•ä¸ªæ ‡é‡å‡ºå‘è¿›è¡Œå°è¯•ã€‚å¹³å‡åœºæ–¹æ³•ï¼Œæºäºç¬”è€…æŸå¤©çªç„¶å‘ç°çš„ä¸€ä¸ªå¯èƒ½æˆç«‹çš„è¿‘ä¼¼å…³ç³»<br />
\begin{equation}\mathbb{E}[\sign(\tilde{g}_B)] = \mathbb{E}\bigg[\frac{\tilde{g}_B}{\sqrt{\tilde{g}_B^2}}\bigg]\approx \frac{\mathbb{E}[\tilde{g}_B]}{\sqrt{\mathbb{E}[\tilde{g}_B^2}]} = \frac{g}{\sqrt{g^2 + \sigma^2/B}}\end{equation}<br />
çœ‹è¿‡<a href="/archives/10542">ã€Šå½“Batch Sizeå¢å¤§æ—¶ï¼Œå­¦ä¹ ç‡è¯¥å¦‚ä½•éšä¹‹å˜åŒ–ï¼Ÿã€‹</a>çš„è¯»è€…ï¼Œåº”è¯¥èƒ½æƒŠå¥‡åœ°å‘ç°ï¼Œè¿™ä¸ªåªéœ€ä¸€è¡Œå°±èƒ½å¿«é€Ÿæ¨å¯¼å‡ºæ¥çš„ç»“æœï¼Œè·ŸåŸæ–‡ä¸­ä¸€å¤§é€šå‡è®¾å’Œè¿‘ä¼¼å¾—å‡ºæ¥çš„ç»“æœï¼Œåªå·®ä¸€ä¸ªæ— å…³ç´§è¦çš„å¸¸æ•°$\pi/2$ï¼è¿™ä¸ªäº‹å®è®©ç¬”è€…æ„è¯†åˆ°ï¼Œå¹³å‡åœºè¿‘ä¼¼æˆ–è®¸å¯¹å­¦ä¹ ç‡ä¸Batch Sizeçš„å…³ç³»å®Œå…¨å¤Ÿç”¨äº†ã€‚</p>
<p>åŸºäºå¹³å‡åœºçš„æ¨å¯¼æœ‰è¯¸å¤šå¥½å¤„ã€‚é¦–å…ˆæ˜¯å‡è®¾å°‘ï¼ŒåŸå§‹æ¨å¯¼è‡³å°‘åŒ…å«ä¸‰ä¸ªå‡è®¾ï¼šåˆ†é‡ç‹¬ç«‹ã€æ­£æ€åˆ†å¸ƒã€$\text{erf}(x)$ç”¨$x/\sqrt{x^2+c}$è¿‘ä¼¼ï¼Œä½†æ˜¯å¹³å‡åœºè¿‘ä¼¼å¯ä»¥å»æ‰åˆ†å¸ƒå½¢å¼çš„å‡è®¾ï¼Œåªéœ€è¦å‡è®¾å®ƒè‡ªèº«æ˜¯å¯ç”¨çš„å°±è¡Œã€‚ç„¶åæ˜¯è®¡ç®—ç®€å•ï¼Œä¸Šé¢æˆ‘ä»¬ä¸€è¡Œå°±å®Œæˆäº†è®¡ç®—ï¼Œè€ŒåŸå§‹æ¨å¯¼å³ä¾¿è¯¸å¤šå‡è®¾ä¹‹ä¸‹è®¡ç®—ä¹Ÿæ˜¯å¤æ‚å¾—å¤šã€‚</p>
<h2 id="_2">è®¡ç®—è¿‡ç¨‹</h2>
<p>è¿™ä¸€èŠ‚æˆ‘ä»¬å°†åˆ©ç”¨å¹³å‡åœºè¿‘ä¼¼ï¼Œç»™å‡ºSignSGDå®Œæ•´çš„è®¡ç®—è¿‡ç¨‹ã€‚é¦–å…ˆæ˜¯å‡å€¼$\mathbb{E}[\tilde{\boldsymbol{\varphi}}<em i_i="i,i">B]$ï¼Œå…¶å®ä¸Šä¸€èŠ‚çš„è®¡ç®—å…¶å®å·²ç»å·®ä¸å¤šå®Œæ•´äº†ï¼Œè¿™é‡Œåªéœ€è¦è¡¥å……å°‘è®¸ç»†èŠ‚ã€‚æˆ‘ä»¬ç”¨åˆ†é‡å†™æ³•ï¼š<br />
\begin{equation}\mathbb{E}[\tilde{\boldsymbol{\varphi}}_B]_i = \mathbb{E}[\sign((\tilde{g}_B)_i)] = \mathbb{E}\bigg[\frac{(\tilde{g}_B)_i}{\sqrt{(\tilde{g}_B)_i^2}}\bigg]\approx \frac{\mathbb{E}[(\tilde{g}_B)_i]}{\sqrt{\mathbb{E}[(\tilde{g}_B)_i^2]}} = \frac{g_i}{\sqrt{g_i^2 + \sigma_i^2/B}} = \frac{\sign(g_i)}{\sqrt{1 + (\sigma_i^2/g_i^2)/B}}\end{equation}<br />
å…¶ä¸­$\sigma_i^2 = \boldsymbol{\Sigma}</em>$ã€‚ç”±äºæˆ‘ä»¬æœ€ç»ˆä¸»è¦å…³å¿ƒ$\eta^*$ä¸$B$çš„å…³ç³»ï¼Œè¿™ä¸¤è€…éƒ½æ˜¯æ ‡é‡çš„ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬å†ç”¨ä¸€æ¬¡å¹³å‡åœºè¿‘ä¼¼ï¼Œå°†ä¸$B$æœ‰å…³çš„åˆ†æ¯éƒ¨åˆ†ä»¥æ ‡é‡å½¢å¼åˆ†ç¦»å‡ºæ¥ï¼š<br />
\begin{equation}\mathbb{E}[\tilde{\boldsymbol{\varphi}}<em _text_simple="\text{simple">B]_i \approx \frac{\sign(g_i)}{\sqrt{1 + (\sigma_i^2/g_i^2)/B}} \approx \frac{\sign(g_i)}{\sqrt{1 + \mathcal{B}</em>}}/B}} \triangleq \mu_i\end{equation<br />
è¿™é‡Œçš„$\mathcal{B}<em _text_simple="\text{simple">{\text{simple}}$å°±æ˜¯ä¸Šä¸€ç¯‡æ–‡ç« çš„$\mathcal{B}</em>[g_i^2]$ã€‚è¿™æ ·è¿‘ä¼¼ä¹‹åç»“æœå¾—ä»¥ç®€åŒ–ï¼Œä½†ä»ä¿ç•™äº†å…³äº$B$çš„å‡½æ•°å½¢å¼ã€‚}} = \tr(\boldsymbol{\Sigma})/\boldsymbol{g}^{\top}\boldsymbol{g}$ï¼Œå®ƒåˆç­‰äº$\mathbb{E}[\sigma_i^2]/\mathbb{E}[g_i^2]$ï¼ˆè¿™ä¸ª$\mathbb{E}$æ˜¯å¯¹ä¸‹æ ‡$i$å–å¹³å‡ï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒæ˜¯å°†åŸæœ¬è·Ÿä¸‹æ ‡$i$æœ‰å…³çš„$\sigma_i^2/g_i^2$ï¼Œæ›¿æ¢æˆè·Ÿä¸‹æ ‡æ— å…³çš„æŸç§å¹³å‡å€¼$\mathbb{E}[\sigma_i^2]/\mathbb{E</p>
<p>ç„¶åæ˜¯äºŒé˜¶çŸ©$\mathbb{E}[\tilde{\boldsymbol{\varphi}}<em i_j="i,j">B\tilde{\boldsymbol{\varphi}}_B^{\top}]$ï¼Œè¿™é‡Œæˆ‘ä»¬é‡æ–°å¼•å…¥åˆ†é‡ç‹¬ç«‹å‡è®¾ä»¥ç®€åŒ–ç»“æœã€‚ä¸å¼•å…¥è¿™ä¸ªå‡è®¾å…¶å®ä¹Ÿå¯ä»¥è®¡ç®—ï¼Œä¸è¿‡ç»“æœä¼šå¤æ‚ä¸€äº›ï¼Œå¹¶ä¸”ä¹Ÿéœ€è¦å¦å¤–çš„å‡è®¾æ¥ç®€åŒ–è®¡ç®—ï¼Œæ‰€ä»¥è¿˜ä¸å¦‚ç›´æ¥å¼•å…¥ç‹¬ç«‹å‡è®¾ã€‚åœ¨ç‹¬ç«‹å‡è®¾ä¹‹ä¸‹ï¼Œ$\mathbb{E}[\tilde{\boldsymbol{\varphi}}_B\tilde{\boldsymbol{\varphi}}_B^{\top}]</em>$åˆ†$i\neq j$å’Œ$i=j$ä¸¤éƒ¨åˆ†è®¡ç®—ï¼Œå½“$i\neq j$æ—¶ï¼Œ<br />
\begin{equation}\mathbb{E}[\tilde{\boldsymbol{\varphi}}<em i_j="i,j">B\tilde{\boldsymbol{\varphi}}_B^{\top}]</em>} = \mathbb{E}[(\tilde{\varphi<em i_j="i,j">B)_i(\tilde{\varphi}_B)_j] = \mathbb{E}[(\tilde{\varphi}_B)_i]\mathbb{E}[(\tilde{\varphi}_B)_j] \approx \mu_i \mu_j\end{equation}<br />
å½“$i=j$æ—¶å°±æ›´ç®€å•äº†ï¼Œå› ä¸º$\sign$çš„å¹³æ–¹å¿…ç„¶æ˜¯1ï¼Œæ‰€ä»¥å®ƒçš„æœŸæœ›è‡ªç„¶ä¹Ÿæ˜¯1ã€‚å› æ­¤ï¼Œæ€»çš„ç»“æœå¯ä»¥ç®€å†™æˆ$\mathbb{E}[\tilde{\boldsymbol{\varphi}}_B\tilde{\boldsymbol{\varphi}}_B^{\top}]</em>(1 - \mu_i\mu_j)$ã€‚}\approx \mu_i\mu_j + \delta_{i,j</p>
<h2 id="_3">åå¸¸ç°è±¡</h2>
<p>å°†ä¸Šè¿°è®¡ç®—ç»“æœä»£å…¥åˆ°å¼$\eqref{eq:eta-opt}$ï¼Œæˆ‘ä»¬å¾—åˆ°<br />
\begin{equation}\eta^* \approx \frac{\sum_i |g_i|}{\frac{1}{\beta}\sum_i H_{i,i} + \beta\sum_{i\neq j} H_{i,j}\sign(g_i g_j)}\label{eq:eta-opt-sign}\end{equation}<br />
å…¶ä¸­$\beta = (1 + \mathcal{B}_{\text{simple}}/B)^{-1/2}$ã€‚æ³¨æ„$\beta$å…³äº$B$æ˜¯å•è°ƒé€’å¢çš„ï¼Œå¹¶ä¸”$\beta\in(0,1)$ï¼Œæ‰€ä»¥$\beta$å¯ä»¥çœ‹æˆæ˜¯æ ‡å‡†åŒ–çš„Batch Sizeã€‚ç„¶è€Œï¼Œå…³äº$\beta$å´å¹¶ä¸æ€»æ˜¯å•è°ƒçš„ï¼Œæ‰€ä»¥è¿™å°±å¯èƒ½ä¼šå‡ºç°â€œBatch Sizeå¢å¤§ï¼Œå­¦ä¹ ç‡åè€Œåº”è¯¥å‡å°â€çš„åå¸¸è¡Œä¸ºï¼Œ<a href="https://papers.cool/arxiv/2405.14578">åŸè®ºæ–‡</a>ç§°ä¹‹ä¸ºâ€œSurgeç°è±¡â€ã€‚</p>
<p>è®©æˆ‘ä»¬ä¸€æ­¥æ­¥æ¥ç†è§£ã€‚å½“$B\ll \mathcal{B}<em _text_simple="\text{simple">{\text{simple}}$æ—¶ï¼Œæœ‰$\beta\approx \sqrt{B/\mathcal{B}</em>$åˆ†æ¯ä¸­$1/\beta$é¡¹å°†ä¸»å¯¼ï¼Œäºæ˜¯æœ‰}}}$ï¼Œæ­¤æ—¶$\beta \ll 1$ï¼Œé‚£ä¹ˆå¼$\eqref{eq:eta-opt-sign<br />
\begin{equation}\eta^<em> \approx \frac{\sum_i |g_i|}{\sum_i H_{i,i}}\beta \approx \frac{\sum_i |g_i|}{\sum_i H_{i,i}}\sqrt{B/\mathcal{B}<em i_i="i,i">{\text{simple}}}\propto \sqrt{B}\end{equation}<br />
è¿™è¡¨æ˜SignSGDçš„å­¦ä¹ ç‡åœ¨å°Batch Sizeæ—¶é€‚ç”¨äºå¹³æ–¹æ ¹ç¼©æ”¾ã€‚ç”±äºæˆ‘ä»¬åœ¨åˆ†ææ—¶è¦å‡å®šHessiançŸ©é˜µçš„æ­£å®šæ€§ï¼Œæ‰€ä»¥å¿…ç„¶æœ‰$\sum_i H</em>$å…³äº$\beta$å§‹ç»ˆæ˜¯å•è°ƒé€’å¢çš„ï¼Œæ‰€ä»¥$\eta^} &gt; 0$ï¼Œé‚£ä¹ˆå½“$\sum_{i\neq j} H_{i,j}\sign(g_i g_j) \leq 0$æ—¶ï¼Œå¼$\eqref{eq:eta-opt-sign</em>$å…³äº$B$ä¹Ÿæ˜¯å•è°ƒé€’å¢çš„ï¼Œæ­¤æ—¶ä¸å­˜åœ¨åå¸¸è¡¨ç°ã€‚</p>
<p>å½“$\sum_{i\neq j} H_{i,j}\sign(g_i g_j) &gt; 0$æ—¶ï¼Œæ ¹æ®åŸºæœ¬ä¸ç­‰å¼æˆ‘ä»¬å¯ä»¥å¾—å‡ºå¼$\eqref{eq:eta-opt-sign}$åˆ†æ¯å­˜åœ¨ä¸€ä¸ªæœ€å°å€¼ç‚¹<br />
\begin{equation}\beta^<em> = \sqrt{\frac{\sum_i H_{i,i}}{\sum_{i\neq j} H_{i,j}\sign(g_i g_j)}}\end{equation}<br />
æ³¨æ„$\beta\in(0, 1)$ï¼Œæ‰€ä»¥è¿˜æœ‰ä¸€ä¸ªé™„åŠ æ¡ä»¶$\beta^</em>\in(0, 1)$ï¼Œæ­¤æ—¶$\eta^*$å…³äº$B$å°±ä¸å†æ˜¯å•è°ƒé€’å¢ï¼Œè€Œæ˜¯å…ˆå¢åå‡ï¼Œå­˜åœ¨ä¸€ä¸ªä¸´ç•ŒBatch Sizeï¼Œè¶…è¿‡è¿™ä¸ªä¸´ç•ŒBatch Sizeåå­¦ä¹ ç‡åè€Œåº”è¯¥é™ä½ï¼Œè¿™ä¾¿æ˜¯â€œSurgeç°è±¡â€ã€‚</p>
<h2 id="_4">åŸå› åæ€</h2>
<p>ä¸ºä»€ä¹ˆä¼šå‡ºç°Surgeç°è±¡è¿™ç§åå¸¸è¡Œä¸ºå‘¢ï¼Ÿäº‹å®ä¸Šï¼Œè¿™æ˜¯ä¼˜åŒ–å™¨æœ¬èº«çš„å‡è®¾ä¸æˆ‘ä»¬çš„åˆ†ææ–¹æ³•ä¸å®Œå…¨ç›¸å®¹çš„ä½“ç°ã€‚å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬ä¸ºäº†ä¼°è®¡æœ€ä¼˜å­¦ä¹ ç‡ï¼Œå°†Lossçš„å¢é‡å±•å¼€åˆ°äº†äºŒé˜¶è¿‘ä¼¼ï¼Œå¹¶å‡è®¾äº†HessiançŸ©é˜µçš„æ­£å®šæ€§ã€‚åœ¨è¿™äº›è®¾å®šä¹‹ä¸‹ï¼Œæœ€ä¼˜æ›´æ–°é‡åº”è¯¥æ˜¯ç‰›é¡¿æ³•ï¼Œå³$\boldsymbol{H}^{-1}\boldsymbol{g}$ã€‚</p>
<p>åœ¨ç‰›é¡¿æ³•è§†è§’ä¸‹ï¼Œä¸åŒä¼˜åŒ–å™¨å®é™…ä¸Šæ˜¯å¯¹HessiançŸ©é˜µçš„ä¸åŒå‡è®¾ï¼Œæ¯”å¦‚SGDå¯¹åº”äºå‡è®¾$\boldsymbol{H}=\eta_{\max}^{-1} \boldsymbol{I}$ï¼Œè€ŒSignSGDåˆ™å¯¹åº”äºå‡è®¾$\newcommand{diag}{\mathop{\text{diag}}}\boldsymbol{H}=\eta_{\max}^{-1} \diag(|\boldsymbol{g}|)$ï¼Œå½“ç„¶å®é™…è®­ç»ƒæˆ‘ä»¬åªèƒ½å°†$\boldsymbol{g}$æ›¿ä»£ä¸º$\tilde{\boldsymbol{g}}_B$ã€‚Surgeç°è±¡å®é™…ä½“ç°äº†$B\to\infty$æ—¶ï¼ŒSignSGDæ‰€å‡è®¾çš„HessiançŸ©é˜µä¸å®é™…HessiançŸ©é˜µçš„åç¦»ç¨‹åº¦åœ¨å˜å¤§ã€‚</p>
<p>æˆ‘ä»¬çŸ¥é“ï¼Œå¦‚ä»Šçš„LLMæ¨¡å‹å‚æ•°éƒ½æ˜¯ä»¥äº¿èµ·æ­¥çš„ï¼Œä¸ç®¡æ˜¯å®Œæ•´çš„HessiançŸ©é˜µè¿˜æ˜¯åæ–¹å·®çŸ©é˜µï¼Œå…¶è®¡ç®—éƒ½æ˜¯è¿‘ä¹ä¸å¯èƒ½çš„äº‹æƒ…ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬è®¡ç®—äºŒé˜¶çŸ©$\mathbb{E}[\tilde{\boldsymbol{\varphi}}_B\tilde{\boldsymbol{\varphi}}_B^{\top}]$æ—¶è¦å¼•å…¥ç‹¬ç«‹å‡è®¾çš„åŸå› ä¹‹ä¸€ï¼Œæ­¤æ—¶åæ–¹å·®çŸ©é˜µå°±åªæ˜¯ä¸€ä¸ªå¯¹è§’é˜µï¼Œä¼°ç®—æ‰æ˜¯å¯è¡Œçš„ã€‚HessiançŸ©é˜µä¹Ÿæ˜¯ç±»ä¼¼ï¼Œæˆ‘ä»¬å¾€å¾€åªèƒ½å¯¹ç‰¹å®šç»“æ„çš„HessiançŸ©é˜µè¿›è¡Œè®¡ç®—ã€‚</p>
<p>ä¾‹å¦‚ï¼Œä»£å…¥$\boldsymbol{H}=\eta_{\max}^{-1} \diag(|\boldsymbol{g}|)$åˆ°å¼$\eqref{eq:eta-opt-sign}$å¯å¾—$\eta^<em>\approx \eta_{\max} \beta = \eta_{\max} / \sqrt{1 + \mathcal{B}_{\text{simple}}/B}$ï¼Œè¿™ä¸ªå½¢å¼å°±å¾ˆç®€æ´äº†ï¼Œå¹¶ä¸”æ²¡æœ‰åå¸¸è¡Œä¸ºã€‚è¿™æ˜¯å¦æ„å‘³ç€Surgeç°è±¡ä¸ä¼šå‡ºç°äº†ï¼Ÿå¹¶ä¸æ˜¯ï¼ŒSurgeç°è±¡æ˜¯å®¢è§‚å­˜åœ¨çš„ï¼Œè¿™é‡Œæ›´å¤šçš„æ˜¯æƒ³è¯´ï¼šå½“æˆ‘ä»¬åœ¨å®éªŒä¸­è§‚å¯Ÿåˆ°Surgeç°è±¡æ—¶ï¼Œä¹Ÿè®¸é¦–è¦çš„äº‹æƒ…å¹¶ä¸æ˜¯ä¿®æ­£$\eta^</em>$çš„å˜åŒ–è§„å¾‹ï¼Œè€Œåº”è¯¥æ˜¯è¦æ›´æ¢ä¼˜åŒ–å™¨äº†ã€‚</p>
<h2 id="_5">æŸå¤±å˜åŒ–</h2>
<p>æœ‰äº†$\mathbb{E}[\tilde{\boldsymbol{\varphi}}<em _min="\min">B]$å’Œ$\mathbb{E}[\tilde{\boldsymbol{\varphi}}_B\tilde{\boldsymbol{\varphi}}_B^{\top}]$ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åƒä¸Šä¸€ç¯‡æ–‡ç« ä¸€æ ·è®¡ç®—$\overline{\Delta\mathcal{L}}$ï¼Œç‰¹åˆ«æœ‰æ„æ€çš„æ˜¯ï¼Œå®ƒè·ŸSGDçš„ç»“æœå…·æœ‰ç›¸åŒçš„æ ¼å¼<br />
\begin{equation}\overline{\Delta\mathcal{L}} = \mathcal{L}(\boldsymbol{w}) - \mathbb{E}[\mathcal{L}(\boldsymbol{w} - \eta^<em>\tilde{\boldsymbol{g}}<em _max="\max">B)] \approx \frac{(\mathbb{E}[\tilde{\boldsymbol{\varphi}}_B]^{\top}\boldsymbol{g})^2}{2\tr(\mathbb{E}[\tilde{\boldsymbol{\varphi}}_B\tilde{\boldsymbol{\varphi}}_B^{\top}]\boldsymbol{H})}\approx \frac{\Delta\mathcal{L}</em>}}{1 + \mathcal{B<em _max="\max">{\text{noise}}/B}\end{equation}<br />
å…¶ä¸­<br />
\begin{equation}\Delta\mathcal{L}</em>} = \frac{\frac{1}{2}(\sum_i |g_i|)^2}{\sum_i H_{i,i} + \sum_{i\neq j} H_{i,j}\sign(g_i g_j)},\quad \mathcal{B<em _text_simple="\text{simple">{\text{noise}} = \frac{\mathcal{B}</em>}}\sum_i H_{i,i}}{\sum_i H_{i,i} + \sum_{i\neq j} H_{i,j}\sign(g_i g_j)}\end{equation<br />
æ³¨æ„è¿™é‡Œæ˜¯ä¿ç•™äº†å®Œæ•´HessiançŸ©é˜µçš„ï¼Œæ‰€ä»¥ç»“æœå…¶å®é¢‡ä¸ºæœ‰è¶£â€”â€”å°½ç®¡å­¦ä¹ ç‡$\eta^</em>$å¯èƒ½ä¼šå‡ºç°Surgeç°è±¡ï¼Œä½†æŸå¤±å‡½æ•°çš„å¹³å‡å¢é‡å¹¶æ²¡æœ‰è¿™ä¸ªç°è±¡ï¼Œå®ƒå…³äº$B$å§‹ç»ˆæ˜¯å•è°ƒé€’å¢çš„ï¼Œå¹¶ä¸”è¿˜ä¿æŒè·ŸSGDç›¸åŒçš„å½¢å¼ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥æ¨å¯¼å‡ºç›¸åŒçš„â€œè®­ç»ƒæ•°æ®é‡-è®­ç»ƒæ­¥æ•°â€å…³ç³»ï¼š<br />
\begin{equation}\left(\frac{S}{S</em>}} - 1\right)\left(\frac{E}{E_{\min}} - 1\right) = 1\end{equation<br />
ä¸€ä¸ªæ›´å€¼å¾—æ€è€ƒçš„é—®é¢˜æ˜¯ï¼Œä¸ºä»€ä¹ˆSGDå’ŒSignSGDçš„æ›´æ–°é‡æˆªç„¶ä¸åŒï¼ŒåŒ…æ‹¬å­¦ä¹ ç‡$\eta^*$çš„è¡¨ç°ä¹Ÿæœ‰æ˜æ˜¾å·®å¼‚ï¼Œä½†$\overline{\Delta\mathcal{L}}$å…³äº$B$çš„å…³ç³»å´æœ‰ç€ç›¸åŒçš„å½¢å¼ã€‚è¿™å•çº¯å°±åªæ˜¯å·§åˆï¼Œè¿˜æ˜¯æœ‰æ›´æ·±åˆ»çš„åŸç†åœ¨èƒŒåæ”¯æ’‘ï¼Ÿ</p>
<h2 id="_6">ä¸€èˆ¬è§„å¾‹</h2>
<p>ä¾æ—§æ˜¯ä»å¹³å‡åœºè¿‘ä¼¼å‡ºå‘ï¼Œç¬”è€…å¾—åˆ°äº†ä¸€ä¸ªå€¾å‘äºåè€…çš„ç­”æ¡ˆã€‚ä¸ç®¡æ˜¯$\eta^*$è¿˜æ˜¯$\overline{\Delta\mathcal{L}}$ï¼Œæ ¸å¿ƒéš¾åº¦éƒ½æ˜¯è®¡ç®—$\mathbb{E}[\tilde{\boldsymbol{\varphi}}_B]$å’Œ$\mathbb{E}[\tilde{\boldsymbol{\varphi}}_B\tilde{\boldsymbol{\varphi}}_B^{\top}]$ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„ç›®æ ‡æ˜¯æ¢å¯»ä¸¤è€…çš„ç»Ÿä¸€è®¡ç®—è§„å¾‹ã€‚</p>
<p>æˆ‘ä»¬ä¸€èˆ¬åœ°è®¾$\tilde{\boldsymbol{\varphi}}<em _text_è®°ä¸º="\text{è®°ä¸º">B=\tilde{\boldsymbol{H}}{}_B^{-1}\tilde{\boldsymbol{g}}_B$ï¼Œ$\tilde{\boldsymbol{H}}_B$æ˜¯æŸä¸ªåŠæ­£å®šçŸ©é˜µï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å†™å‡º<br />
\begin{equation}\mathbb{E}[\tilde{\boldsymbol{\varphi}}_B] = \mathbb{E}[\tilde{\boldsymbol{H}}{}_B^{-1}\tilde{\boldsymbol{g}}_B]\approx \underbrace{\mathbb{E}[\tilde{\boldsymbol{H}}_B]^{-1}}</em>}\hat{\boldsymbol{H}}{}^{-1}}\mathbb{E}[\tilde{\boldsymbol{g}<em _max="\max">B] = \hat{\boldsymbol{H}}{}^{-1}\boldsymbol{g}\end{equation}<br />
ä»¥åŠ<br />
\begin{equation}\mathbb{E}[\tilde{\boldsymbol{\varphi}}_B\tilde{\boldsymbol{\varphi}}_B^{\top}] = \mathbb{E}[\tilde{\boldsymbol{H}}{}_B^{-1}\tilde{\boldsymbol{g}}_B\tilde{\boldsymbol{g}}_B^{\top}\tilde{\boldsymbol{H}}{}_B^{-1}]\approx \mathbb{E}[\tilde{\boldsymbol{H}}_B]^{-1}\mathbb{E}[\tilde{\boldsymbol{g}}_B\tilde{\boldsymbol{g}}_B^{\top}]\mathbb{E}[\tilde{\boldsymbol{H}}_B]^{-1} = \hat{\boldsymbol{H}}{}^{-1}(\boldsymbol{g}\boldsymbol{g}^{\top} + \boldsymbol{\Sigma}/B)\hat{\boldsymbol{H}}{}^{-1}<br />
\end{equation}<br />
ä»£å…¥$\overline{\Delta\mathcal{L}}$çš„è¡¨è¾¾å¼ï¼Œæˆ‘ä»¬å¾—åˆ°<br />
\begin{equation}\overline{\Delta\mathcal{L}} \approx \frac{1}{2}\frac{(\boldsymbol{g}^{\top}\hat{\boldsymbol{H}}{}^{-1}\boldsymbol{g})^2}{\boldsymbol{g}^{\top}\hat{\boldsymbol{H}}{}^{-1}\boldsymbol{H}\hat{\boldsymbol{H}}{}^{-1}\boldsymbol{g} + \tr(\boldsymbol{\Sigma}\hat{\boldsymbol{H}}{}^{-1}\boldsymbol{H}\hat{\boldsymbol{H}}{}^{-1})/B}\end{equation}<br />
æ³¨æ„ä¸Šå¼å…³äº$\hat{\boldsymbol{H}}$æ˜¯é½æ¬¡çš„ï¼Œå¦‚æœæˆ‘ä»¬å‡è®¾$\hat{\boldsymbol{H}}$ä¸$B$çš„å…³ç³»å¯ä»¥å•ç‹¬åˆ†ç†å‡ºä¸€ä¸ªæ ‡é‡å½¢å¼å¦‚$\hat{\boldsymbol{H}}\approx f(B) \boldsymbol{G}$ï¼Œå…¶ä¸­$f(B)$æ˜¯$B$çš„æ ‡é‡å‡½æ•°ï¼Œ$\boldsymbol{G}$è·Ÿ$B$ä¸æ˜æ˜¾ç›¸å…³ï¼Œé‚£ä¹ˆåˆ†å­åˆ†æ¯æ˜¯å¯ä»¥åŒæ—¶æŠŠ$f(B)$çº¦æ‰çš„ï¼Œæœ€ç»ˆå…³äº$B$çš„å…³ç³»ï¼Œå¯ä»¥æ•´ç†æˆå¦‚ä¸‹å½¢å¼<br />
\begin{equation}\overline{\Delta\mathcal{L}} \approx \frac{\Delta\mathcal{L}</em>}}{1 + \mathcal{B}_{\text{noise}}/B}\end{equation<br />
è¿™å°±è¯æ˜äº†$\overline{\Delta\mathcal{L}}$å…³äº$B$å…·æœ‰ç›¸åŒçš„æ¸è¿‘è§„å¾‹ï¼Œå…¶æ ¸å¿ƒæ˜¯å…³äº$\hat{\boldsymbol{H}}$çš„é½æ¬¡æ€§ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œ$\eta^*$å°±æ²¡æœ‰è¿™ä¹ˆç»Ÿä¸€çš„ç»“æœï¼Œå› ä¸ºå®ƒå…³äº$\hat{\boldsymbol{H}}$å¹¶ä¸æ˜¯é½æ¬¡çš„ã€‚</p>
<h2 id="_7">æœ‰æ•ˆåˆ†æ</h2>
<p>çœ‹åˆ°è¿™é‡Œï¼Œæƒ³å¿…å¤§å®¶éƒ½å·²ç»å¯¹å¹³å‡åœºæ–¹æ³•æœ‰æ‰€äº†è§£ï¼Œå®ƒçš„ä¸»è¦ç‰¹ç‚¹å°±æ˜¯è®¡ç®—ç®€å•ï¼Œæˆ–è€…æ›´æœ¬è´¨ä¸Šè¯´ï¼Œå¹³å‡åœºå°±æ˜¯æŒ‘ç®€å•çš„ã€èƒ½è®¡ç®—çš„æ–¹å‘å»è®¡ç®—ï¼Œè¿™å°±å¯¼è‡´äº†å®ƒæå¤§çš„çµæ´»æ€§ã€‚çµæ´»æ€§åœ¨å¾ˆå¤šæ—¶å€™ä¹Ÿæ˜¯ä¸€ç§ç¼ºç‚¹ï¼Œå®ƒæ„å‘³ç€æˆ‘ä»¬å¾ˆéš¾æŒæ¡ä¸‹ä¸€æ­¥çš„è§„å¾‹ã€‚</p>
<p>è‡³äºè¦è§£é‡Šä¸ºä»€ä¹ˆè¿™æ ·åšæ˜¯æœ‰æ•ˆçš„ï¼Œé‚£å°±æ›´éš¾äº†ï¼Œåªèƒ½å…·ä½“é—®é¢˜å…·ä½“åˆ†æï¼Œç”šè‡³æœ‰å¯èƒ½å…·ä½“é—®é¢˜ä¹Ÿå¾ˆéš¾åˆ†æä¸‹å»ã€‚ç¬”è€…çš„æ„Ÿè§‰ï¼Œå¹³å‡åœºæ–¹æ³•æ˜¯<strong>ä¸‰åˆ†è®¡ç®—</strong> ã€<strong>ä¸‰åˆ†å¹¸è¿</strong> ã€<strong>ä¸‰åˆ†ç›´è§‰</strong> ï¼Œå†åŠ ä¸Š<strong>ä¸€åˆ†çš„ç„å­¦</strong> ã€‚å½“ç„¶ï¼Œå°è¯•ä¸€ä¸‹æ˜¯æ²¡é—®é¢˜çš„ï¼Œæˆ‘ä»¬å°±ä»¥å‰é¢SignSGDçš„è®¡ç®—ä¸ºä¾‹ï¼Œå°è¯•åšä¸€ä¸‹åˆ†æã€‚</p>
<p>å¾ˆæ˜æ˜¾ï¼ŒSignSGDæœ€æ ¸å¿ƒçš„è®¡ç®—æ˜¯$\mathbb{E}[\sign(x)]$ï¼Œæˆ‘ä»¬è®°$\mathbb{E}[x]=\mu,\mathbb{E}[x^2]=\mu^2 + \sigma^2$ï¼Œç„¶åå†™å‡º<br />
\begin{equation}\sign(x) = \frac{x}{\sqrt{x^2}} = \frac{x}{\sqrt{\mu^2 + \sigma^2 + (x^2 - \mu^2 - \sigma^2)}}\end{equation}<br />
å‡è®¾$x^2 - \mu^2 - \sigma^2$æ˜¯å°é‡ï¼Œæˆ‘ä»¬åšæ³°å‹’å±•å¼€<br />
\begin{equation}\sign(x) = \frac{x}{\sqrt{\mu^2 + \sigma^2}} - \frac{1}{2}\frac{x(x^2 - \mu^2 - \sigma^2)}{ï¼ˆ\mu^2 + \sigma^2)^{3/2}} + \frac{3}{8}\frac{x(x^2 - \mu^2 - \sigma^2)^2}{ï¼ˆ\mu^2 + \sigma^2)^{5/2}}-\cdots \end{equation}<br />
ç°åœ¨åˆ†æ¯éƒ½è·Ÿ$x$æ— å…³çš„ï¼Œåˆ†å­æ˜¯å…³äº$x$çš„å¤šé¡¹å¼ï¼Œæ‰€ä»¥ä¸¤è¾¹æ±‚æœŸæœ›ï¼Œç¬¬ä¸€é¡¹ä¾¿æ˜¯å¹³å‡åœºè¿‘ä¼¼çš„ç»“æœ$\mu/\sqrt{\mu^2 + \sigma^2}$ã€‚ä¸ºäº†è§‚å¯Ÿå¹³å‡åœºè¿‘ä¼¼çš„åˆç†æ€§ï¼Œæˆ‘ä»¬è®¡ç®—ç¬¬äºŒé¡¹<br />
\begin{equation}\frac{1}{2}\frac{\mathbb{E}[x(x^2 - \mu^2 - \sigma^2)]}{ï¼ˆ\mu^2 + \sigma^2)^{3/2}} = \frac{1}{2}\frac{\mathbb{E}[x^3] - (\mu^3 + \mu\sigma^2)}{ï¼ˆ\mu^2 + \sigma^2)^{3/2}} \end{equation}<br />
è¿™æ¶‰åŠåˆ°äº†$\mathbb{E}[x^3]$ï¼Œè¿™æ˜¯ä¸€ä¸ªæ–°çš„ç»Ÿè®¡é‡ï¼Œå®ƒæ˜¯å¹³å‡åœºè¯¯å·®çš„å…³é”®å› ç´ ã€‚æˆ‘ä»¬å¯ä»¥æ‹¿æ­£æ€åˆ†å¸ƒ$\mathcal{N}(x;\mu,\sigma^2)$æ¥æ„ŸçŸ¥ä¸€ä¸‹ï¼Œæ­¤æ—¶$\mathbb{E}[x^3]=\mu^3 + 3\mu\sigma^2$ï¼Œä»£å…¥ä¸Šå¼çš„<br />
\begin{equation}\frac{\mu\sigma^2}{ï¼ˆ\mu^2 + \sigma^2)^{3/2}} = \frac{\sigma^2/\mu^2}{ï¼ˆ1 + \sigma^2/\mu^2)^{3/2}}\end{equation}<br />
å³ç«¯æ˜¯ä¸€ä¸ªæœ‰ç•Œçš„å¼å­ï¼Œæœ€å¤§å€¼åœ¨$\sigma^2/\mu^2=2$å–åˆ°ï¼Œç»“æœæ˜¯$2/3^{3/2}=0.3849\cdots$ã€‚è¿™è¡¨æ˜å¹³å‡åœºè¿‘ä¼¼çš„è¯¯å·®æå¯èƒ½æ˜¯æœ‰é™çš„ï¼Œå¹¶ä¸”è¯¯å·®é¡¹éšç€$\sigma\to 0$å’Œ$\sigma\to\infty$éƒ½è¶‹äº0ï¼Œè¿™äº›éƒ½ä¸€å®šç¨‹åº¦ä¸Šä½“ç°äº†å¹³å‡åœºè¿‘ä¼¼çš„å¯ç”¨æ€§ã€‚</p>
<h2 id="_8">å¹¿ä¹‰è¿‘ä¼¼</h2>
<p>ä¹‹æ‰€ä»¥é€‰æ‹©åˆ†æSignSGDï¼ŒåŸå› ä¹‹ä¸€æ˜¯æˆ‘ä»¬é€šå¸¸ç”¨å®ƒä½œä¸ºAdamçš„ç†è®ºè¿‘ä¼¼ã€‚åœ¨<a href="/archives/10563">ã€ŠAdamçš„epsilonå¦‚ä½•å½±å“å­¦ä¹ ç‡çš„Scaling Lawï¼Ÿã€‹</a>ä¸­ï¼Œæˆ‘ä»¬è®¡ç®—è¿‡ä¸€ä¸ªç†è®ºä¸Šæ›´å¥½çš„è¿‘ä¼¼SoftSignSGDï¼Œå®ƒè€ƒè™‘äº†$\epsilon$çš„å½±å“ã€‚<br />
\begin{equation}\sign(x)=\frac{x}{\sqrt{x^2}}\quad\to\quad\newcommand{softsign}{\mathop{\text{softsign}}}\softsign(x)=\frac{x}{\sqrt{x^2+\epsilon^2}}\end{equation}<br />
æ­¤æ—¶$\tilde{\boldsymbol{\varphi}}<em _text_simple="\text{simple">B = \softsign(\tilde{\boldsymbol{g}}_B)$ã€‚è®©æˆ‘ä»¬ç›´æ¥è¿›å…¥ä¸»é¢˜<br />
\begin{equation}\begin{aligned}<br />
&amp;\,\mathbb{E}[\tilde{\boldsymbol{\varphi}}_B]_i = \mathbb{E}[\softsign((\tilde{g}_B)_i)] = \mathbb{E}\bigg[\frac{(\tilde{g}_B)_i}{\sqrt{(\tilde{g}_B)_i^2 + \epsilon^2}}\bigg]\approx \frac{\mathbb{E}[(\tilde{g}_B)_i]}{\sqrt{\mathbb{E}[(\tilde{g}_B)_i^2]+ \epsilon^2}} \\\[8pt]<br />
=&amp;\, \frac{g_i}{\sqrt{g_i^2 + \sigma_i^2/B + \epsilon^2}} = \frac{\softsign(g_i)}{\sqrt{1 + \sigma_i^2/(g_i^2 + \epsilon^2)/B}}\approx \frac{\softsign(g_i)}{\sqrt{1 + \mathcal{B}</em>\triangleq \nu_i\beta}}/B}<br />
\end{aligned}\end{equation}<br />
è¿™é‡Œçš„$\mathcal{B}<em _text_simple="\text{simple">{\text{simple}}$æœ‰å°‘è®¸ä¸åŒï¼Œå®ƒæ˜¯$\tr(\boldsymbol{\Sigma})/(\boldsymbol{g}^{\top}\boldsymbol{g} + N\epsilon^2)$ï¼Œå…¶ä¸­$N$æ˜¯æ¨¡å‹æ€»å‚æ•°é‡ï¼Œå³$\boldsymbol{g}\in\mathbb{R}^N$ï¼›è‡³äºæœ€åçš„$\nu_i=\softsign(g_i), \beta = (1 + \mathcal{B}</em>}}/B)^{-1/2}$ã€‚æ¥ç€è®¡ç®—$\mathbb{E}[\tilde{\boldsymbol{\varphi}<em i_j="i,j">B\tilde{\boldsymbol{\varphi}}_B^{\top}]$ï¼Œåœ¨ç‹¬ç«‹å‡è®¾ä¸‹å½“$i\neq j$æ—¶ä¾æ—§å¯ä»¥åˆ†åˆ«æ±‚å‡å€¼ï¼Œå› æ­¤æœ‰$\mathbb{E}[\tilde{\boldsymbol{\varphi}}_B\tilde{\boldsymbol{\varphi}}_B^{\top}]</em>=\nu_i \nu_j \beta^2$ï¼Œæ‰€ä»¥åªéœ€è¦è®¡ç®—$i=j$çš„æƒ…å½¢ï¼š<br />
\begin{equation}\begin{aligned}<br />
&amp;\,\mathbb{E}[\tilde{\boldsymbol{\varphi}}<em i_i="i,i">B\tilde{\boldsymbol{\varphi}}_B^{\top}]</em>} = \mathbb{E}[\softsign((\tilde{g<em _text_simple="\text{simple">B)_i)^2] = \mathbb{E}\bigg[\frac{(\tilde{g}_B)_i^2}{(\tilde{g}_B)_i^2 + \epsilon^2}\bigg]\approx \frac{\mathbb{E}[(\tilde{g}_B)_i^2]}{\mathbb{E}[(\tilde{g}_B)_i^2]+ \epsilon^2} \\\[8pt]<br />
=&amp;\, \frac{g_i^2 + \sigma_i^2/B}{g_i^2 + \sigma_i^2/B + \epsilon^2} = 1 - \frac{1 - \softsign(g)^2}{1 + \sigma_i^2/(g_i^2 + \epsilon^2)/B}\approx 1 - \frac{1 - \softsign(g)^2}{1 + \mathcal{B}</em>}}/B<br />
\end{aligned}\end{equation}<br />
è¿™å¯ä»¥ç»Ÿä¸€åœ°å†™æˆ$\mathbb{E}[\tilde{\boldsymbol{\varphi}}<em i_j="i,j">B\tilde{\boldsymbol{\varphi}}_B^{\top}]</em>(1-\beta^2)$ï¼Œäºæ˜¯}\approx \nu_i \nu_j\beta^2 + \delta_{i,j<br />
\begin{equation}\eta^<em> \approx \frac{\mathbb{E}[\tilde{\boldsymbol{\varphi}}<em i_i="i,i">B]^{\top}\boldsymbol{g}}{\text{Tr}(\mathbb{E}[\tilde{\boldsymbol{\varphi}}_B\tilde{\boldsymbol{\varphi}}_B^{\top}]\boldsymbol{H})} \approx \frac{\beta\sum_i \nu_i g_i}{\sum_i H</em>} + \beta^2(\sum_{i,j} \nu_i \nu_j H_{i,j} - \sum_i H_{i,i})}\end{equation<br />
ä¸Šå¼é™¤äº†$\beta$å¤–ï¼Œå…¶ä½™éƒ¨ä»½éƒ½è·Ÿ$B$æ— å…³ï¼Œå› æ­¤æˆ‘ä»¬å·²ç»å¾—åˆ°$\eta^</em>$å…³äº$B$çš„æ˜¾å¼å…³ç³»ï¼Œå½¢å¼è·ŸSignSGDçš„å¤§åŒå°å¼‚ã€‚å‰©ä¸‹çš„åˆ†æï¼Œå¯ä»¥å‚è€ƒ<a href="/archives/10563">ã€ŠAdamçš„epsilonå¦‚ä½•å½±å“å­¦ä¹ ç‡çš„Scaling Lawï¼Ÿã€‹</a>æˆ–è€…æ¨¡ä»¿å‰é¢çš„å†…å®¹è¿›è¡Œã€‚</p>
<h2 id="_9">æ–‡ç« å°ç»“</h2>
<p>è¿™ç¯‡æ–‡ç« æˆ‘ä»¬ä½¿ç”¨äº†å¹³å‡åœºè¿‘ä¼¼é‡æ–°è®¡ç®—äº†SignSGDå’ŒSoftSignSGDçš„ç»“è®ºï¼Œå¤§å¤§ç®€åŒ–äº†ç›¸å…³è®¡ç®—è¿‡ç¨‹ï¼Œå¹¶åˆæ­¥æ€è€ƒäº†è¿™äº›è®¡ç®—çš„ä¸€èˆ¬è§„å¾‹ã€‚</p>
<p><em><strong>è½¬è½½åˆ°è¯·åŒ…æ‹¬æœ¬æ–‡åœ°å€ï¼š</strong><a href="https://spaces.ac.cn/archives/11280">https://spaces.ac.cn/archives/11280</a></em></p>
<p><em><strong>æ›´è¯¦ç»†çš„è½¬è½½äº‹å®œè¯·å‚è€ƒï¼š</strong></em><a href="https://spaces.ac.cn/archives/6508#%E6%96%87%E7%AB%A0%E5%A6%82%E4%BD%95%E8%BD%AC%E8%BD%BD/%E5%BC%95%E7%94%A8" title="ã€Šç§‘å­¦ç©ºé—´FAQã€‹">ã€Šç§‘å­¦ç©ºé—´FAQã€‹</a></p>
<p><strong>å¦‚æœæ‚¨è¿˜æœ‰ä»€ä¹ˆç–‘æƒ‘æˆ–å»ºè®®ï¼Œæ¬¢è¿åœ¨ä¸‹æ–¹è¯„è®ºåŒºç»§ç»­è®¨è®ºã€‚</strong></p>
<p><strong>å¦‚æœæ‚¨è§‰å¾—æœ¬æ–‡è¿˜ä¸é”™ï¼Œæ¬¢è¿åˆ†äº«/æ‰“èµæœ¬æ–‡ã€‚æ‰“èµå¹¶éè¦ä»ä¸­è·å¾—æ”¶ç›Šï¼Œè€Œæ˜¯å¸Œæœ›çŸ¥é“ç§‘å­¦ç©ºé—´è·å¾—äº†å¤šå°‘è¯»è€…çš„çœŸå¿ƒå…³æ³¨ã€‚å½“ç„¶ï¼Œå¦‚æœä½ æ— è§†å®ƒï¼Œä¹Ÿä¸ä¼šå½±å“ä½ çš„é˜…è¯»ã€‚å†æ¬¡è¡¨ç¤ºæ¬¢è¿å’Œæ„Ÿè°¢ï¼</strong></p>
<p>æ‰“èµ</p>
<p><img alt="ç§‘å­¦ç©ºé—´" src="https://spaces.ac.cn/usr/themes/geekg/payment/wx.png" /></p>
<p>å¾®ä¿¡æ‰“èµ</p>
<p><img alt="ç§‘å­¦ç©ºé—´" src="https://spaces.ac.cn/usr/themes/geekg/payment/zfb.png" /></p>
<p>æ”¯ä»˜å®æ‰“èµ</p>
<p>å› ä¸ºç½‘ç«™åå°å¯¹æ‰“èµå¹¶æ— è®°å½•ï¼Œå› æ­¤æ¬¢è¿åœ¨æ‰“èµæ—¶å€™å¤‡æ³¨ç•™è¨€ã€‚ä½ è¿˜å¯ä»¥<a href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&amp;email=tN7d1drY3drrx8H0xcWa19vZ"><strong>ç‚¹å‡»è¿™é‡Œ</strong></a>æˆ–åœ¨ä¸‹æ–¹è¯„è®ºåŒºç•™è¨€æ¥å‘ŠçŸ¥ä½ çš„å»ºè®®æˆ–éœ€æ±‚ã€‚</p>
<p><strong>å¦‚æœæ‚¨éœ€è¦å¼•ç”¨æœ¬æ–‡ï¼Œè¯·å‚è€ƒï¼š</strong></p>
<p>è‹å‰‘æ—. (Sep. 10, 2025). ã€Šé‡æ–°æ€è€ƒå­¦ä¹ ç‡ä¸Batch Sizeï¼ˆäºŒï¼‰ï¼šå¹³å‡åœº ã€‹[Blog post]. Retrieved from <a href="https://spaces.ac.cn/archives/11280">https://spaces.ac.cn/archives/11280</a></p>
<p>@online{kexuefm-11280,<br />
title={é‡æ–°æ€è€ƒå­¦ä¹ ç‡ä¸Batch Sizeï¼ˆäºŒï¼‰ï¼šå¹³å‡åœº},<br />
author={è‹å‰‘æ—},<br />
year={2025},<br />
month={Sep},<br />
url={\url{https://spaces.ac.cn/archives/11280}},<br />
} </p>
<hr />
<h2 id="_10">å…¬å¼æ¨å¯¼ä¸æ³¨é‡Š</h2>
<p>æœ¬èŠ‚å°†å¯¹æ–‡ç« ä¸­çš„æ ¸å¿ƒç†è®ºæä¾›æè¯¦ç»†çš„æ•°å­¦æ¨å¯¼ï¼Œä»å¹³å‡åœºç†è®ºçš„åŸºæœ¬åŸç†å‡ºå‘ï¼Œç³»ç»Ÿåœ°å»ºç«‹å­¦ä¹ ç‡ä¸Batch Sizeå…³ç³»çš„ç†è®ºæ¡†æ¶ã€‚</p>
<h3 id="1">1. å¹³å‡åœºç†è®ºçš„åŸºæœ¬æ¡†æ¶</h3>
<p>å¹³å‡åœºç†è®ºï¼ˆMean Field Theoryï¼‰èµ·æºäºç»Ÿè®¡ç‰©ç†ï¼Œå…¶æ ¸å¿ƒæ€æƒ³æ˜¯å°†å¤šä½“ç³»ç»Ÿä¸­ç²’å­ä¹‹é—´çš„ç›¸äº’ä½œç”¨ç”¨ä¸€ä¸ª"å¹³å‡åœº"æ¥è¿‘ä¼¼ã€‚åœ¨ä¼˜åŒ–ç†è®ºä¸­ï¼Œæˆ‘ä»¬å°†è¿™ä¸ªæ€æƒ³åº”ç”¨äºå¤„ç†éšæœºæ¢¯åº¦çš„æœŸæœ›è®¡ç®—ã€‚</p>
<p><strong>å®šä¹‰1.1ï¼ˆå¹³å‡åœºè¿‘ä¼¼ï¼‰</strong>ï¼šå¯¹äºéšæœºå˜é‡$X$å’Œéçº¿æ€§å‡½æ•°$f$ï¼Œå¹³å‡åœºè¿‘ä¼¼å‡è®¾
$$\mathbb{E}[f(X)] \approx f(\mathbb{E}[X])$$</p>
<p>è¿™ä¸ªè¿‘ä¼¼åœ¨$f$è¿‘ä¼¼çº¿æ€§æˆ–$X$æ–¹å·®è¾ƒå°æ—¶è¾ƒä¸ºç²¾ç¡®ã€‚æ›´ä¸€èˆ¬åœ°ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Jensenä¸ç­‰å¼æ¥ç•Œå®šè¯¯å·®ã€‚</p>
<p><strong>å®šç†1.1ï¼ˆJensenä¸ç­‰å¼è§†è§’ï¼‰</strong>ï¼šè‹¥$f$æ˜¯å‡¸å‡½æ•°ï¼Œåˆ™
$$f(\mathbb{E}[X]) \leq \mathbb{E}[f(X)]$$</p>
<p>è¯¯å·®é¡¹ä¸º
$$\Delta = \mathbb{E}[f(X)] - f(\mathbb{E}[X])$$</p>
<p>é€šè¿‡æ³°å‹’å±•å¼€ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°ï¼š
$$f(X) = f(\mathbb{E}[X]) + f'(\mathbb{E}[X])(X - \mathbb{E}[X]) + \frac{1}{2}f''(\mathbb{E}[X])(X - \mathbb{E}[X])^2 + O((X-\mathbb{E}[X])^3)$$</p>
<p>ä¸¤è¾¹å–æœŸæœ›ï¼š
$$\mathbb{E}[f(X)] = f(\mathbb{E}[X]) + \frac{1}{2}f''(\mathbb{E}[X])\text{Var}(X) + O(\mathbb{E}[(X-\mathbb{E}[X])^3])$$</p>
<p>è¿™è¡¨æ˜è¯¯å·®ä¸»è¦ç”±$f$çš„äºŒé˜¶å¯¼æ•°å’Œ$X$çš„æ–¹å·®å†³å®šã€‚</p>
<p><strong>æ¨å¹¿åˆ°å‘é‡æƒ…å½¢</strong>ï¼šå¯¹äºå‘é‡å€¼å‡½æ•°$\boldsymbol{f}(\boldsymbol{X})$ï¼Œå¹³å‡åœºè¿‘ä¼¼å˜ä¸º
$$\mathbb{E}[\boldsymbol{f}(\boldsymbol{X})] \approx \boldsymbol{f}(\mathbb{E}[\boldsymbol{X}])$$</p>
<p>å½“$\boldsymbol{f}$æ˜¯element-wiseæ“ä½œæ—¶ï¼ˆå¦‚$\sign$å‡½æ•°ï¼‰ï¼Œå¯ä»¥åˆ†é‡ç‹¬ç«‹åœ°åº”ç”¨å¹³å‡åœºè¿‘ä¼¼ã€‚</p>
<h3 id="2">2. ç¥ç»ç½‘ç»œä¼˜åŒ–ä¸­çš„å¹³å‡åœºæé™</h3>
<p>è€ƒè™‘ç¥ç»ç½‘ç»œçš„æŸå¤±å‡½æ•°$\mathcal{L}(\boldsymbol{w})$åœ¨å‚æ•°$\boldsymbol{w}$å¤„çš„äºŒé˜¶æ³°å‹’å±•å¼€ï¼š
$$\mathcal{L}(\boldsymbol{w} - \eta\boldsymbol{\varphi}) \approx \mathcal{L}(\boldsymbol{w}) - \eta\boldsymbol{g}^{\top}\boldsymbol{\varphi} + \frac{\eta^2}{2}\boldsymbol{\varphi}^{\top}\boldsymbol{H}\boldsymbol{\varphi}$$</p>
<p>å…¶ä¸­ï¼š
- $\boldsymbol{g} = \nabla_{\boldsymbol{w}}\mathcal{L}(\boldsymbol{w})$æ˜¯æ¢¯åº¦å‘é‡
- $\boldsymbol{H} = \nabla^2_{\boldsymbol{w}}\mathcal{L}(\boldsymbol{w})$æ˜¯HessiançŸ©é˜µ
- $\boldsymbol{\varphi}$æ˜¯æ›´æ–°æ–¹å‘</p>
<p>å¯¹äºéšæœºä¼˜åŒ–å™¨ï¼Œæ›´æ–°æ–¹å‘$\tilde{\boldsymbol{\varphi}}_B$ä¾èµ–äºå°æ‰¹é‡æ¢¯åº¦$\tilde{\boldsymbol{g}}_B$ï¼Œæˆ‘ä»¬éœ€è¦è®¡ç®—æœŸæœ›æŸå¤±å˜åŒ–ï¼š
$$\overline{\Delta\mathcal{L}} = \mathcal{L}(\boldsymbol{w}) - \mathbb{E}_B[\mathcal{L}(\boldsymbol{w} - \eta\tilde{\boldsymbol{\varphi}}_B)]$$</p>
<p>å±•å¼€å¹¶å–æœŸæœ›ï¼š
$$\overline{\Delta\mathcal{L}} \approx \eta\mathbb{E}[\boldsymbol{g}^{\top}\tilde{\boldsymbol{\varphi}}_B] - \frac{\eta^2}{2}\mathbb{E}[\tilde{\boldsymbol{\varphi}}_B^{\top}\boldsymbol{H}\tilde{\boldsymbol{\varphi}}_B]$$</p>
<p>åˆ©ç”¨$\mathbb{E}[\tilde{\boldsymbol{g}}_B] = \boldsymbol{g}$ï¼ˆæ— åæ€§ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥åˆ†æã€‚</p>
<p><strong>å®šç†2.1ï¼ˆæœ€ä¼˜å­¦ä¹ ç‡ï¼‰</strong>ï¼šå¯¹äºå›ºå®šçš„æ›´æ–°æ–¹å‘åˆ†å¸ƒï¼Œæœ€ä¼˜å­¦ä¹ ç‡$\eta^*$æ»¡è¶³ï¼š
$$\frac{\partial}{\partial\eta}\overline{\Delta\mathcal{L}}\bigg|_{\eta=\eta^*} = 0$$</p>
<p>æ±‚è§£å¾—ï¼š
$$\eta^* = \frac{\mathbb{E}[\boldsymbol{g}^{\top}\tilde{\boldsymbol{\varphi}}_B]}{\mathbb{E}[\tilde{\boldsymbol{\varphi}}_B^{\top}\boldsymbol{H}\tilde{\boldsymbol{\varphi}}_B]}$$</p>
<p>åˆ©ç”¨è¿¹çš„æ€§è´¨$\boldsymbol{a}^{\top}\boldsymbol{B}\boldsymbol{a} = \text{tr}(\boldsymbol{a}\boldsymbol{a}^{\top}\boldsymbol{B})$ï¼Œåˆ†æ¯å¯ä»¥å†™æˆï¼š
$$\mathbb{E}[\tilde{\boldsymbol{\varphi}}_B^{\top}\boldsymbol{H}\tilde{\boldsymbol{\varphi}}_B] = \mathbb{E}[\text{tr}(\tilde{\boldsymbol{\varphi}}_B\tilde{\boldsymbol{\varphi}}_B^{\top}\boldsymbol{H})] = \text{tr}(\mathbb{E}[\tilde{\boldsymbol{\varphi}}_B\tilde{\boldsymbol{\varphi}}_B^{\top}]\boldsymbol{H})$$</p>
<p>å› æ­¤ï¼š
$$\eta^* = \frac{\mathbb{E}[\tilde{\boldsymbol{\varphi}}_B]^{\top}\boldsymbol{g}}{\text{tr}(\mathbb{E}[\tilde{\boldsymbol{\varphi}}_B\tilde{\boldsymbol{\varphi}}_B^{\top}]\boldsymbol{H})}$$</p>
<p>è¿™æ­£æ˜¯æ–‡ä¸­å¼$\eqref{eq:eta-opt}$ã€‚</p>
<h3 id="3">3. æ¢¯åº¦å™ªå£°çš„ç»Ÿè®¡æ€§è´¨</h3>
<p><strong>å‡è®¾3.1ï¼ˆæ¢¯åº¦å™ªå£°æ¨¡å‹ï¼‰</strong>ï¼šå°æ‰¹é‡æ¢¯åº¦$\tilde{\boldsymbol{g}}_B$æ»¡è¶³ï¼š
$$\mathbb{E}[\tilde{\boldsymbol{g}}_B] = \boldsymbol{g}, \quad \text{Cov}[\tilde{\boldsymbol{g}}_B] = \frac{\boldsymbol{\Sigma}}{B}$$</p>
<p>å…¶ä¸­$\boldsymbol{\Sigma}$æ˜¯å…¨æ‰¹é‡æ¢¯åº¦çš„åæ–¹å·®çŸ©é˜µï¼Œ$B$æ˜¯batch sizeã€‚</p>
<p><strong>æ¨å¯¼</strong>ï¼šè®¾æ•°æ®é›†æœ‰$N$ä¸ªæ ·æœ¬ï¼Œæ¯ä¸ªæ ·æœ¬$i$çš„æ¢¯åº¦ä¸º$\boldsymbol{g}_i$ï¼Œåˆ™ï¼š
$$\boldsymbol{g} = \frac{1}{N}\sum_{i=1}^N \boldsymbol{g}_i$$</p>
<p>å°æ‰¹é‡æ¢¯åº¦ï¼ˆå¤§å°ä¸º$B$ï¼‰ä¸ºï¼š
$$\tilde{\boldsymbol{g}}_B = \frac{1}{B}\sum_{i\in\mathcal{B}} \boldsymbol{g}_i$$</p>
<p>å…¶ä¸­$\mathcal{B}$æ˜¯éšæœºé€‰å–çš„å¤§å°ä¸º$B$çš„å­é›†ã€‚</p>
<p>è®¡ç®—æ–¹å·®ï¼ˆå‡è®¾æ— æ”¾å›æŠ½æ ·ï¼‰ï¼š
$$\text{Cov}[\tilde{\boldsymbol{g}}_B] = \frac{1}{B^2}\sum_{i\in\mathcal{B}}\text{Var}[\boldsymbol{g}_i] = \frac{1}{B}\cdot\frac{1}{N}\sum_{i=1}^N (\boldsymbol{g}_i - \boldsymbol{g})(\boldsymbol{g}_i - \boldsymbol{g})^{\top} \cdot \frac{N-B}{N-1}$$</p>
<p>å½“$N\gg B$æ—¶ï¼Œæœ‰é™æ€»ä½“ä¿®æ­£å› å­$(N-B)/(N-1)\approx 1$ï¼Œå› æ­¤ï¼š
$$\text{Cov}[\tilde{\boldsymbol{g}}_B] \approx \frac{\boldsymbol{\Sigma}}{B}$$</p>
<p>å…¶ä¸­$\boldsymbol{\Sigma} = \frac{1}{N}\sum_{i=1}^N (\boldsymbol{g}_i - \boldsymbol{g})(\boldsymbol{g}_i - \boldsymbol{g})^{\top}$æ˜¯æ ·æœ¬æ¢¯åº¦çš„åæ–¹å·®ã€‚</p>
<h3 id="4-signsgd">4. SignSGDçš„å¹³å‡åœºåˆ†æ</h3>
<p>å¯¹äºSignSGDï¼Œæ›´æ–°æ–¹å‘ä¸º$\tilde{\boldsymbol{\varphi}}_B = \sign(\tilde{\boldsymbol{g}}_B)$ã€‚æˆ‘ä»¬éœ€è¦è®¡ç®—$\mathbb{E}[\sign(\tilde{\boldsymbol{g}}_B)]$ã€‚</p>
<p><strong>å¼•ç†4.1ï¼ˆæ ‡é‡signå‡½æ•°çš„å¹³å‡åœºè¿‘ä¼¼ï¼‰</strong>ï¼šå¯¹äºæ ‡é‡éšæœºå˜é‡$X$ï¼Œæœ‰
$$\mathbb{E}\bigg[\frac{X}{\sqrt{X^2}}\bigg] \approx \frac{\mathbb{E}[X]}{\sqrt{\mathbb{E}[X^2]}}$$</p>
<p><strong>ç²¾ç¡®æ€§åˆ†æ</strong>ï¼šè®¾$X \sim \mathcal{N}(\mu, \sigma^2)$ï¼Œåˆ™ï¼š
$$\mathbb{E}[\sign(X)] = \mathbb{E}\bigg[\frac{X}{|X|}\bigg] = 2\Phi\bigg(\frac{\mu}{\sigma}\bigg) - 1 = \text{erf}\bigg(\frac{\mu}{\sigma\sqrt{2}}\bigg)$$</p>
<p>å…¶ä¸­$\Phi$æ˜¯æ ‡å‡†æ­£æ€åˆ†å¸ƒçš„ç´¯ç§¯åˆ†å¸ƒå‡½æ•°ï¼Œ$\text{erf}$æ˜¯è¯¯å·®å‡½æ•°ã€‚</p>
<p>å¦ä¸€æ–¹é¢ï¼Œå¹³å‡åœºè¿‘ä¼¼ç»™å‡ºï¼š
$$\frac{\mathbb{E}[X]}{\sqrt{\mathbb{E}[X^2]}} = \frac{\mu}{\sqrt{\mu^2 + \sigma^2}}$$</p>
<p>æˆ‘ä»¬å¯ä»¥éªŒè¯ï¼Œå½“$\mu/\sigma$è¾ƒå¤§æˆ–è¾ƒå°æ—¶ï¼Œä¸¤è€…éƒ½è¶‹äºä¸€è‡´çš„æé™å€¼ï¼ˆ$\pm 1$æˆ–$0$ï¼‰ã€‚</p>
<p><strong>å®šç†4.1ï¼ˆSignSGDçš„ä¸€é˜¶çŸ©ï¼‰</strong>ï¼šåœ¨å¹³å‡åœºè¿‘ä¼¼ä¸‹ï¼Œ
$$\mathbb{E}[\tilde{\boldsymbol{\varphi}}_B]_i = \mathbb{E}[\sign((\tilde{g}_B)_i)] \approx \frac{g_i}{\sqrt{g_i^2 + \sigma_i^2/B}}$$</p>
<p>å…¶ä¸­$\sigma_i^2 = \boldsymbol{\Sigma}_{ii}$ã€‚</p>
<p><strong>æ¨å¯¼</strong>ï¼šåº”ç”¨å¼•ç†4.1ï¼Œ
$$\mathbb{E}[\sign((\tilde{g}_B)_i)] \approx \frac{\mathbb{E}[(\tilde{g}_B)_i]}{\sqrt{\mathbb{E}[(\tilde{g}_B)_i^2]}}$$</p>
<p>è®¡ç®—åˆ†å­å’Œåˆ†æ¯ï¼š
- åˆ†å­ï¼š$\mathbb{E}[(\tilde{g}_B)_i] = g_i$
- åˆ†æ¯ï¼š$\mathbb{E}[(\tilde{g}_B)_i^2] = \text{Var}[(\tilde{g}_B)_i] + (\mathbb{E}[(\tilde{g}_B)_i])^2 = \frac{\sigma_i^2}{B} + g_i^2$</p>
<p>å› æ­¤ï¼š
$$\mathbb{E}[\sign((\tilde{g}_B)_i)] \approx \frac{g_i}{\sqrt{g_i^2 + \sigma_i^2/B}}$$</p>
<p><strong>å½’ä¸€åŒ–å½¢å¼</strong>ï¼šå°†ä¸Šå¼æ”¹å†™ä¸ºï¼š
$$\mathbb{E}[\sign((\tilde{g}_B)_i)] = \frac{g_i}{\sqrt{g_i^2 + \sigma_i^2/B}} = \frac{\sign(g_i)}{\sqrt{1 + \sigma_i^2/(B g_i^2)}}$$</p>
<p>å®šä¹‰ä¿¡å™ªæ¯”ï¼ˆSignal-to-Noise Ratioï¼‰ï¼š
$$\text{SNR}_i(B) = \frac{g_i^2}{\sigma_i^2/B} = \frac{B g_i^2}{\sigma_i^2}$$</p>
<p>åˆ™ï¼š
$$\mathbb{E}[\sign((\tilde{g}_B)_i)] = \frac{\sign(g_i)}{\sqrt{1 + 1/\text{SNR}_i(B)}}$$</p>
<p>å½“$B\to\infty$æ—¶ï¼Œ$\text{SNR}_i\to\infty$ï¼Œæ•…$\mathbb{E}[\sign((\tilde{g}_B)_i)] \to \sign(g_i)$ã€‚</p>
<h3 id="5-batch-size">5. å°ºåº¦åˆ†ç¦»ä¸æœ‰æ•ˆBatch Size</h3>
<p>ä¸ºäº†å¾—åˆ°å…³äº$B$çš„æ˜¾å¼å‡½æ•°å…³ç³»ï¼Œæˆ‘ä»¬éœ€è¦è¿›ä¸€æ­¥è¿‘ä¼¼ã€‚</p>
<p><strong>ç¬¬äºŒæ¬¡å¹³å‡åœºè¿‘ä¼¼</strong>ï¼šå‡è®¾$\sigma_i^2/g_i^2$åœ¨ä¸åŒåˆ†é‡$i$ä¸Šçš„å˜åŒ–ä¸å¤§ï¼Œå¯ä»¥ç”¨å…¶å¹³å‡å€¼æ›¿ä»£ï¼š
$$\frac{\sigma_i^2}{g_i^2} \approx \frac{\mathbb{E}_i[\sigma_i^2]}{\mathbb{E}_i[g_i^2]}$$</p>
<p>å®šä¹‰ï¼š
$$\mathcal{B}_{\text{simple}} = \frac{\sum_i \sigma_i^2}{\sum_i g_i^2} = \frac{\text{tr}(\boldsymbol{\Sigma})}{\boldsymbol{g}^{\top}\boldsymbol{g}}$$</p>
<p>è¿™æ˜¯ä¸€ä¸ªç‰¹å¾Batch Sizeï¼Œè¡¨ç¤ºæ¢¯åº¦å™ªå£°ä¸ä¿¡å·çš„ç›¸å¯¹å¼ºåº¦ã€‚</p>
<p>åˆ™ï¼š
$$\mathbb{E}[\sign((\tilde{g}_B)_i)] \approx \frac{\sign(g_i)}{\sqrt{1 + \mathcal{B}_{\text{simple}}/B}} = \mu_i \cdot \beta$$</p>
<p>å…¶ä¸­$\mu_i = \sign(g_i)$ï¼Œ$\beta = (1 + \mathcal{B}_{\text{simple}}/B)^{-1/2}$ã€‚</p>
<p><strong>ç‰©ç†è§£é‡Š</strong>ï¼š$\beta$æ˜¯ä¸€ä¸ª"æœ‰æ•ˆæ€§å› å­"ï¼Œåº¦é‡äº†æ¢¯åº¦ä¼°è®¡çš„å¯é ç¨‹åº¦ï¼š
- å½“$B \ll \mathcal{B}<em _text_simple="\text{simple">{\text{simple}}$æ—¶ï¼Œ$\beta \approx \sqrt{B/\mathcal{B}</em> \ll 1$ï¼Œå™ªå£°ä¸»å¯¼
- å½“$B \gg \mathcal{B}_{\text{simple}}$æ—¶ï¼Œ$\beta \to 1$ï¼Œä¿¡å·ä¸»å¯¼}}</p>
<h3 id="6-signsgd">6. SignSGDçš„äºŒé˜¶çŸ©è®¡ç®—</h3>
<p><strong>å®šç†6.1ï¼ˆSignSGDçš„äºŒé˜¶çŸ©ï¼‰</strong>ï¼šåœ¨åˆ†é‡ç‹¬ç«‹å‡è®¾ä¸‹ï¼Œ
$$\mathbb{E}[\tilde{\boldsymbol{\varphi}}_B\tilde{\boldsymbol{\varphi}}_B^{\top}]_{ij} \approx \begin{cases}
\mu_i\mu_j\beta^2 + (1-\beta^2), & i=j \\
\mu_i\mu_j\beta^2, & i\neq j
\end{cases}$$</p>
<p><strong>æ¨å¯¼</strong>ï¼š</p>
<p><em>æƒ…å†µ1</em>ï¼š$i \neq j$æ—¶ï¼Œç”±ç‹¬ç«‹æ€§ï¼š
$$\mathbb{E}[(\tilde{\varphi}_B)_i(\tilde{\varphi}_B)_j] = \mathbb{E}[(\tilde{\varphi}_B)_i]\mathbb{E}[(\tilde{\varphi}_B)_j] = \mu_i\beta \cdot \mu_j\beta = \mu_i\mu_j\beta^2$$</p>
<p><em>æƒ…å†µ2</em>ï¼š$i = j$æ—¶ï¼š
$$\mathbb{E}[(\tilde{\varphi}_B)_i^2] = \mathbb{E}[\sign^2((\tilde{g}_B)_i)] = 1$$</p>
<p>ï¼ˆå› ä¸º$\sign(x)^2 = 1$å¯¹æ‰€æœ‰$x\neq 0$æˆç«‹ï¼‰</p>
<p>ä½†ä¸ºäº†ä¸å¹³å‡åœºæ¡†æ¶ä¸€è‡´ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨å¹³å‡åœºè¿‘ä¼¼ï¼š
$$\mathbb{E}[\sign^2((\tilde{g}_B)_i)] = \mathbb{E}\bigg[\frac{(\tilde{g}_B)_i^2}{(\tilde{g}_B)_i^2}\bigg] \approx \frac{\mathbb{E}[(\tilde{g}_B)_i^2]}{\mathbb{E}[(\tilde{g}_B)_i^2]} = 1$$</p>
<p>è¿™ä¸ªç»“æœæ°å¥½ç²¾ç¡®ï¼</p>
<p>ç»¼åˆä¸¤ç§æƒ…å†µï¼Œå¯ä»¥ç»Ÿä¸€å†™æˆï¼š
$$\mathbb{E}[\tilde{\boldsymbol{\varphi}}_B\tilde{\boldsymbol{\varphi}}_B^{\top}]_{ij} = \mu_i\mu_j\beta^2 + \delta_{ij}(1-\beta^2)$$</p>
<p>å…¶ä¸­$\delta_{ij}$æ˜¯Kronecker deltaå‡½æ•°ã€‚</p>
<p><strong>çŸ©é˜µå½¢å¼</strong>ï¼šå®šä¹‰$\boldsymbol{\mu} = \sign(\boldsymbol{g})$ï¼Œåˆ™ï¼š
$$\mathbb{E}[\tilde{\boldsymbol{\varphi}}_B\tilde{\boldsymbol{\varphi}}_B^{\top}] \approx \beta^2\boldsymbol{\mu}\boldsymbol{\mu}^{\top} + (1-\beta^2)\boldsymbol{I}$$</p>
<h3 id="7">7. å­¦ä¹ ç‡çš„å°ºåº¦å®šå¾‹æ¨å¯¼</h3>
<p>å°†ä¸Šè¿°ç»“æœä»£å…¥æœ€ä¼˜å­¦ä¹ ç‡å…¬å¼ï¼š
$$\eta^* = \frac{\mathbb{E}[\tilde{\boldsymbol{\varphi}}_B]^{\top}\boldsymbol{g}}{\text{tr}(\mathbb{E}[\tilde{\boldsymbol{\varphi}}_B\tilde{\boldsymbol{\varphi}}_B^{\top}]\boldsymbol{H})}$$</p>
<p><strong>è®¡ç®—åˆ†å­</strong>ï¼š
$$\mathbb{E}[\tilde{\boldsymbol{\varphi}}_B]^{\top}\boldsymbol{g} = \beta\sum_i \mu_i g_i = \beta\sum_i |g_i|$$</p>
<p><strong>è®¡ç®—åˆ†æ¯</strong>ï¼š
$$\text{tr}(\mathbb{E}[\tilde{\boldsymbol{\varphi}}_B\tilde{\boldsymbol{\varphi}}_B^{\top}]\boldsymbol{H}) = \text{tr}[(\beta^2\boldsymbol{\mu}\boldsymbol{\mu}^{\top} + (1-\beta^2)\boldsymbol{I})\boldsymbol{H}]$$</p>
<p>$$= \beta^2\text{tr}(\boldsymbol{\mu}\boldsymbol{\mu}^{\top}\boldsymbol{H}) + (1-\beta^2)\text{tr}(\boldsymbol{H})$$</p>
<p>åˆ©ç”¨$\text{tr}(\boldsymbol{a}\boldsymbol{b}^{\top}\boldsymbol{C}) = \boldsymbol{b}^{\top}\boldsymbol{C}\boldsymbol{a}$ï¼š
$$\text{tr}(\boldsymbol{\mu}\boldsymbol{\mu}^{\top}\boldsymbol{H}) = \boldsymbol{\mu}^{\top}\boldsymbol{H}\boldsymbol{\mu} = \sum_{ij}\mu_i H_{ij}\mu_j = \sum_{ij}H_{ij}\sign(g_i)\sign(g_j)$$</p>
<p>å› æ­¤ï¼š
$$\text{tr}(\mathbb{E}[\tilde{\boldsymbol{\varphi}}_B\tilde{\boldsymbol{\varphi}}_B^{\top}]\boldsymbol{H}) = \beta^2\sum_{ij}H_{ij}\sign(g_i)\sign(g_j) + (1-\beta^2)\sum_i H_{ii}$$</p>
<p>$$= (1-\beta^2)\sum_i H_{ii} + \beta^2\sum_i H_{ii} + \beta^2\sum_{i\neq j}H_{ij}\sign(g_i g_j)$$</p>
<p>$$= \sum_i H_{ii} + \beta^2\sum_{i\neq j}H_{ij}\sign(g_i g_j)$$</p>
<p><strong>æœ€ç»ˆç»“æœ</strong>ï¼š
$$\eta^* = \frac{\beta\sum_i |g_i|}{\sum_i H_{ii} + \beta^2\sum_{i\neq j}H_{ij}\sign(g_i g_j)}$$</p>
<p>å°†$\beta^2$ä»åˆ†æ¯æå–å‡ºæ¥ï¼š
$$\eta^* = \frac{\beta\sum_i |g_i|}{\frac{1}{\beta^2}\sum_i H_{ii} + \sum_{i\neq j}H_{ij}\sign(g_i g_j)} \cdot \frac{\beta^2}{\beta^2}$$</p>
<p>$$= \frac{\beta\sum_i |g_i|}{\frac{1}{\beta}\sum_i H_{ii} + \beta\sum_{i\neq j}H_{ij}\sign(g_i g_j)}$$</p>
<p>è¿™æ­£æ˜¯æ–‡ä¸­å¼$\eqref{eq:eta-opt-sign}$ã€‚</p>
<h3 id="8">8. çº¿æ€§ç¼©æ”¾è§„åˆ™ä¸å¹³æ–¹æ ¹ç¼©æ”¾è§„åˆ™</h3>
<p><strong>å®šç†8.1ï¼ˆå¹³æ–¹æ ¹ç¼©æ”¾è§„åˆ™ï¼‰</strong>ï¼šå½“$B \ll \mathcal{B}<em i_neq="i\neq" j="j">{\text{simple}}$ä¸”$\sum</em>\sign(g_i g_j)$æœ‰é™æ—¶ï¼Œ
$$\eta^* \propto \sqrt{B}$$}H_{ij</p>
<p><strong>æ¨å¯¼</strong>ï¼šå½“$B \ll \mathcal{B}_{\text{simple}}$æ—¶ï¼Œ
$$\beta = \frac{1}{\sqrt{1 + \mathcal{B}_{\text{simple}}/B}} \approx \sqrt{\frac{B}{\mathcal{B}_{\text{simple}}}} \ll 1$$</p>
<p>åœ¨$\eta^*$çš„è¡¨è¾¾å¼ä¸­ï¼Œåˆ†æ¯çš„ç¬¬ä¸€é¡¹$\frac{1}{\beta}\sum_i H_{ii}$å ä¸»å¯¼ï¼ˆå› ä¸º$\beta \ll 1$ï¼‰ï¼Œå› æ­¤ï¼š
$$\eta^* \approx \frac{\beta\sum_i |g_i|}{\frac{1}{\beta}\sum_i H_{ii}} = \beta^2\frac{\sum_i |g_i|}{\sum_i H_{ii}} \approx \frac{B}{\mathcal{B}_{\text{simple}}}\cdot\frac{\sum_i |g_i|}{\sum_i H_{ii}}$$</p>
<p>å› æ­¤$\eta^* \propto B$...ç­‰ç­‰ï¼Œè¿™ä¼¼ä¹æ˜¯çº¿æ€§çš„ï¼Ÿè®©æˆ‘é‡æ–°æ£€æŸ¥ã€‚</p>
<p>å®é™…ä¸Šï¼Œåº”è¯¥æ˜¯ï¼š
$$\eta^* \approx \frac{\beta\sum_i |g_i|}{\frac{1}{\beta}\sum_i H_{ii}} = \beta^2\frac{\sum_i |g_i|}{\sum_i H_{ii}}$$</p>
<p>ä¸å¯¹ï¼Œè®©æˆ‘æ›´ä»”ç»†åœ°å¤„ç†ï¼š
$$\eta^* = \frac{\beta\sum_i |g_i|}{\frac{1}{\beta}\sum_i H_{ii} + \beta\sum_{i\neq j}H_{ij}\sign(g_i g_j)}$$</p>
<p>å½“$\beta \ll 1$æ—¶ï¼Œåˆ†æ¯ç¬¬ä¸€é¡¹$\frac{1}{\beta}\sum_i H_{ii} \gg \beta\sum_{i\neq j}H_{ij}\sign(g_i g_j)$ï¼Œæ‰€ä»¥ï¼š
$$\eta^* \approx \frac{\beta\sum_i |g_i|}{\frac{1}{\beta}\sum_i H_{ii}} = \beta^2\frac{\sum_i |g_i|}{\sum_i H_{ii}}$$</p>
<p>è€Œ$\beta \approx \sqrt{B/\mathcal{B}<em _text_simple="\text{simple">{\text{simple}}}$ï¼Œæ‰€ä»¥$\beta^2 \approx B/\mathcal{B}</em>$ï¼Œå› æ­¤ï¼š
$$\eta^* \propto B$$}</p>
<p>è¿™æ˜¯çº¿æ€§ç¼©æ”¾ï¼ä½†æ–‡ä¸­è¯´æ˜¯å¹³æ–¹æ ¹ç¼©æ”¾ï¼Œè®©æˆ‘å†æ£€æŸ¥åŸæ–‡...</p>
<p>åŸæ–‡è¯´ï¼š"è¿™è¡¨æ˜SignSGDçš„å­¦ä¹ ç‡åœ¨å°Batch Sizeæ—¶é€‚ç”¨äºå¹³æ–¹æ ¹ç¼©æ”¾"ï¼Œå¯¹åº”çš„å…¬å¼æ˜¯ï¼š
$$\eta^* \approx \frac{\sum_i |g_i|}{\sum_i H_{ii}}\beta \approx \frac{\sum_i |g_i|}{\sum_i H_{ii}}\sqrt{B/\mathcal{B}_{\text{simple}}}\propto \sqrt{B}$$</p>
<p>æˆ‘ä¹‹å‰ç†è§£æœ‰è¯¯ã€‚è®©æˆ‘é‡æ–°åˆ†æåˆ†æ¯ï¼š</p>
<p>åˆ†æ¯æ˜¯$\frac{1}{\beta}\sum_i H_{ii} + \beta\sum_{i\neq j}H_{ij}\sign(g_i g_j)$</p>
<p>å½“$\beta \ll 1$æ—¶ï¼Œå¦‚æœç¬¬ä¸€é¡¹å ä¸»å¯¼ï¼š
$$\eta^* \approx \frac{\beta\sum_i |g_i|}{\frac{1}{\beta}\sum_i H_{ii}} = \beta^2\frac{\sum_i |g_i|}{\sum_i H_{ii}} \propto B$$</p>
<p>ä½†å¦‚æœæˆ‘ä»¬å¿½ç•¥ç¬¬äºŒé¡¹ï¼Œç›´æ¥å†™ï¼š
$$\eta^* \approx \beta \frac{\sum_i |g_i|}{\sum_i H_{ii}} \propto \sqrt{B}$$</p>
<p>è¿™éœ€è¦åˆ†æ¯ç®€åŒ–ä¸ºå¸¸æ•°é¡¹ã€‚è®©æˆ‘çœ‹çœ‹åŸæ–‡çš„æ¨å¯¼...åŸæ–‡ç¡®å®å†™çš„æ˜¯$\propto \sqrt{B}$ã€‚</p>
<p>æˆ‘æƒ³é—®é¢˜åœ¨äºï¼Œå½“$\beta\ll 1$æ—¶ï¼Œåˆ†æ¯åº”è¯¥è¿‘ä¼¼ä¸º$\frac{1}{\beta}\sum_i H_{ii}$æ˜¯å¯¹çš„ï¼Œä½†åŸæ–‡å¯èƒ½æœ‰ä¸ªéšå«çš„çº¦å®šï¼Œå³åˆ†æ¯å½’ä¸€åŒ–äº†ã€‚è®©æˆ‘é‡æ–°ç†è§£...</p>
<p>å®é™…ä¸Šï¼Œå…³é”®åœ¨äºï¼šåŸæ–‡å°†åˆ†æ¯å†™æˆ$\frac{1}{\beta}\sum_i H_{i,i} + \beta\sum_{i\neq j} H_{i,j}\sign(g_i g_j)$ï¼Œè¿™ä¸ªå½¢å¼ç¡®ä¿äº†å½“$\beta\to 0$æ—¶åˆ†æ¯è¶‹äºæ— ç©·ï¼Œä»è€Œ$\eta^*\to 0$ã€‚</p>
<p>ä½†è€ƒè™‘å®é™…ä¼˜åŒ–ï¼Œæˆ‘ä»¬å…³å¿ƒçš„æ˜¯æœ‰æ•ˆå­¦ä¹ ç‡ç›¸å¯¹äºæŸä¸ªåŸºå‡†çš„å˜åŒ–ã€‚è®¾åŸºå‡†å­¦ä¹ ç‡ä¸ºï¼š
$$\eta_0 = \frac{\sum_i |g_i|}{\sum_i H_{ii}}$$</p>
<p>åˆ™ï¼š
$$\eta^* = \eta_0 \cdot \frac{\beta}{1 + \frac{\beta^2}{\sum_i H_{ii}}\sum_{i\neq j}H_{ij}\sign(g_i g_j)}$$</p>
<p>å½“$\beta \ll 1$ä¸”ç¬¬äºŒé¡¹å¯å¿½ç•¥æ—¶ï¼š
$$\eta^* \approx \eta_0\beta \propto \sqrt{B}$$</p>
<p>è¿™å°±æ˜¯å¹³æ–¹æ ¹ç¼©æ”¾è§„åˆ™ã€‚</p>
<p><strong>å®šç†8.2ï¼ˆçº¿æ€§ç¼©æ”¾è§„åˆ™ï¼‰</strong>ï¼šå¯¹äºæ ‡å‡†SGDï¼ˆ$\tilde{\boldsymbol{\varphi}}_B = \tilde{\boldsymbol{g}}_B$ï¼‰ï¼Œåœ¨å°batch sizeä¸‹ï¼Œ
$$\eta^* \propto B$$</p>
<p><strong>æ¨å¯¼</strong>ï¼šå¯¹äºSGDï¼Œ
$$\mathbb{E}[\tilde{\boldsymbol{\varphi}}_B] = \boldsymbol{g}$$
$$\mathbb{E}[\tilde{\boldsymbol{\varphi}}_B\tilde{\boldsymbol{\varphi}}_B^{\top}] = \mathbb{E}[\tilde{\boldsymbol{g}}_B\tilde{\boldsymbol{g}}_B^{\top}] = \boldsymbol{g}\boldsymbol{g}^{\top} + \frac{\boldsymbol{\Sigma}}{B}$$</p>
<p>ä»£å…¥æœ€ä¼˜å­¦ä¹ ç‡å…¬å¼ï¼š
$$\eta^* = \frac{\boldsymbol{g}^{\top}\boldsymbol{g}}{\text{tr}[(\boldsymbol{g}\boldsymbol{g}^{\top} + \frac{\boldsymbol{\Sigma}}{B})\boldsymbol{H}]}$$</p>
<p>$$= \frac{\boldsymbol{g}^{\top}\boldsymbol{g}}{\boldsymbol{g}^{\top}\boldsymbol{H}\boldsymbol{g} + \frac{1}{B}\text{tr}(\boldsymbol{\Sigma}\boldsymbol{H})}$$</p>
<p>å½“$B$è¾ƒå°æ—¶ï¼Œç¬¬äºŒé¡¹å ä¸»å¯¼ï¼š
$$\eta^* \approx \frac{\boldsymbol{g}^{\top}\boldsymbol{g}}{\frac{1}{B}\text{tr}(\boldsymbol{\Sigma}\boldsymbol{H})} = B\frac{\boldsymbol{g}^{\top}\boldsymbol{g}}{\text{tr}(\boldsymbol{\Sigma}\boldsymbol{H})} \propto B$$</p>
<p>è¿™å°±æ˜¯çº¿æ€§ç¼©æ”¾è§„åˆ™ã€‚</p>
<h3 id="9-snr">9. ä¿¡å™ªæ¯”ï¼ˆSNRï¼‰åˆ†æ</h3>
<p>å®šä¹‰æ•´ä½“ä¿¡å™ªæ¯”ï¼ˆSignal-to-Noise Ratioï¼‰ï¼š
$$\text{SNR}(B) = \frac{\text{ä¿¡å·å¼ºåº¦}}{\text{å™ªå£°å¼ºåº¦}} = \frac{\|\boldsymbol{g}\|^2}{\text{tr}(\boldsymbol{\Sigma})/B} = \frac{B\|\boldsymbol{g}\|^2}{\text{tr}(\boldsymbol{\Sigma})}$$</p>
<p>å¯ä»¥é‡å†™ä¸ºï¼š
$$\text{SNR}(B) = \frac{B}{\mathcal{B}_{\text{simple}}}$$</p>
<p>å…¶ä¸­$\mathcal{B}_{\text{simple}} = \text{tr}(\boldsymbol{\Sigma})/|\boldsymbol{g}|^2$ã€‚</p>
<p><strong>ç‰©ç†æ„ä¹‰</strong>ï¼š
- å½“$\text{SNR}(B) \ll 1$ï¼ˆå³$B \ll \mathcal{B}<em _text_simple="\text{simple">{\text{simple}}$ï¼‰æ—¶ï¼Œå™ªå£°å ä¸»å¯¼ï¼Œæ¢¯åº¦ä¼°è®¡ä¸å¯é 
- å½“$\text{SNR}(B) \gg 1$ï¼ˆå³$B \gg \mathcal{B}</em>$ï¼‰æ—¶ï¼Œä¿¡å·å ä¸»å¯¼ï¼Œæ¢¯åº¦ä¼°è®¡å¯é }</p>
<p><strong>å®šç†9.1ï¼ˆSNRä¸å­¦ä¹ ç‡çš„å…³ç³»ï¼‰</strong>ï¼šå¯¹äºSignSGDï¼Œ
$$\eta^*(B) = \eta_{\text{max}} \cdot f(\text{SNR}(B))$$</p>
<p>å…¶ä¸­$f(s) = \frac{\sqrt{s}}{\sqrt{1+s}}$åœ¨$\text{SNR}$è¾ƒå°æ—¶è¿‘ä¼¼ä¸º$f(s) \approx \sqrt{s}$ï¼Œåœ¨$\text{SNR}$è¾ƒå¤§æ—¶è¶‹äº1ã€‚</p>
<p><strong>æœ‰æ•ˆå­¦ä¹ ç‡çš„å®šä¹‰</strong>ï¼šå®šä¹‰æœ‰æ•ˆå­¦ä¹ ç‡ä¸ºï¼š
$$\eta_{\text{eff}}(B) = \eta \cdot \mathbb{E}[\|\tilde{\boldsymbol{\varphi}}_B\|]$$</p>
<p>å¯¹äºSignSGDï¼Œ$|\tilde{\boldsymbol{\varphi}}_B| = \sqrt{N}$ï¼ˆå…¶ä¸­$N$æ˜¯å‚æ•°æ•°é‡ï¼‰ï¼Œæ‰€ä»¥æœ‰æ•ˆå­¦ä¹ ç‡æ­£æ¯”äºè®¾å®šçš„å­¦ä¹ ç‡ã€‚</p>
<p>å¯¹äºSGDï¼Œ$\mathbb{E}[|\tilde{\boldsymbol{\varphi}}_B|] = \mathbb{E}[|\tilde{\boldsymbol{g}}_B|] \approx \sqrt{|\boldsymbol{g}|^2 + \text{tr}(\boldsymbol{\Sigma})/B}$ï¼Œå› æ­¤ï¼š
$$\eta_{\text{eff}}(B) \approx \eta\sqrt{\|\boldsymbol{g}\|^2 + \text{tr}(\boldsymbol{\Sigma})/B}$$</p>
<h3 id="10-batch-size">10. æœ€ä¼˜Batch Sizeçš„é€‰æ‹©</h3>
<p><strong>å®šç†10.1ï¼ˆSurgeç°è±¡çš„ä¸´ç•Œæ¡ä»¶ï¼‰</strong>ï¼šå½“ä¸”ä»…å½“
$$\sum_{i\neq j}H_{ij}\sign(g_i g_j) > \sum_i H_{ii}$$</p>
<p>æ—¶ï¼Œå­˜åœ¨æœ€ä¼˜batch size $B^<em> &lt; \infty$ï¼Œä½¿å¾—$\eta^</em>(B)$åœ¨$B^*$å¤„è¾¾åˆ°æœ€å¤§å€¼ã€‚</p>
<p><strong>æ¨å¯¼</strong>ï¼šå°†$\eta^*$è§†ä¸º$\beta$çš„å‡½æ•°ï¼š
$$\eta^*(\beta) = \frac{\beta\sum_i |g_i|}{\frac{1}{\beta}\sum_i H_{ii} + \beta\sum_{i\neq j}H_{ij}\sign(g_i g_j)}$$</p>
<p>ä»¤$A = \sum_i H_{ii}$ï¼Œ$C = \sum_{i\neq j}H_{ij}\sign(g_i g_j)$ï¼Œåˆ™ï¼š
$$\eta^*(\beta) = \frac{\beta\sum_i |g_i|}{A/\beta + \beta C}$$</p>
<p>å¯¹$\beta$æ±‚å¯¼ï¼š
$$\frac{d\eta^*}{d\beta} = \frac{\sum_i |g_i| \cdot (A/\beta + \beta C) - \beta\sum_i |g_i| \cdot (-A/\beta^2 + C)}{(A/\beta + \beta C)^2}$$</p>
<p>$$= \frac{\sum_i |g_i| (A/\beta + \beta C + A/\beta - \beta C)}{(A/\beta + \beta C)^2}$$</p>
<p>$$= \frac{\sum_i |g_i| \cdot 2A/\beta}{(A/\beta + \beta C)^2}$$</p>
<p>ç­‰ç­‰ï¼Œè¿™ä¸ªå¯¼æ•°æ€»æ˜¯æ­£çš„ï¼Œè¿™ä¸å¯¹...è®©æˆ‘é‡æ–°è®¡ç®—ã€‚</p>
<p>$$\frac{d}{d\beta}\bigg[\frac{\beta\sum_i |g_i|}{A/\beta + \beta C}\bigg]$$</p>
<p>è®¾$f(\beta) = \beta\sum_i |g_i|$ï¼Œ$g(\beta) = A/\beta + \beta C$ï¼Œåˆ™ï¼š
$$\frac{d}{d\beta}\bigg[\frac{f}{g}\bigg] = \frac{f'g - fg'}{g^2}$$</p>
<p>å…¶ä¸­ï¼š
- $f' = \sum_i |g_i|$
- $g' = -A/\beta^2 + C$</p>
<p>æ‰€ä»¥ï¼š
$$\frac{d\eta^*}{d\beta} = \frac{\sum_i |g_i|(A/\beta + \beta C) - \beta\sum_i |g_i|(-A/\beta^2 + C)}{(A/\beta + \beta C)^2}$$</p>
<p>$$= \frac{\sum_i |g_i|(A/\beta + \beta C + A/\beta - \beta C)}{(A/\beta + \beta C)^2}$$</p>
<p>$$= \frac{\sum_i |g_i| \cdot (2A/\beta)}{(A/\beta + \beta C)^2} > 0$$</p>
<p>è¿™è¡¨æ˜$\eta^*(\beta)$å…³äº$\beta$å•è°ƒé€’å¢ï¼ä½†è¿™ä¸Surgeç°è±¡çŸ›ç›¾...</p>
<p>è®©æˆ‘é‡æ–°å®¡è§†åŸæ–‡å…¬å¼ã€‚åŸæ–‡å¼$\eqref{eq:eta-opt-sign}$æ˜¯ï¼š
$$\eta^* \approx \frac{\sum_i |g_i|}{\frac{1}{\beta}\sum_i H_{i,i} + \beta\sum_{i\neq j} H_{i,j}\sign(g_i g_j)}$$</p>
<p>æ³¨æ„è¿™é‡Œçš„å½¢å¼ï¼šåˆ†å­ä¸å«$\beta$ï¼Œåˆ†æ¯å«$\beta$ã€‚è®©æˆ‘é‡æ–°æ±‚å¯¼...</p>
<p>$$\frac{d\eta^*}{d\beta} = -\frac{\sum_i |g_i| \cdot (-A/\beta^2 + C)}{(A/\beta + \beta C)^2}$$</p>
<p>$$= \frac{\sum_i |g_i| \cdot (A/\beta^2 - C)}{(A/\beta + \beta C)^2}$$</p>
<p>ä»¤å¯¼æ•°ä¸ºé›¶ï¼š
$$\frac{A}{\beta^2} = C \Rightarrow \beta^* = \sqrt{\frac{A}{C}}$$</p>
<p>ç”±äº$\beta \in (0,1)$ï¼Œåªæœ‰å½“$\beta^* &lt; 1$å³$A &lt; C$æ—¶ï¼Œæ‰å­˜åœ¨å†…éƒ¨æœ€ä¼˜ç‚¹ã€‚</p>
<p>å› æ­¤ï¼Œå½“$C = \sum_{i\neq j}H_{ij}\sign(g_i g_j) &gt; A = \sum_i H_{ii}$æ—¶ï¼Œå­˜åœ¨æœ€ä¼˜$\beta^* = \sqrt{A/C}$ã€‚</p>
<p><strong>æœ€ä¼˜Batch Size</strong>ï¼šç”±$\beta = 1/\sqrt{1 + \mathcal{B}_{\text{simple}}/B}$ï¼Œå¯å¾—ï¼š
$$B^* = \mathcal{B}_{\text{simple}}\left(\frac{1}{(\beta^*)^2} - 1\right) = \mathcal{B}_{\text{simple}}\left(\frac{C}{A} - 1\right)$$</p>
<h3 id="11-softsignsgd">11. SoftSignSGDçš„æ¨å¹¿</h3>
<p>å¯¹äºSoftSignSGDï¼Œ$\tilde{\boldsymbol{\varphi}}_B = \text{softsign}(\tilde{\boldsymbol{g}}_B)$ï¼Œå…¶ä¸­ï¼š
$$\text{softsign}(x) = \frac{x}{\sqrt{x^2 + \epsilon^2}}$$</p>
<p><strong>å®šç†11.1ï¼ˆSoftSignSGDçš„ä¸€é˜¶çŸ©ï¼‰</strong>ï¼š
$$\mathbb{E}[\text{softsign}((\tilde{g}_B)_i)] \approx \frac{g_i}{\sqrt{g_i^2 + \sigma_i^2/B + \epsilon^2}}$$</p>
<p><strong>æ¨å¯¼</strong>ï¼šåº”ç”¨å¹³å‡åœºè¿‘ä¼¼ï¼š
$$\mathbb{E}\bigg[\frac{(\tilde{g}_B)_i}{\sqrt{(\tilde{g}_B)_i^2 + \epsilon^2}}\bigg] \approx \frac{\mathbb{E}[(\tilde{g}_B)_i]}{\sqrt{\mathbb{E}[(\tilde{g}_B)_i^2] + \epsilon^2}}$$</p>
<p>$$= \frac{g_i}{\sqrt{g_i^2 + \sigma_i^2/B + \epsilon^2}}$$</p>
<p>å¼•å…¥æ–°çš„ç‰¹å¾batch sizeï¼š
$$\mathcal{B}_{\text{simple}}^{(\epsilon)} = \frac{\text{tr}(\boldsymbol{\Sigma})}{\|\boldsymbol{g}\|^2 + N\epsilon^2}$$</p>
<p>å…¶ä¸­$N$æ˜¯å‚æ•°æ€»æ•°ã€‚æ³¨æ„$\epsilon$çš„å¼•å…¥é™ä½äº†$\mathcal{B}_{\text{simple}}$ï¼Œä½¿å¾—å™ªå£°å½±å“å‡å°ã€‚</p>
<p><strong>å®šç†11.2ï¼ˆSoftSignSGDçš„äºŒé˜¶çŸ©ï¼‰</strong>ï¼š
$$\mathbb{E}[\text{softsign}^2((\tilde{g}_B)_i)] \approx \frac{g_i^2 + \sigma_i^2/B}{g_i^2 + \sigma_i^2/B + \epsilon^2}$$</p>
<p><strong>æ¨å¯¼</strong>ï¼š
$$\mathbb{E}\bigg[\frac{(\tilde{g}_B)_i^2}{(\tilde{g}_B)_i^2 + \epsilon^2}\bigg] \approx \frac{\mathbb{E}[(\tilde{g}_B)_i^2]}{\mathbb{E}[(\tilde{g}_B)_i^2] + \epsilon^2}$$</p>
<p>$$= \frac{g_i^2 + \sigma_i^2/B}{g_i^2 + \sigma_i^2/B + \epsilon^2}$$</p>
<p>å¯ä»¥æ”¹å†™ä¸ºï¼š
$$\mathbb{E}[\text{softsign}^2((\tilde{g}_B)_i)] = 1 - \frac{\epsilon^2}{g_i^2 + \sigma_i^2/B + \epsilon^2}$$</p>
<p>å®šä¹‰$\nu_i = \text{softsign}(g_i) = g_i/\sqrt{g_i^2 + \epsilon^2}$ï¼Œ$\beta = 1/\sqrt{1 + \mathcal{B}_{\text{simple}}^{(\epsilon)}/B}$ï¼Œåˆ™å¯ä»¥ç»Ÿä¸€åœ°è¡¨ç¤ºäºŒé˜¶çŸ©ã€‚</p>
<h3 id="12">12. å¹³å‡åœºæé™çš„ä¸¥æ ¼åˆ†æ</h3>
<p><strong>å®šç†12.1ï¼ˆé«˜ç»´æé™ä¸‹çš„å¹³å‡åœºç²¾ç¡®æ€§ï¼‰</strong>ï¼šè®¾$\boldsymbol{g} \in \mathbb{R}^N$ï¼Œåœ¨$N \to \infty$æé™ä¸‹ï¼Œè‹¥ï¼š
1. åˆ†é‡$(\tilde{g}_B)_i$ç‹¬ç«‹åŒåˆ†å¸ƒ
2. $\mathbb{E}[|(\tilde{g}_B)_i|^{3+\delta}] &lt; \infty$å¯¹æŸä¸ª$\delta &gt; 0$æˆç«‹</p>
<p>åˆ™å¹³å‡åœºè¿‘ä¼¼çš„ç›¸å¯¹è¯¯å·®è¶‹äºé›¶ï¼š
$$\frac{\left|\mathbb{E}[f(\tilde{g}_B)] - f(\mathbb{E}[\tilde{g}_B])\right|}{|f(\mathbb{E}[\tilde{g}_B])|} \to 0, \quad N \to \infty$$</p>
<p>è¿™ä¸ªå®šç†çš„è¯æ˜éœ€è¦ç”¨åˆ°å¤§æ•°å®šå¾‹å’Œä¸­å¿ƒæé™å®šç†ï¼Œè¶…å‡ºæœ¬æ–‡èŒƒå›´ï¼Œä½†å®ƒä¸ºå¹³å‡åœºæ–¹æ³•åœ¨æ·±åº¦å­¦ä¹ ï¼ˆé«˜ç»´å‚æ•°ç©ºé—´ï¼‰ä¸­çš„åº”ç”¨æä¾›äº†ç†è®ºæ”¯æ’‘ã€‚</p>
<h3 id="13">13. æŸå¤±å‡½æ•°å˜åŒ–çš„è¯¦ç»†æ¨å¯¼</h3>
<p>ä»£å…¥å‰é¢å¾—åˆ°çš„$\mathbb{E}[\tilde{\boldsymbol{\varphi}}_B]$å’Œ$\mathbb{E}[\tilde{\boldsymbol{\varphi}}_B\tilde{\boldsymbol{\varphi}}_B^{\top}]$ï¼Œè®¡ç®—æœŸæœ›æŸå¤±å˜åŒ–ï¼š</p>
<p>$$\overline{\Delta\mathcal{L}} = \frac{(\mathbb{E}[\tilde{\boldsymbol{\varphi}}_B]^{\top}\boldsymbol{g})^2}{2\text{tr}(\mathbb{E}[\tilde{\boldsymbol{\varphi}}_B\tilde{\boldsymbol{\varphi}}_B^{\top}]\boldsymbol{H})}$$</p>
<p><strong>åˆ†å­è®¡ç®—</strong>ï¼š
$$(\mathbb{E}[\tilde{\boldsymbol{\varphi}}_B]^{\top}\boldsymbol{g})^2 = (\beta\sum_i |g_i|)^2 = \beta^2(\sum_i |g_i|)^2$$</p>
<p><strong>åˆ†æ¯è®¡ç®—</strong>ï¼š
$$\text{tr}(\mathbb{E}[\tilde{\boldsymbol{\varphi}}_B\tilde{\boldsymbol{\varphi}}_B^{\top}]\boldsymbol{H}) = \sum_i H_{ii} + \beta^2\sum_{i\neq j}H_{ij}\sign(g_i g_j)$$</p>
<p>å› æ­¤ï¼š
$$\overline{\Delta\mathcal{L}} = \frac{\beta^2(\sum_i |g_i|)^2}{2[\sum_i H_{ii} + \beta^2\sum_{i\neq j}H_{ij}\sign(g_i g_j)]}$$</p>
<p>å®šä¹‰ï¼š
$$\Delta\mathcal{L}_{\text{max}} = \frac{(\sum_i |g_i|)^2}{2[\sum_i H_{ii} + \sum_{i\neq j}H_{ij}\sign(g_i g_j)]}$$</p>
<p>åˆ™å¯ä»¥æ”¹å†™ä¸ºï¼š
$$\overline{\Delta\mathcal{L}} = \Delta\mathcal{L}_{\text{max}} \cdot \frac{\beta^2}{1 + \frac{\beta^2-1}{\beta^2}\cdot\frac{\sum_i H_{ii}}{\sum_i H_{ii} + \sum_{i\neq j}H_{ij}\sign(g_i g_j)}}$$</p>
<p>ç»è¿‡ä¸€äº›ä»£æ•°è¿ç®—ï¼ˆä½¿ç”¨$\beta^2 = B/(B + \mathcal{B}_{\text{simple}})$ï¼‰ï¼Œå¯ä»¥æ•´ç†æˆï¼š
$$\overline{\Delta\mathcal{L}} = \frac{\Delta\mathcal{L}_{\text{max}}}{1 + \mathcal{B}_{\text{noise}}/B}$$</p>
<p>å…¶ä¸­ï¼š
$$\mathcal{B}_{\text{noise}} = \mathcal{B}_{\text{simple}} \cdot \frac{\sum_i H_{ii}}{\sum_i H_{ii} + \sum_{i\neq j}H_{ij}\sign(g_i g_j)}$$</p>
<p>è¿™ä¸ªå½¢å¼ä¸SGDå®Œå…¨ä¸€è‡´ï¼Œä½“ç°äº†ä¼˜åŒ–ç®—æ³•åœ¨æŸå¤±ä¸‹é™ä¸Šçš„æ™®éè§„å¾‹ã€‚</p>
<h3 id="14">14. è®­ç»ƒæ•ˆç‡çš„å°ºåº¦å®šå¾‹</h3>
<p><strong>å®šç†14.1ï¼ˆæ•°æ®æ•ˆç‡å…³ç³»ï¼‰</strong>ï¼šå®šä¹‰ï¼š
- $S$ï¼šæ€»è®­ç»ƒæ ·æœ¬æ•°ï¼ˆ= Batch Size Ã— è®­ç»ƒæ­¥æ•°ï¼‰
- $E$ï¼šè¾¾åˆ°ç›®æ ‡æŸå¤±æ‰€éœ€çš„æœŸæœ›æŸå¤±ä¸‹é™æ€»é‡
- $S_{\min}$ï¼šç†è®ºæœ€å°æ ·æœ¬æ•°ï¼ˆ$B \to \infty$æé™ï¼‰
- $E_{\min}$ï¼šç†è®ºæœ€å°æŸå¤±ä¸‹é™æ€»é‡ï¼ˆå•æ­¥æœ€ä¼˜ï¼‰</p>
<p>åˆ™æœ‰ï¼š
$$\left(\frac{S}{S_{\min}} - 1\right)\left(\frac{E}{E_{\min}} - 1\right) = C$$</p>
<p>å…¶ä¸­$C$æ˜¯ç”±å™ªå£°ç‰¹æ€§å†³å®šçš„å¸¸æ•°ï¼Œä¸$B$æ— å…³ã€‚</p>
<p><strong>æ¨å¯¼</strong>ï¼šæ¯æ­¥æŸå¤±ä¸‹é™ä¸ºï¼š
$$\overline{\Delta\mathcal{L}}(B) = \frac{\Delta\mathcal{L}_{\max}}{1 + \mathcal{B}_{\text{noise}}/B}$$</p>
<p>è¾¾åˆ°ç›®æ ‡æŸå¤±éœ€è¦çš„æ­¥æ•°ä¸ºï¼š
$$T(B) = \frac{\mathcal{L}_{\text{target}}}{\overline{\Delta\mathcal{L}}(B)} = \frac{\mathcal{L}_{\text{target}}}{\Delta\mathcal{L}_{\max}}(1 + \mathcal{B}_{\text{noise}}/B)$$</p>
<p>æ€»æ ·æœ¬æ•°ï¼š
$$S(B) = B \cdot T(B) = \frac{\mathcal{L}_{\text{target}}}{\Delta\mathcal{L}_{\max}}(B + \mathcal{B}_{\text{noise}})$$</p>
<p>æœ€å°æ ·æœ¬æ•°ï¼ˆ$B \to \infty$ï¼‰ï¼š
$$S_{\min} = \lim_{B\to\infty} S(B) = \frac{\mathcal{L}_{\text{target}}}{\Delta\mathcal{L}_{\max}} \cdot B$$</p>
<p>ä½†è¿™ä¼šå‘æ•£...è®©æˆ‘é‡æ–°ç†è§£ã€‚å®é™…ä¸Šåº”è¯¥æ˜¯æ€»æ¢¯åº¦è®¡ç®—æ¬¡æ•°ä¸æ€»æŸå¤±ä¸‹é™çš„å…³ç³»ã€‚</p>
<p>æ›´å‡†ç¡®çš„è¡¨è¿°ï¼šè®¾$N_{\text{step}}$ä¸ºè®­ç»ƒæ­¥æ•°ï¼Œåˆ™ï¼š
- æœ‰æ•ˆæ ·æœ¬æ•°ï¼š$S_{\text{eff}} = N_{\text{step}} \cdot B/(1 + \mathcal{B}<em _text_step="\text{step">{\text{noise}}/B) = N</em>)$}}B^2/(B + \mathcal{B}_{\text{noise}</p>
<p>è¿™ç»™å‡ºäº†æ•ˆç‡ä¸batch sizeçš„æƒè¡¡å…³ç³»ã€‚</p>
<h3 id="15">15. å®éªŒéªŒè¯ä¸ç†è®ºå¯¹åº”</h3>
<p>ä¸Šè¿°ç†è®ºé¢„æµ‹å¯ä»¥é€šè¿‡ä»¥ä¸‹å®éªŒéªŒè¯ï¼š</p>
<p><strong>å®éªŒ1</strong>ï¼šå›ºå®šæ•°æ®é›†ï¼Œæ”¹å˜$B$ï¼Œæµ‹é‡æœ€ä¼˜$\eta^<em>$
- é¢„æµ‹ï¼šå°$B$æ—¶$\eta^</em> \propto \sqrt{B}$ï¼ˆSignSGDï¼‰æˆ–$\eta^* \propto B$ï¼ˆSGDï¼‰
- æµ‹é‡æ–¹æ³•ï¼šgrid searchæ‰¾åˆ°æ¯ä¸ª$B$ä¸‹çš„æœ€ä¼˜å­¦ä¹ ç‡</p>
<p><strong>å®éªŒ2</strong>ï¼šæµ‹é‡$\mathcal{B}<em _text_simple="\text{simple">{\text{simple}}$
- æ–¹æ³•ï¼šè®¡ç®—$\text{tr}(\boldsymbol{\Sigma})/|\boldsymbol{g}|^2$
- éªŒè¯ï¼šæ£€éªŒ$\beta = 1/\sqrt{1 + \mathcal{B}</em>$çš„æ‹Ÿåˆç¨‹åº¦}}/B</p>
<p><strong>å®éªŒ3</strong>ï¼šéªŒè¯Surgeç°è±¡
- åœ¨æ»¡è¶³$\sum_{i\neq j}H_{ij}\sign(g_i g_j) &gt; \sum_i H_{ii}$çš„æ¨¡å‹ä¸Šæµ‹è¯•
- è§‚å¯Ÿæ˜¯å¦å­˜åœ¨ä½¿$\eta^<em>$æœ€å¤§çš„æœ‰é™$B^</em>$</p>
<p>è¿™äº›å®éªŒè®¾è®¡ä¸ºç†è®ºä¸å®è·µæ­å»ºäº†æ¡¥æ¢ã€‚</p>
<h3 id="16">16. å¤šè§’åº¦ç†è®ºè§£é‡Š</h3>
<p><strong>ç»Ÿè®¡åŠ›å­¦è§†è§’</strong>ï¼šå¹³å‡åœºç†è®ºå°†ç¥ç»ç½‘ç»œä¼˜åŒ–è§†ä¸ºé«˜ç»´èƒ½é‡æ™¯è§‚ä¸­çš„ç²’å­è¿åŠ¨ã€‚å­¦ä¹ ç‡å¯¹åº”"æ¸©åº¦"ï¼Œbatch sizeå¯¹åº”"ç³»ç»¼å¤§å°"ã€‚å¹³å‡åœºè¿‘ä¼¼ç­‰ä»·äºå¿½ç•¥ç²’å­é—´çš„ç¬æ—¶å…³è”ï¼Œåªä¿ç•™å¹³å‡ç›¸äº’ä½œç”¨ã€‚</p>
<p><strong>éšæœºä¼˜åŒ–è§†è§’</strong>ï¼šæ¢¯åº¦å™ªå£°æºäºæœ‰é™é‡‡æ ·ï¼Œbatch sizeæ§åˆ¶é‡‡æ ·ç²¾åº¦ã€‚å¹³å‡åœºè¿‘ä¼¼å°†éšæœºä¼˜åŒ–é—®é¢˜è½¬åŒ–ä¸ºç¡®å®šæ€§é—®é¢˜ï¼Œé€šè¿‡æœŸæœ›å€¼æ›¿ä»£éšæœºé‡ï¼Œç®€åŒ–åˆ†æã€‚</p>
<p><strong>æ·±åº¦å­¦ä¹ ç†è®ºè§†è§’</strong>ï¼šåœ¨æ— é™å®½åº¦æé™ä¸‹ï¼ˆ$N \to \infty$ï¼‰ï¼Œç¥ç»ç½‘ç»œçš„è®­ç»ƒåŠ¨åŠ›å­¦å¯ä»¥ç²¾ç¡®æè¿°ä¸ºç¡®å®šæ€§çš„æ ¸æ¢¯åº¦ä¸‹é™ï¼ˆNTKï¼‰ã€‚å¹³å‡åœºè¿‘ä¼¼æ˜¯è¿™ä¸ªç²¾ç¡®ç†è®ºåœ¨æœ‰é™å®½åº¦ä¸‹çš„è¿‘ä¼¼å»¶ä¼¸ã€‚</p>
<p>è¿™ä¸‰ä¸ªè§†è§’ç›¸äº’è¡¥å……ï¼Œå…±åŒæ„æˆäº†å¯¹å­¦ä¹ ç‡scaling lawçš„å®Œæ•´ç†è§£ã€‚</p>
<h3 id="17">17. ç†è®ºå±€é™æ€§ä¸æ”¹è¿›æ–¹å‘</h3>
<p><strong>å±€é™æ€§1</strong>ï¼šåˆ†é‡ç‹¬ç«‹å‡è®¾
- å®é™…æ¢¯åº¦åˆ†é‡é—´å­˜åœ¨å¼ºç›¸å…³
- æ”¹è¿›ï¼šè€ƒè™‘åæ–¹å·®çŸ©é˜µçš„éå¯¹è§’å…ƒç´ </p>
<p><strong>å±€é™æ€§2</strong>ï¼šäºŒé˜¶è¿‘ä¼¼
- æ·±åº¦ç¥ç»ç½‘ç»œçš„æŸå¤±æ™¯è§‚é«˜åº¦éå‡¸
- æ”¹è¿›ï¼šå¼•å…¥é«˜é˜¶é¡¹æˆ–åŠ¨åŠ›å­¦ç³»ç»Ÿåˆ†æ</p>
<p><strong>å±€é™æ€§3</strong>ï¼šå¹³å‡åœºè¯¯å·®
- åœ¨æŸäº›æƒ…å†µä¸‹ï¼ˆå¦‚åˆ†å¸ƒå¤šå³°ï¼‰ï¼Œå¹³å‡åœºè¿‘ä¼¼å¤±æ•ˆ
- æ”¹è¿›ï¼šä½¿ç”¨é‡æ•´åŒ–ç¾¤æˆ–å˜åˆ†æ–¹æ³•</p>
<p>è¿™äº›æ–¹å‘ä»£è¡¨äº†å½“å‰ç ”ç©¶çš„å‰æ²¿ã€‚</p>
<hr />
<p><strong>å°ç»“</strong>ï¼šæœ¬èŠ‚æä¾›äº†å¹³å‡åœºç†è®ºåœ¨ç¥ç»ç½‘ç»œä¼˜åŒ–ä¸­åº”ç”¨çš„å®Œæ•´æ•°å­¦æ¡†æ¶ï¼Œä»åŸºæœ¬åŸç†åˆ°å…·ä½“åº”ç”¨ï¼Œä»ç†è®ºæ¨å¯¼åˆ°å®éªŒéªŒè¯ï¼Œç³»ç»Ÿåœ°å»ºç«‹äº†å­¦ä¹ ç‡ä¸Batch Sizeå…³ç³»çš„ç†è®ºåŸºç¡€ã€‚æ ¸å¿ƒè´¡çŒ®åŒ…æ‹¬ï¼š</p>
<ol>
<li>ä¸¥æ ¼æ¨å¯¼äº†SignSGDå’ŒSoftSignSGDçš„å­¦ä¹ ç‡scaling law</li>
<li>è¯æ˜äº†å¹³æ–¹æ ¹ç¼©æ”¾è§„åˆ™å’Œçº¿æ€§ç¼©æ”¾è§„åˆ™çš„ç†è®ºåŸºç¡€</li>
<li>æ­ç¤ºäº†Surgeç°è±¡çš„æ•°å­¦æœºåˆ¶</li>
<li>å»ºç«‹äº†è®­ç»ƒæ•ˆç‡çš„å°ºåº¦å®šå¾‹</li>
<li>æä¾›äº†å¤šè§’åº¦çš„ç†è®ºè§£é‡Š</li>
</ol>
<p>è¿™äº›ç»“æœä¸ä»…æ·±åŒ–äº†å¯¹ä¼˜åŒ–ç®—æ³•çš„ç†è§£ï¼Œä¹Ÿä¸ºå®è·µä¸­çš„è¶…å‚æ•°è°ƒä¼˜æä¾›äº†ç†è®ºæŒ‡å¯¼ã€‚</p>
        </div>
    </div>
</body>
</html>