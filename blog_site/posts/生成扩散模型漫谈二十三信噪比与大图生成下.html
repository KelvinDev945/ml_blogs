<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç”Ÿæˆæ‰©æ•£æ¨¡å‹æ¼«è°ˆï¼ˆäºŒåä¸‰ï¼‰ï¼šä¿¡å™ªæ¯”ä¸å¤§å›¾ç”Ÿæˆï¼ˆä¸‹ï¼‰</title>
    <style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    line-height: 1.6; color: #333; max-width: 900px; margin: 0 auto; padding: 20px; background: #f5f5f5;
}
.container { background: white; padding: 40px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
header { border-bottom: 2px solid #e0e0e0; padding-bottom: 20px; margin-bottom: 30px; }
h1 { color: #2c3e50; margin-bottom: 10px; font-size: 2em; }
.meta { color: #666; font-size: 0.9em; margin-bottom: 20px; }
.content { margin-top: 30px; overflow-wrap: break-word; }
.content h2 { color: #34495e; margin-top: 30px; margin-bottom: 15px; border-bottom: 1px solid #eee; padding-bottom: 5px; }
.content p { margin-bottom: 15px; }
.content pre { background: #f8f8f8; padding: 15px; border-radius: 5px; overflow-x: auto; border-left: 3px solid #3498db; margin: 15px 0; }
.content code { background: #f8f8f8; padding: 2px 5px; border-radius: 3px; font-family: monospace; font-size: 0.9em; }
.content blockquote { border-left: 4px solid #3498db; padding-left: 20px; margin: 20px 0; color: #555; font-style: italic; }
.content table { border-collapse: collapse; width: 100%; margin: 20px 0; }
.content th, .content td { border: 1px solid #ddd; padding: 10px; text-align: left; }
.back-link { display: inline-block; margin-bottom: 20px; color: #3498db; text-decoration: none; font-weight: 500; }
</style>
    
<script>
    window.MathJax = {
        tex: {
            inlineMath: [['$', '$'], ['\(', '\)']],
            displayMath: [['$$', '$$'], ['\[', '\]']],
            processEscapes: true
        }
    };
</script>
<script id="MathJax-script" async src="https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js"></script>

</head>
<body>
    <div class="container">
        <a href="../index.html" class="back-link">â† è¿”å›é¦–é¡µ</a>
        <header>
            <h1>ç”Ÿæˆæ‰©æ•£æ¨¡å‹æ¼«è°ˆï¼ˆäºŒåä¸‰ï¼‰ï¼šä¿¡å™ªæ¯”ä¸å¤§å›¾ç”Ÿæˆï¼ˆä¸‹ï¼‰</h1>
            <div class="meta">ğŸ“… æœ€åæ›´æ–°: 2025-11-26 | ğŸ“„ å¤§å°: 47.3 KB</div>
        </header>
        <div class="content">
            <p><strong>åŸæ–‡é“¾æ¥</strong>: <a href="https://spaces.ac.cn/archives/10055">https://spaces.ac.cn/archives/10055</a></p>
<p><strong>å‘å¸ƒæ—¥æœŸ</strong>: </p>
<hr />
<p>ä¸Šä¸€ç¯‡æ–‡ç« <a href="/archives/10047">ã€Šç”Ÿæˆæ‰©æ•£æ¨¡å‹æ¼«è°ˆï¼ˆäºŒåäºŒï¼‰ï¼šä¿¡å™ªæ¯”ä¸å¤§å›¾ç”Ÿæˆï¼ˆä¸Šï¼‰ã€‹</a>ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº†é€šè¿‡å¯¹é½ä½åˆ†è¾¨ç‡çš„ä¿¡å™ªæ¯”æ¥æ”¹è¿›noise scheduleï¼Œä»è€Œæ”¹å–„ç›´æ¥åœ¨åƒç´ ç©ºé—´è®­ç»ƒçš„é«˜åˆ†è¾¨ç‡å›¾åƒç”Ÿæˆï¼ˆå¤§å›¾ç”Ÿæˆï¼‰çš„æ‰©æ•£æ¨¡å‹æ•ˆæœã€‚è€Œè¿™ç¯‡æ–‡ç« çš„ä¸»è§’åŒæ ·æ˜¯ä¿¡å™ªæ¯”å’Œå¤§å›¾ç”Ÿæˆï¼Œä½†åšåˆ°äº†æ›´åŠ è®©äººæƒŠå¹çš„äº‹æƒ…â€”â€”ç›´æ¥å°†è®­ç»ƒå¥½ä½åˆ†è¾¨ç‡å›¾åƒçš„æ‰©æ•£æ¨¡å‹ç”¨äºé«˜åˆ†è¾¨ç‡å›¾åƒç”Ÿæˆï¼Œä¸ç”¨é¢å¤–çš„è®­ç»ƒï¼Œå¹¶ä¸”æ•ˆæœå’Œæ¨ç†æˆæœ¬éƒ½åª²ç¾ç›´æ¥è®­ç»ƒçš„å¤§å›¾æ¨¡å‹ï¼</p>
<p>è¿™ä¸ªå·¥ä½œå‡ºè‡ªæœ€è¿‘çš„è®ºæ–‡<a href="https://papers.cool/arxiv/2404.01709">ã€ŠUpsample Guidance: Scale Up Diffusion Models without Trainingã€‹</a>ï¼Œå®ƒå·§å¦™åœ°å°†ä½åˆ†è¾¨ç‡æ¨¡å‹ä¸Šé‡‡æ ·ä½œä¸ºå¼•å¯¼ä¿¡å·ï¼Œå¹¶ç»“åˆäº†CNNå¯¹çº¹ç†ç»†èŠ‚çš„å¹³ç§»ä¸å˜æ€§ï¼ŒæˆåŠŸå®ç°äº†å…è®­ç»ƒé«˜åˆ†è¾¨ç‡å›¾åƒç”Ÿæˆã€‚</p>
<h2 id="_1">æ€æƒ³æ¢è®¨</h2>
<p>æˆ‘ä»¬çŸ¥é“ï¼Œæ‰©æ•£æ¨¡å‹çš„è®­ç»ƒç›®æ ‡æ˜¯å»å™ªï¼ˆDenoiseï¼Œä¹Ÿæ˜¯DDPMçš„ç¬¬ä¸€ä¸ªDï¼‰ã€‚æŒ‰æˆ‘ä»¬çš„ç›´è§‰ï¼Œå»å™ªè¿™ä¸ªä»»åŠ¡åº”è¯¥æ˜¯åˆ†è¾¨ç‡æ— å…³çš„ï¼Œæ¢å¥è¯è¯´ï¼Œç†æƒ³æƒ…å†µä¸‹ä½åˆ†è¾¨ç‡å›¾åƒè®­ç»ƒçš„å»å™ªæ¨¡å‹åº”è¯¥ä¹Ÿèƒ½ç”¨äºé«˜åˆ†è¾¨ç‡å›¾åƒå»å™ªï¼Œä»è€Œä½åˆ†è¾¨ç‡çš„æ‰©æ•£æ¨¡å‹åº”è¯¥ä¹Ÿèƒ½ç›´æ¥ç”¨äºé«˜åˆ†è¾¨ç‡å›¾åƒç”Ÿæˆã€‚</p>
<p>æœ‰è¿™ä¹ˆç†æƒ³å—ï¼Ÿç¬”è€…ç”¨ä¹‹å‰è‡ªå·±è®­ç»ƒçš„128<em>128çš„äººè„¸å›¾åƒï¼ˆCelebA-HQï¼‰æ‰©æ•£æ¨¡å‹è¯•äº†ä¸€ä¸‹ï¼Œå³ç›´æ¥å°†å®ƒå½“æˆ256</em>256çš„æ¨¡å‹æ¥æ¨ç†ï¼Œç”Ÿæˆç»“æœçš„ç”»é£æ˜¯è¿™æ ·çš„ï¼š  </p>
<p><a href="/usr/uploads/2024/04/1541276230.jpg" title="ç‚¹å‡»æŸ¥çœ‹åŸå›¾"><img alt="å°†128åˆ†è¾¨ç‡çš„æ‰©æ•£æ¨¡å‹å½“256åˆ†è¾¨ç‡ç”¨çš„ç”Ÿæˆæ•ˆæœ" src="/usr/uploads/2024/04/1541276230.jpg" /></a></p>
<p>å°†128åˆ†è¾¨ç‡çš„æ‰©æ•£æ¨¡å‹å½“256åˆ†è¾¨ç‡ç”¨çš„ç”Ÿæˆæ•ˆæœ</p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œç”Ÿæˆç»“æœæœ‰ä¸¤ä¸ªç‰¹ç‚¹ï¼š</p>
<blockquote>
<p>1ã€ç”Ÿæˆç»“æœå·²ç»å®Œå…¨ä¸æ˜¯äººè„¸å›¾ï¼Œè¯´æ˜128<em>128è®­ç»ƒçš„å»å™ªæ¨¡å‹æ— æ³•ç›´æ¥å½“æˆ256</em>256çš„æ¥ç”¨ï¼›</p>
<p>2ã€ç”Ÿæˆç»“æœè™½ç„¶ä¸ç†æƒ³ï¼Œä½†å¾ˆæ¸…æ™°ï¼Œæ²¡æœ‰æ˜æ˜¾æ¨¡ç³Šæˆ–è€…æ£‹ç›˜æ•ˆåº”ï¼Œä¸”ä¿ç•™äº†ä¸€äº›äººè„¸çš„çº¹ç†ç»†èŠ‚ã€‚</p>
</blockquote>
<p>æˆ‘ä»¬çŸ¥é“ï¼Œç›´æ¥å°†å°å›¾æ”¾å¤§ï¼ˆä¸Šé‡‡æ ·ï¼‰ï¼Œå°±æ˜¯ä¸€ä¸ªæœ€æœ€åŸºæœ¬çš„å¤§å›¾ç”Ÿæˆæ¨¡å‹ï¼Œä½†å–å†³äºä¸Šé‡‡æ ·ç®—æ³•çš„ä¸åŒï¼Œç›´æ¥æ”¾å¤§åçš„å›¾ç‰‡é€šå¸¸éƒ½ä¼šæœ‰æ¨¡ç³Šæˆ–è€…æ£‹ç›˜æ•ˆåº”çš„å‡ºç°ï¼Œå³ç¼ºä¹è¶³å¤Ÿçš„çº¹ç†ç»†èŠ‚ã€‚è¿™æ—¶å€™ä¸€ä¸ªâ€œå¼‚æƒ³å¤©å¼€â€çš„æƒ³æ³•æ˜¯ï¼šæ—¢ç„¶å°å›¾æ”¾å¤§ç¼ºä¹ç»†èŠ‚ï¼Œè€Œç›´æ¥å°†å°å›¾æ¨¡å‹å½“å¤§å›¾æ¨¡å‹æ¨ç†ä¼šä¿ç•™ä¸€äº›ç»†èŠ‚ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯å¦ç”¨åè€…ç»™å‰è€…è¡¥å……ç»†èŠ‚ï¼Ÿ</p>
<p>è¿™å°±æ˜¯åŸè®ºæ–‡æ‰€ææ–¹æ³•çš„æ ¸å¿ƒæ€æƒ³ã€‚</p>
<h2 id="_2">æ•°å­¦æè¿°</h2>
<p>è¿™ä¸€èŠ‚æˆ‘ä»¬ç”¨å…¬å¼æŠŠæ€è·¯é‡æ–°æ•´ç†ä¸€ä¸‹ï¼Œçœ‹ä¸‹ä¸€æ­¥è¯¥æ€ä¹ˆåšã€‚</p>
<p>é¦–å…ˆç»Ÿä¸€ä¸€ä¸‹ç¬¦å·ã€‚æˆ‘ä»¬ç›®æ ‡å›¾åƒåˆ†è¾¨ç‡æ˜¯$w\times h$ï¼Œè®­ç»ƒå›¾åƒåˆ†è¾¨ç‡æ˜¯$w/s\times h/s$ï¼Œæ‰€ä»¥ä¸‹é¢çš„$\boldsymbol{x},\boldsymbol{\varepsilon}$éƒ½æ˜¯$w\times h\times 3$å¤§å°ï¼ˆå¯¹äºå›¾åƒæ¥è¯´è¿˜æœ‰ä¸ªé€šé“ç»´åº¦ï¼‰ï¼Œè€Œ$\boldsymbol{x}^{\text{low}},\boldsymbol{\varepsilon}^{\text{low}}$éƒ½æ˜¯$w\times h\times 3$å¤§å°ï¼Œ$\mathcal{D}$æ˜¯å°†$w\times h$åˆ†è¾¨ç‡å¹³å‡Poolingåˆ°$w/s\times h/s$çš„ä¸‹é‡‡æ ·ç®—å­ï¼Œ$\mathcal{U}$åˆ™æ˜¯å°†$w/s\times h/s$åˆ†è¾¨ç‡æœ€é‚»è¿‘æ’å€¼ï¼ˆå³ç›´æ¥é‡å¤ï¼‰åˆ°$w\times h$çš„ä¸Šé‡‡æ ·ç®—å­ã€‚</p>
<p>æˆ‘ä»¬çŸ¥é“ï¼Œæ‰©æ•£æ¨¡å‹éœ€è¦ä¸€ä¸ªè®­ç»ƒå¥½çš„å»å™ªæ¨¡å‹$\boldsymbol{\epsilon}<em t-1="t-1">{\boldsymbol{\theta}}(\boldsymbol{x}_t, t)$ï¼Œä»¥DDPMä¸ºä¾‹ï¼ˆè¿™é‡Œé‡‡ç”¨çš„æ˜¯<a href="/archives/9164">ã€Šç”Ÿæˆæ‰©æ•£æ¨¡å‹æ¼«è°ˆï¼ˆä¸‰ï¼‰ï¼šDDPM = è´å¶æ–¯ + å»å™ªã€‹</a>ä¸€æ–‡çš„å½¢å¼ï¼Œè·Ÿä¸»æµå½¢å¼åŸºæœ¬å¯¹é½ï¼‰ï¼Œå®ƒçš„æ¨ç†æ ¼å¼ä¸º<br />
\begin{equation}\boldsymbol{x}</em>} = \frac{1}{\alpha_t}\left(\boldsymbol{x<em _boldsymbol_theta="\boldsymbol{\theta">t - \frac{\beta_t^2}{\bar{\beta}_t}\boldsymbol{\epsilon}</em>}}(\boldsymbol{x<em t-1="t-1">t, t)\right) + \sigma_t \boldsymbol{\varepsilon},\quad \boldsymbol{\varepsilon}\sim\mathcal{N}(\boldsymbol{0}, \boldsymbol{I})\end{equation}<br />
å…¶ä¸­$\sigma_t$çš„ä¸»æµå–æ³•æ˜¯$\frac{\bar{\beta}</em>}\beta_t}{\bar{\beta<em _boldsymbol_theta="\boldsymbol{\theta">t}$æˆ–è€…$\beta_t$ã€‚ä½†ç°åœ¨æˆ‘ä»¬æ²¡æœ‰åœ¨$w\times h$åˆ†è¾¨ç‡ä¸‹è®­ç»ƒå¥½çš„$\boldsymbol{\epsilon}</em>}}(\boldsymbol{x<em _boldsymbol_theta="\boldsymbol{\theta">t, t)$ï¼Œåªæœ‰ä¸€ä¸ª$w/s\times h/s$åˆ†è¾¨ç‡ä¸‹è®­ç»ƒå¥½çš„$\boldsymbol{\epsilon}</em>, t)$ã€‚}}(\boldsymbol{x}_t^{\text{low}</p>
<p>æ ¹æ®æˆ‘ä»¬çš„ç»éªŒï¼Œå°†å¤§å›¾ç¼©å°åå†æ”¾å¤§ï¼Œè™½ç„¶ä¼šå¯¼è‡´å¤±çœŸï¼Œä½†å®ƒè¿˜å¯ä»¥ç®—æ˜¯åŸå›¾çš„ä¸€ä¸ªæ¯”è¾ƒå¥½çš„è¿‘ä¼¼ã€‚è¿™å¯å‘æˆ‘ä»¬ï¼Œå»å™ªæ¨¡å‹å¯ä»¥ç±»ä¼¼åœ°æ„å»ºå‡ºä¸€ä¸ªä¸»é¡¹å‡ºæ¥ï¼Œå…·ä½“æ¥è¯´ï¼Œä¸ºäº†å¯¹$w\times h$å¤§å°çš„å›¾åƒå»å™ªï¼Œæˆ‘ä»¬å¯ä»¥å…ˆå°†å®ƒç¼©å°ï¼ˆä¸‹é‡‡æ ·ï¼Œå¹³å‡Poolingï¼‰åˆ°$w/s\times h/s$ï¼Œç„¶åé€å…¥åœ¨$w/s\times h/s$åˆ†è¾¨ç‡è®­ç»ƒå¥½çš„å»å™ªæ¨¡å‹ä¸­è¿›è¡Œå»å™ªï¼Œæœ€åå°†å»å™ªç»“æœæ”¾å¤§ï¼ˆä¸Šé‡‡æ ·ï¼‰åˆ°$w\times h$ï¼Œè¿™æ ·è™½ç„¶ä¸æ˜¯ç†æƒ³çš„å»å™ªç»“æœï¼Œä½†åº”è¯¥å·²ç»æ˜¯ç†æƒ³ç»“æœçš„ä¸€ä¸ªä¸»é¡¹ã€‚</p>
<p>æ¥ç€ï¼Œä¸Šä¸€èŠ‚æˆ‘ä»¬æ¼”ç¤ºäº†ç›´æ¥å°†ä½åˆ†è¾¨ç‡è®­ç»ƒçš„å»å™ªæ¨¡å‹å½“æˆé«˜åˆ†è¾¨ç‡æ¨¡å‹ç”¨ï¼Œèƒ½å¤Ÿä¿ç•™ä¸€äº›çº¹ç†ç»†èŠ‚ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è®¤ä¸ºå®Œå…¨ä¸åŠ æ”¹åŠ¨çš„$\boldsymbol{\epsilon}_{\boldsymbol{\theta}}(\boldsymbol{x}_t, t)$åˆ™å¯ä»¥æ„æˆä¸€ä¸ªæç»˜ç»†èŠ‚çš„æ¬¡è¦é¡¹ã€‚æƒ³åŠæ³•å°†è¿™ä¸»ã€æ¬¡ä¸¤é¡¹æ•´åˆåœ¨ä¸€èµ·ï¼Œä¹Ÿè®¸æˆ‘ä»¬å°±å¯ä»¥å¾—åˆ°ç²¾å‡†å»å™ªæ¨¡å‹çš„ä¸€ä¸ªè¶³å¤Ÿå¥½çš„è¿‘ä¼¼ï¼Œä»è€Œå®ç°å…è®­ç»ƒçš„é«˜åˆ†è¾¨ç‡æ‰©æ•£ç”Ÿæˆã€‚</p>
<h2 id="snr">å†è¯·SNR</h2>
<p>ç°åœ¨æˆ‘ä»¬æ¥è®¨è®ºä¸»é¡¹ã€‚é¦–å…ˆæˆ‘ä»¬æ˜ç¡®ï¼Œè¿™ç¯‡æ–‡ç« å¹¶ä¸æ˜¯è¦é‡æ–°è®­ç»ƒä¸€ä¸ªé«˜åˆ†è¾¨ç‡æ¨¡å‹ï¼Œè€Œæ˜¯è¦å¤ç”¨åŸæœ¬çš„ä½åˆ†è¾¨ç‡æ¨¡å‹åˆ°é«˜åˆ†è¾¨ç‡è¾“å…¥ä¸Šï¼Œæ‰€ä»¥noise scheduleè¿˜æ˜¯åŸæ¥çš„$\bar{\alpha}<em _boldsymbol_theta="\boldsymbol{\theta">t,\bar{\beta}_t$ï¼Œäºæ˜¯æˆ‘ä»¬å¯ä»¥å‡å®šåŒæ ·æœ‰<br />
\begin{equation}\boldsymbol{x}_t = \bar{\alpha}_t \boldsymbol{x}_0 + \bar{\beta}_t \boldsymbol{\varepsilon}\end{equation}<br />
å…¶ä¸­$\boldsymbol{\varepsilon}$æ˜¯æ ‡å‡†æ­£æ€åˆ†å¸ƒçš„å‘é‡ã€‚æ ¹æ®ä¸Šä¸€èŠ‚æ‰€è¿°ï¼Œä¸»é¡¹éœ€è¦å…ˆä¸‹é‡‡æ ·åå†å»å™ªï¼Œè®¾$\mathcal{D}$ä»£è¡¨ä¸‹é‡‡æ ·åˆ°$w/s\times h/s$çš„å¹³å‡Poolingè¿ç®—ï¼Œé‚£ä¹ˆæˆ‘ä»¬æœ‰<br />
\begin{equation}\mathcal{D}[\boldsymbol{x}_t] = \bar{\alpha}_t \mathcal{D}[\boldsymbol{x}_0] + \frac{\bar{\beta}_t}{s} \boldsymbol{\varepsilon}\label{eq:dx}\end{equation}<br />
è¿™é‡Œçš„ç›¸ç­‰æŒ‡çš„æ˜¯æœä»åŒä¸€åˆ†å¸ƒã€‚åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å¼•å…¥äº†ä¿¡å™ªæ¯”$SNR(t)=\frac{\bar{\alpha}_t^2}{\bar{\beta}_t^2}$ï¼Œç”±æ­¤å¯è§$\boldsymbol{x}_t$çš„ä¿¡å™ªæ¯”æ˜¯$\frac{\bar{\alpha}_t^2}{\bar{\beta}_t^2}$ï¼Œä½†$\mathcal{D}[\boldsymbol{x}_t]$çš„ä¿¡å™ªæ¯”æ˜¯$\frac{s^2\bar{\alpha}_t^2}{\bar{\beta}_t^2}$ã€‚æ ¹æ®æœ¬æ–‡çš„è®¾ç½®ï¼Œå»å™ªæ¨¡å‹$\boldsymbol{\epsilon}</em>}}(\boldsymbol{x<em _boldsymbol_theta="\boldsymbol{\theta">t, t)$åªåœ¨noise scheduleä¸º$\bar{\alpha}_t,\bar{\beta}_t$çš„ä½åˆ†è¾¨ç‡å›¾åƒä¸Šè®­ç»ƒè¿‡ï¼Œè¿™æ„å‘³ç€$t$æ—¶åˆ»çš„$\boldsymbol{\epsilon}</em>$ï¼Œæ‰€ä»¥ç›´æ¥ç”¨$t$æ—¶åˆ»çš„æ¨¡å‹æ•ˆæœä¸æ˜¯æœ€ä½³çš„ã€‚}}(\boldsymbol{x}_t, t)$é€‚ç”¨çš„è¾“å…¥ä¿¡å™ªæ¯”æ˜¯$\frac{\bar{\alpha}_t^2}{\bar{\beta}_t^2}$ï¼Œä½†$\mathcal{D}[\boldsymbol{x}_t]$çš„ä¿¡å™ªæ¯”æ˜¯$\frac{s^2\bar{\alpha}_t^2}{\bar{\beta}_t^2</p>
<p>é‚£æ€ä¹ˆåŠå‘¢ï¼Ÿå¾ˆç®€å•ï¼Œä¿¡å™ªæ¯”éšç€æ—¶é—´$t$çš„å˜åŒ–è€Œå˜åŒ–ï¼Œæˆ‘ä»¬å¯ä»¥æ‰¾å¦ä¸€ä¸ªæ—¶åˆ»$\tau$ï¼Œä½¿å¾—å®ƒçš„ä¿¡å™ªæ¯”å°±æ˜¯$\frac{s^2\bar{\alpha}<em _tau="\tau">t^2}{\bar{\beta}_t^2}$ï¼Œä¹Ÿå°±æ˜¯è§£æ–¹ç¨‹<br />
\begin{equation}\frac{\bar{\alpha}</em>}^2}{\bar{\beta<em _boldsymbol_theta="\boldsymbol{\theta">{\tau}^2} = \frac{s^2\bar{\alpha}_t^2}{\bar{\beta}_t^2}\end{equation}<br />
è§£å‡º$\tau$åï¼Œæˆ‘ä»¬å°±å¾—åˆ°$\tau$æ—¶åˆ»çš„æ¨¡å‹æ›´é€‚åˆäºä¿¡å™ªæ¯”ä¸º$\frac{s^2\bar{\alpha}_t^2}{\bar{\beta}_t^2}$çš„è¾“å…¥ï¼Œäºæ˜¯$\mathcal{D}[\boldsymbol{x}_t]$çš„å»å™ªåº”è¯¥é€‚ç”¨$\tau$æ—¶åˆ»è€Œä¸æ˜¯$t$æ—¶åˆ»çš„æ¨¡å‹ã€‚æ­¤å¤–ï¼Œ$\mathcal{D}[\boldsymbol{x}_t]$æœ¬èº«è¿˜å¯ä»¥æ”¹è¿›ä¸€ä¸‹ï¼Œä»å¼$\eqref{eq:dx}$å¯ä»¥å‘ç°å½“$s &gt; 1$æ—¶ä¸¤ä¸ªç³»æ•°å¹³æ–¹å’Œ$\rho_t^2=\bar{\alpha}_t^2+\frac{\bar{\beta}_t^2}{s^2}$ä¸å†æ˜¯1ï¼Œè€Œè®­ç»ƒé˜¶æ®µçš„ç³»æ•°å¹³æ–¹å’Œéƒ½æ˜¯1ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°†å®ƒé™¤ä»¥$\rho_t$ï¼Œä½¿å…¶æ›´æ¥è¿‘è®­ç»ƒç»“æœçš„å½¢å¼ã€‚æœ€ç»ˆç”±$\mathcal{D}[\boldsymbol{x}_t]$æ„å»ºçš„å»å™ªæ¨¡å‹ä¸»é¡¹åº”è¯¥æ˜¯<br />
\begin{equation}\boldsymbol{\epsilon}</em>}}\left(\frac{\mathcal{D}[\boldsymbol{x}_t]}{\rho_t}, \tau\right)\label{eq:down-denoise}\end{equation</p>
<h2 id="_3">åˆ†è§£è¿‘ä¼¼</h2>
<p>ç°åœ¨æœ‰ä¸¤ä¸ªå»å™ªæ¨¡å‹å¯ä»¥ç”¨ï¼Œä¸€é¡¹æ˜¯ç›´æ¥å°†ä½åˆ†è¾¨ç‡æ¨¡å‹$\boldsymbol{\epsilon}<em _boldsymbol_theta="\boldsymbol{\theta">{\boldsymbol{\theta}}(\boldsymbol{x}_t^{\text{low}}, t)$å½“é«˜åˆ†è¾¨ç‡ç”¨çš„$\boldsymbol{\epsilon}</em>$ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±å¯ä»¥å°è¯•å°†å®ƒä»¬ç»„è£…èµ·æ¥äº†ã€‚}}(\boldsymbol{x}_t, t)$ï¼Œå¦ä¸€é¡¹æ˜¯ä¸Šä¸€èŠ‚æ¨å‡ºæ¥çš„å…ˆä¸‹é‡‡æ ·å†å»å™ªçš„æ¨¡å‹$\eqref{eq:down-denoise</p>
<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªç»è¿‡é«˜åˆ†è¾¨ç‡å›¾åƒè®­ç»ƒè¿‡çš„å®Œç¾å»å™ªæ¨¡å‹$\boldsymbol{\epsilon}^{\text{high}}(\boldsymbol{x}<em _text_ä½åˆ†è¾¨ç‡ä¸»é¡¹="\text{ä½åˆ†è¾¨ç‡ä¸»é¡¹">t, t)$ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å°†å®ƒåˆ†è§£ä¸º<br />
\begin{equation}\boldsymbol{\epsilon}^{\text{high}}(\boldsymbol{x}_t, t) = \underbrace{\color{red}{\mathcal{U}\left[\mathcal{D}\left[\boldsymbol{\epsilon}^{\text{high}}(\boldsymbol{x}_t, t)\right]\right]}}</em>}} + \underbrace{\Big\{\color{green}{\boldsymbol{\epsilon}^{\text{high}}(\boldsymbol{x<em _text_é«˜åˆ†è¾¨ç‡ç»†èŠ‚é¡¹="\text{é«˜åˆ†è¾¨ç‡ç»†èŠ‚é¡¹">t, t) - \mathcal{U}\left[\mathcal{D}\left[\boldsymbol{\epsilon}^{\text{high}}(\boldsymbol{x}_t, t)\right]\right]}\Big\}}</em>}}\end{equation<br />
å’‹çœ‹ä¸Šå»ï¼Œè¿™ä¸ªåˆ†è§£åªæ˜¯ç®€å•çš„æ’ç­‰å˜æ¢ï¼Œä½†å®é™…ä¸Šå®ƒæœ‰éå¸¸ç›´è§‚çš„æ„ä¹‰ï¼šç¬¬ä¸€é¡¹æ˜¯å°†ç²¾ç¡®çš„é‡æ„ç»“æœå…ˆä¸‹é‡‡æ ·ç„¶åä¸Šé‡‡æ ·ï¼Œè¯´ç™½äº†å…ˆç¼©å°åæ”¾å¤§ï¼Œè¿™æ˜¯ä¸€ä¸ªæœ‰æŸå˜æ¢ï¼Œä½†å¾—åˆ°çš„ç»“æœè¿˜æ˜¯è¶³ä»¥æç»˜ä¸»ä½“è½®å»“ï¼Œæ‰€ä»¥å®ƒæ˜¯ä¸»é¡¹ï¼›ç¬¬äºŒé¡¹åˆ™æ˜¯å°†ç²¾ç¡®ç»“æœå‡å»ä¸»ä½“è½®å»“ï¼Œå¾—åˆ°çš„å¾ˆæ˜æ˜¾å°±ä»£è¡¨ç€å±€éƒ¨ç»†èŠ‚ã€‚</p>
<p>ç»“åˆæˆ‘ä»¬ä¹‹å‰è®¨è®ºçš„æ€è·¯ï¼Œæˆ‘ä»¬è®¤ä¸ºä¸Šä¸€èŠ‚æ‰€ç»™å‡ºçš„å¼$\eqref{eq:down-denoise}$æ˜¯ä½åˆ†è¾¨ç‡ä¸»é¡¹çš„ä¸€ä¸ªè‰¯å¥½è¿‘ä¼¼ï¼Œæ‰€ä»¥æˆ‘ä»¬å†™å‡º<br />
\begin{equation}\mathcal{D}\left[\boldsymbol{\epsilon}^{\text{high}}(\boldsymbol{x}<em _boldsymbol_theta="\boldsymbol{\theta">t, t)\right]\approx \frac{1}{s}\boldsymbol{\epsilon}</em>}}\left(\frac{\mathcal{D}[\boldsymbol{x<em _boldsymbol_theta="\boldsymbol{\theta">t]}{\rho_t}, \tau\right)\end{equation}<br />
æ³¨æ„ä¸èƒ½æ¼äº†å‰é¢çš„å› å­$1/s$ï¼Œè¿™æ˜¯å› ä¸ºå»å™ªæ¨¡å‹é€šå¸¸é¢„æµ‹çš„æ˜¯æ ‡å‡†æ­£æ€å™ªå£°ï¼ˆå³$\boldsymbol{\varepsilon}$ï¼‰ï¼Œå› æ­¤å®ƒçš„è¾“å‡ºæœ¬èº«è¿‘ä¼¼æ»¡è¶³é›¶å‡å€¼å’Œå•ä½æ–¹å·®ï¼Œç»è¿‡ä¸‹é‡‡æ ·$\mathcal{D}$ä¹‹åæ–¹å·®å˜ä¸º$1/s^2$ï¼Œè€Œ$\boldsymbol{\epsilon}</em>$çš„è¾“å‡ºåŒæ ·æ˜¯å•ä½æ–¹å·®çš„ï¼Œæ‰€ä»¥è¦é™¤ä»¥$s$ä½¿å¾—æ–¹å·®å˜ä¸º$1/s^2$ï¼Œä»¥æé«˜è¿‘ä¼¼ç¨‹åº¦ã€‚}</p>
<p>å¯¹äºé«˜åˆ†è¾¨ç‡ç»†èŠ‚é¡¹ï¼Œæˆ‘ä»¬åˆ™å†™å‡ºï¼š<br />
\begin{equation}\boldsymbol{\epsilon}^{\text{high}}(\boldsymbol{x}<em _boldsymbol_theta="\boldsymbol{\theta">t, t) - \mathcal{U}\left[\mathcal{D}\left[\boldsymbol{\epsilon}^{\text{high}}(\boldsymbol{x}_t, t)\right]\right]\approx \boldsymbol{\epsilon}</em>}}(\boldsymbol{x<em _boldsymbol_theta="\boldsymbol{\theta">t, t) - \mathcal{U}\left[\mathcal{D}\left[\boldsymbol{\epsilon}</em>}}(\boldsymbol{x<em _boldsymbol_theta="\boldsymbol{\theta">t, t)\right]\right]\end{equation}<br />
è¿™åŒæ ·æ˜¯åŸºäºå‰é¢è®¨è®ºçš„æ€è·¯â€”â€”ç›´æ¥å°†ä½åˆ†è¾¨ç‡å»å™ªæ¨¡å‹å½“é«˜åˆ†è¾¨ç‡æ¨¡å‹ç”¨ï¼Œå…¶ä¸­çº¹ç†ç»†èŠ‚çš„åœ°æ–¹ä¿ç•™å¾—æ¯”è¾ƒå¥½ï¼Œæ‰€ä»¥æˆ‘ä»¬è®¤ä¸ºå¯¹äºé«˜åˆ†è¾¨ç‡ç»†èŠ‚ï¼Œ$\boldsymbol{\epsilon}</em>$çš„ä¸€ä¸ªè‰¯å¥½è¿‘ä¼¼ã€‚}}$å°±æ˜¯$\boldsymbol{\epsilon}^{\text{high}</p>
<p>ç»¼åˆè¿™ä¸¤é¡¹è¿‘ä¼¼ï¼Œæˆ‘ä»¬å°±å¯ä»¥å®Œæ•´åœ°å†™å‡ºï¼š<br />
\begin{equation}\boldsymbol{\epsilon}^{\text{high}}(\boldsymbol{x}<em _boldsymbol_theta="\boldsymbol{\theta">t, t)\approx \frac{1}{s}\mathcal{U}\left[\boldsymbol{\epsilon}</em>}}\left(\frac{\mathcal{D}[\boldsymbol{x<em _boldsymbol_theta="\boldsymbol{\theta">t]}{\rho_t}, \tau\right) \right]+ \Big\{\boldsymbol{\epsilon}</em>}}(\boldsymbol{x<em _boldsymbol_theta="\boldsymbol{\theta">t, t) - \mathcal{U}\left[\mathcal{D}\left[\boldsymbol{\epsilon}</em>}}(\boldsymbol{x<em _boldsymbol_theta="\boldsymbol{\theta">t, t)\right]\right]\Big\}\triangleq \boldsymbol{\epsilon}</em>}}^{\text{approx}}(\boldsymbol{x}_t, t)\label{eq:high-key}\end{equation<br />
è¿™å°±æ˜¯æˆ‘ä»¬è¦å¯»æ‰¾çš„é«˜åˆ†è¾¨ç‡å»å™ªæ¨¡å‹çš„å…³é”®è¿‘ä¼¼ï¼</p>
<p>äº‹å®ä¸Šï¼Œç›´æ¥ç”¨å¼$\eqref{eq:high-key}$æ¥ç”Ÿæˆé«˜åˆ†è¾¨ç‡å›¾å·²ç»æœ‰ä¸é”™çš„æ•ˆæœäº†ï¼Œä½†æˆ‘ä»¬è¿˜å¯ä»¥å¼•å…¥ä¸€ä¸ªå¯è°ƒçš„è¶…å‚æ•°ï¼Œä½¿å…¶å¯ä»¥åšå¾—æ›´å¥½ä¸€äº›ã€‚å…·ä½“æ€è·¯æ˜¯æ¨¡ä»¿<a href="/archives/9257">ã€Šç”Ÿæˆæ‰©æ•£æ¨¡å‹æ¼«è°ˆï¼ˆä¹ï¼‰ï¼šæ¡ä»¶æ§åˆ¶ç”Ÿæˆç»“æœã€‹</a>é€šè¿‡æ— æ¡ä»¶æ¨¡å‹æ¥åŠ å¼ºæ¡ä»¶ç”Ÿæˆçš„åšæ³•ï¼Œæˆ‘ä»¬å°†$\boldsymbol{\epsilon}<em _boldsymbol_theta="\boldsymbol{\theta">{\boldsymbol{\theta}}^{\text{approx}}(\boldsymbol{x}_t, t)$çœ‹æˆæ˜¯æ¡ä»¶å»å™ªæ¨¡å‹ï¼Œå…¶ä¸­å¼•å¯¼ä¿¡å·å°±æ˜¯ä½åˆ†è¾¨ç‡ä¸Šé‡‡æ ·çš„ä¸»é¡¹ï¼ˆå³è®ºæ–‡æ ‡é¢˜çš„â€œ<strong>Upsample Guidance</strong> â€ï¼Œç®€ç§°UGï¼‰ï¼Œè€Œ$\boldsymbol{\epsilon}</em>}}(\boldsymbol{x<em _boldsymbol_theta="\boldsymbol{\theta">t, t)$åˆ™çœ‹æˆæ˜¯æ— æ¡ä»¶å»å™ªæ¨¡å‹ï¼Œæˆ‘ä»¬è¦åŠ å¼ºæ¡ä»¶ï¼Œæ‰€ä»¥å¼•å…¥å¯è°ƒå‚æ•°$w &gt; 0$ï¼Œå°†æœ€ç»ˆæ‰€ç”¨çš„å»å™ªæ¨¡å‹è¡¨ç¤ºä¸º<br />
\begin{equation}\begin{aligned}<br />
\tilde{\boldsymbol{\epsilon}}</em>}}(\boldsymbol{x<em _boldsymbol_theta="\boldsymbol{\theta">t, t) =&amp;\, (1 + w)\, \boldsymbol{\epsilon}</em>}}^{\text{approx}}(\boldsymbol{x<em _boldsymbol_theta="\boldsymbol{\theta">t, t) - w\,\boldsymbol{\epsilon}</em>}}(\boldsymbol{x<em _boldsymbol_theta="\boldsymbol{\theta">t, t) \\\<br />
=&amp;\, \boldsymbol{\epsilon}</em>}}(\boldsymbol{x<em _boldsymbol_theta="\boldsymbol{\theta">t, t) + (1 + w)\mathcal{U}\left[\frac{1}{s}\boldsymbol{\epsilon}</em>}}\left(\frac{\mathcal{D}[\boldsymbol{x<em _boldsymbol_theta="\boldsymbol{\theta">t]}{\rho_t}, \tau\right) - \mathcal{D}\left[\boldsymbol{\epsilon}</em>_t, t)\right]\right]}}(\boldsymbol{x<br />
\end{aligned}\end{equation}<br />
æ ¹æ®åŸè®ºæ–‡çš„å®éªŒç»“æœï¼Œ$w=0.2$é™„è¿‘çš„æ•ˆæœæ¯”è¾ƒå¥½ã€‚</p>
<h2 id="ldm">LDMæ‰©å±•</h2>
<p>è™½ç„¶åœ¨å½¢å¼ä¸Šå‰è¿°ç»“æœä¼¼ä¹ä¸åŒºåˆ†æ˜¯Pixelç©ºé—´çš„æ‰©æ•£æ¨¡å‹è¿˜æ˜¯éšç©ºé—´çš„æ‰©æ•£æ¨¡å‹ï¼ˆLDMï¼‰ï¼Œä½†äº‹å®ä¸Šä»ç†è®ºçš„è§’åº¦çœ‹å‰è¿°ç»“æœåªé€‚ç”¨äºPixelç©ºé—´çš„æ‰©æ•£æ¨¡å‹ï¼ŒLDMå¤šäº†ä¸€ä¸ªéçº¿æ€§çš„Encoderï¼Œå¤§å›¾ç»è¿‡Encoderä¹‹åçš„ç‰¹å¾ï¼ŒPoolingä¹‹åæœªå¿…ç­‰äºå°å›¾ç»è¿‡Encoderä¹‹åçš„ç‰¹å¾ï¼Œå› æ­¤æˆ‘ä»¬é€šè¿‡å…ˆä¸‹é‡‡æ ·åä¸Šé‡‡æ ·æ¥è¿‘ä¼¼æ„å»ºé«˜åˆ†è¾¨ç‡å»å™ªæ¨¡å‹çš„ä¸»é¡¹è¿™ä¸€å‡è®¾æœªå¿…è¿˜æˆç«‹ã€‚</p>
<p>ä¸ºäº†è§‚å¯ŸLDMåœºæ™¯ä¸‹æœ‰ä»€ä¹ˆä¸åŒä¹‹å¤„ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åŸè®ºæ–‡çš„ä¸¤ä¸ªå®éªŒç»“æœã€‚ç¬¬ä¸€ä¸ªæ˜¯å°†Encoderçš„ç‰¹å¾ä¸Š/ä¸‹é‡‡æ ·åé€å…¥Decoderåçš„é‡å»ºç»“æœï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ç»“æœæ˜¾ç¤ºä¸ç®¡æ˜¯ä¸Šé‡‡æ ·è¿˜æ˜¯ä¸‹é‡‡æ ·ï¼Œç›´æ¥åœ¨ç‰¹å¾ç©ºé—´è¿›è¡Œæ­¤ç±»æ“ä½œï¼Œéƒ½ä¼šå¯¼è‡´å›¾åƒçš„åŠ£åŒ–ï¼Œè¿™æ„å‘³ç€å…ˆé€šè¿‡ä¸‹é‡‡æ ·å»å™ªç„¶åä¸Šé‡‡æ ·æ„å»ºçš„ä¸»é¡¹æƒé‡æˆ–è®¸è¦é€‚å½“é™ä½ã€‚  </p>
<p><a href="/usr/uploads/2024/04/4080809890.jpg" title="ç‚¹å‡»æŸ¥çœ‹åŸå›¾"><img alt="å¯¹Encoderçš„ç‰¹å¾è¿›è¡Œä¸Š:ä¸‹é‡‡æ ·ï¼Œéƒ½ä¼šå¯¼è‡´Decoderçš„ç»“æœåŠ£åŒ–" src="/usr/uploads/2024/04/4080809890.jpg" /></a></p>
<p>å¯¹Encoderçš„ç‰¹å¾è¿›è¡Œä¸Š:ä¸‹é‡‡æ ·ï¼Œéƒ½ä¼šå¯¼è‡´Decoderçš„ç»“æœåŠ£åŒ–</p>
<p>ç¬¬äºŒä¸ªå®éªŒæ˜¯ç›´æ¥å°†ä½åˆ†è¾¨ç‡çš„LDMä¸åŠ æ”¹åŠ¨åœ°å½“é«˜åˆ†è¾¨ç‡æ¨¡å‹ç”¨ï¼Œå…¶ç»“æœé€å…¥Decoderåçš„ç”Ÿæˆç»“æœå¯ä»¥å‚è€ƒä¸‹å›¾çš„â€œw/o UGâ€éƒ¨åˆ†ã€‚å¯ä»¥çœ‹åˆ°ï¼Œè·ŸPixelç©ºé—´çš„æ‰©æ•£æ¨¡å‹ä¸åŒï¼Œå¤§ä½“æ˜¯å¾—ç›ŠäºDecoderå¯¹ç‰¹å¾çš„é²æ£’æ€§ï¼ŒLDMåœºæ™¯ä¸‹$\boldsymbol{\epsilon}_{\boldsymbol{\theta}}(\boldsymbol{x}_t, t)$ç›´æ¥å½“é«˜åˆ†è¾¨ç‡æ¨¡å‹ç”¨çš„æ•ˆæœç†æƒ³å¾ˆå¤šï¼Œè¯­ä¹‰å’Œæ¸…æ™°åº¦éƒ½æœ‰æ˜æ˜¾ä¿è¯ï¼Œåªæ˜¯ä¸ªåˆ«åœ°æ–¹å‡ºç°äº†ä¸€äº›â€œç•¸å½¢â€ã€‚  </p>
<p><a href="/usr/uploads/2024/04/3665451017.jpg" title="ç‚¹å‡»æŸ¥çœ‹åŸå›¾"><img alt="æ˜¯å¦åŠ Upsample Guidanceï¼ˆUGï¼‰çš„å°å›¾LDMç”¨äºç”Ÿæˆå¤§å›¾çš„æ•ˆæœåŒºåˆ«" src="/usr/uploads/2024/04/3665451017.jpg" /></a></p>
<p>æ˜¯å¦åŠ Upsample Guidanceï¼ˆUGï¼‰çš„å°å›¾LDMç”¨äºç”Ÿæˆå¤§å›¾çš„æ•ˆæœåŒºåˆ«</p>
<p>åŸºäºè¿™ä¸¤ä¸ªå®éªŒç»“è®ºï¼ŒåŸè®ºæ–‡å°†LDMåœºæ™¯ä¸‹çš„$w$æ”¹ä¸ºè·Ÿæ—¶é—´$t$ç›¸å…³çš„å‡½æ•°ï¼š<br />
\begin{equation}w_t = \left\{\begin{aligned}<br />
w,\quad t \geq (1-\eta) T \\\<br />
-1,\quad t &lt; (1-\eta) T<br />
\end{aligned}\right.\end{equation}<br />
å½“$w = -1$æ—¶ï¼ŒUpsample Guidanceå°±ç­‰ä»·äºä¸å­˜åœ¨ï¼Œè¿™å°±ç›¸å½“äºè¯´Upsample GuidanceåªåŠ åœ¨æ‰©æ•£å‰æœŸï¼Œè¿™æ—¢èƒ½å¤Ÿåœ¨å‰æœŸé€šè¿‡Upsample Guidanceæ›´å¥½åœ°é˜²æ­¢ç•¸å½¢ï¼Œåˆèƒ½å¤Ÿåœ¨åæœŸå……åˆ†åˆ©ç”¨$\boldsymbol{\epsilon}_{\boldsymbol{\theta}}(\boldsymbol{x}_t, t)$ç”Ÿæˆæ›´æ¸…æ™°é”åˆ©çš„ç»“æœï¼ŒåŒæ—¶è¿˜èŠ‚çœè®¡ç®—é‡ï¼Œå¯è°“â€œä¸€ç®­ä¸‰é›•â€äº†ã€‚</p>
<h2 id="_4">æ•ˆæœæ¼”ç¤º</h2>
<p>ç»ˆäºæ¥åˆ°å®éªŒç¯èŠ‚äº†ã€‚å…¶å®ä¸Šä¸€èŠ‚çš„å›¾ç‰‡ä¸­çš„â€œw/ UGâ€éƒ¨åˆ†ï¼Œå·²ç»æ¼”ç¤ºäº†Upsample Guidanceåœ¨LDMåœºæ™¯çš„æ•ˆæœï¼Œå¯ä»¥çœ‹åˆ°Upsample Guidanceç¡®å®èƒ½çº æ­£$\boldsymbol{\epsilon}_{\boldsymbol{\theta}}(\boldsymbol{x}_t, t)$ç›´æ¥ç”¨äºé«˜åˆ†è¾¨ç‡ç”Ÿæˆå¸¦æ¥çš„ç•¸å½¢ï¼ŒåŒæ—¶ä¿è¯è¯­ä¹‰çš„æ­£ç¡®æ€§å’Œå›¾åƒçš„æ¸…æ™°åº¦ã€‚</p>
<p>è‡³äºPixelç©ºé—´çš„ç”Ÿæˆæ•ˆæœï¼Œåˆ™å¯ä»¥å‚è€ƒä¸‹å›¾ï¼š  </p>
<p><a href="/usr/uploads/2024/04/170650603.jpg" title="ç‚¹å‡»æŸ¥çœ‹åŸå›¾"><img alt="åŸè®ºæ–‡æ¼”ç¤ºçš„Upsample Guidanceåœ¨Pixelæ‰©æ•£æ¨¡å‹ä¸Šçš„æ•ˆæœ" src="/usr/uploads/2024/04/170650603.jpg" /></a></p>
<p>åŸè®ºæ–‡æ¼”ç¤ºçš„Upsample Guidanceåœ¨Pixelæ‰©æ•£æ¨¡å‹ä¸Šçš„æ•ˆæœ</p>
<p>ç”±äºUpsample Guidanceçš„å­˜åœ¨ï¼Œæ•´ä¸ªæ–¹æ³•æœ‰ç‚¹åƒæ˜¯å…ˆç”Ÿæˆä½åˆ†è¾¨ç‡å›¾åƒç„¶åé€šè¿‡è¶…åˆ†è¾¨ç‡æ–¹æ³•ç”Ÿæˆé«˜æ¸…å›¾ï¼Œåªä¸è¿‡å®ƒæ˜¯ä»¥æ— ç›‘ç£çš„æ–¹æ³•è¿›è¡Œï¼Œæ‰€ä»¥åŸºæœ¬ä¸Šå¯ä»¥ä¿è¯FIDç­‰ä¸å·®äºä½åˆ†è¾¨ç‡çš„ç”Ÿæˆç»“æœï¼š  </p>
<p><a href="/usr/uploads/2024/04/1524392205.jpg" title="ç‚¹å‡»æŸ¥çœ‹åŸå›¾"><img alt="FIDæŒ‡æ ‡ä¸è¶…å‚æ•°å…³ç³»ï¼ˆå®ƒè¿™é‡Œçš„wtå’ŒÎ¸ç­‰äºæœ¬æ–‡çš„wåŠ ä¸Š1ï¼‰" src="/usr/uploads/2024/04/1524392205.jpg" /></a></p>
<p>FIDæŒ‡æ ‡ä¸è¶…å‚æ•°å…³ç³»ï¼ˆå®ƒè¿™é‡Œçš„wtå’ŒÎ¸ç­‰äºæœ¬æ–‡çš„wåŠ ä¸Š1ï¼‰</p>
<p>æœ€åï¼Œç¬”è€…ä¹Ÿç”¨è‡ªå·±ä¹‹å‰è®­ç»ƒçš„128*128çš„CelebAäººè„¸æ‰©æ•£æ¨¡å‹è¿›è¡Œäº†å°è¯•ï¼Œè¿›ä¸€æ­¥è‚¯å®šäº†Upsample Guidanceçš„æœ‰æ•ˆæ€§ï¼š  </p>
<p><a href="/usr/uploads/2024/04/362843156.jpg" title="ç‚¹å‡»æŸ¥çœ‹åŸå›¾"><img alt="ä¸ªäººå®éªŒæ•ˆæœã€‚å·¦è¾¹æ˜¯è®­ç»ƒåˆ†è¾¨ç‡ï¼ˆ128ï¼‰ç”Ÿæˆæ•ˆæœï¼Œä¸­ã€å³åˆ†åˆ«æ˜¯Upsample Guidanceç”Ÿæˆçš„256ã€512åˆ†è¾¨ç‡ç”Ÿæˆæ•ˆæœ" src="/usr/uploads/2024/04/362843156.jpg" /></a></p>
<p>ä¸ªäººå®éªŒæ•ˆæœã€‚å·¦è¾¹æ˜¯è®­ç»ƒåˆ†è¾¨ç‡ï¼ˆ128ï¼‰ç”Ÿæˆæ•ˆæœï¼Œä¸­ã€å³åˆ†åˆ«æ˜¯Upsample Guidanceç”Ÿæˆçš„256ã€512åˆ†è¾¨ç‡ç”Ÿæˆæ•ˆæœ</p>
<p>æ•ˆæœä¸Šï¼Œè‚¯å®šä¸å¦‚ç›´æ¥è®­ç»ƒçš„é«˜åˆ†è¾¨ç‡æ¨¡å‹ï¼Œä½†æ¯”ä½åˆ†è¾¨ç‡å›¾ç›´æ¥æ”¾å¤§æ•ˆæœè¦å¥½ï¼›æ¨ç†æˆæœ¬ä¸Šï¼Œç›¸æ¯”äºå°†$\boldsymbol{\epsilon}_{\boldsymbol{\theta}}(\boldsymbol{x}_t, t)$ç”¨é«˜åˆ†è¾¨ç‡å›¾åƒè®­ç»ƒåç›´æ¥ç”¨äºç”Ÿæˆï¼ŒUpsample Guidanceå¤šäº†ä¸€é¡¹ä½åˆ†è¾¨ç‡çš„è®¡ç®—ï¼Œè®¡ç®—æˆæœ¬çš„å¢åŠ æ¯”ä¾‹å¤§è‡´ä¸Šæ˜¯$1/s^2$ï¼Œå¦‚æœæ˜¯LDMåˆ™ç”±äºç”ŸæˆåæœŸä¸åŠ å…¥Upsample Guidanceï¼Œå› æ­¤è¿™ä¸ªæ¯”ä¾‹è¿˜æ›´å°‘ã€‚æ€»çš„æ¥è¯´ï¼ŒUpsample Guidanceç§°å¾—ä¸Šæ˜¯æˆæœ¬åˆç†çš„å¤§å›¾ç”Ÿæˆå…è´¹åˆé¤äº†ã€‚</p>
<h2 id="_5">æ€è€ƒåˆ†æ</h2>
<p>çœ‹å®ŒUpsample Guidanceæ•´ä¸ªæ¡†æ¶ï¼Œä¸çŸ¥é“å¤§å®¶çš„æ„Ÿå—æ˜¯ä»€ä¹ˆï¼Ÿç¬”è€…çš„æ„Ÿè§‰æ˜¯éå¸¸åƒç‰©ç†å­¦å®¶çš„é£æ ¼ï¼Œå¤©é©¬è¡Œç©ºã€å¤§èƒ†å‡è®¾ä½†åˆåœ¨æ— å½¢ä¹‹ä¸­æŠŠæ¡ä½äº†æœ¬è´¨ã€‚è¿™ç±»å·¥ä½œè®©ç¬”è€…å†™ä¸ªè§£è¯»æˆ–è®¸æ²¡å•¥é—®é¢˜ï¼Œä½†è‡ªå·±ç‹¬ç«‹æƒ³å‡ºæ¥çš„è¯æ˜¯ä¸‡ä¸‡ä¸å¯èƒ½çš„ï¼Œå› ä¸ºç¬”è€…å……å…¶é‡ä¹Ÿåªæœ‰ä¸€ç‚¹å¾ˆæ­»æ¿çš„æ•°å­¦æ€ç»´ã€‚</p>
<p>å…³äºUpsample Guidanceçš„ä¸€ä¸ªå¾ˆè‡ªç„¶çš„ç–‘é—®æ˜¯ï¼šå®ƒæœ‰æ•ˆçš„åŸå› ç©¶ç«Ÿæ˜¯ä»€ä¹ˆï¼Ÿä»¥ç¬”è€…åœ¨Pixelç©ºé—´è®­ç»ƒçš„CelelbAäººè„¸ç”Ÿæˆæ¨¡å‹ä¸ºä¾‹ï¼Œå®ƒåªåœ¨128<em>128çš„å°å›¾ä¸Šè®­ç»ƒè¿‡ï¼Œå®Œå…¨æ²¡è§è¿‡256</em>256çš„å¤§å›¾ï¼Œé‚£å®ƒä¸ºä»€ä¹ˆèƒ½æ°å¦‚å…¶åˆ†åœ°ç”Ÿæˆç¬¦åˆæˆ‘ä»¬è®¤çŸ¥çš„256<em>256å¤§å›¾ï¼Ÿæ³¨æ„è¿™è¿˜è·ŸImageNetä¸åŒï¼ŒImageNetæ•°æ®é›†æ˜¯ä¸€ä¸ªå¤šå°ºåº¦çš„æ•°æ®é›†ï¼Œæ¯”å¦‚ä¸€å¼ 128</em>128çš„å›¾ï¼Œå®ƒå¯èƒ½æ˜¯ä¸€æ¡é±¼ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªäººæ‰‹é‡Œæ‹¿ç€ä¸€æ¡é±¼ï¼Œä¹Ÿå°±æ˜¯è¯´è™½ç„¶éƒ½æ˜¯128*128çš„è¾“å…¥ï¼Œä½†å®ƒè§è¿‡ä¸åŒæ¯”ä¾‹çš„é±¼ï¼Œä»è€Œèƒ½æ›´å¥½åœ°é€‚åº”ä¸åŒçš„åˆ†è¾¨ç‡ï¼Œä½†CelelbAä¸ä¸€æ ·ï¼Œå®ƒæ˜¯å•å°ºåº¦çš„æ•°æ®é›†ï¼Œæ‰€æœ‰äººè„¸çš„å¤§å°ã€ä½ç½®ã€æœå‘éƒ½æ˜¯å¯¹é½çš„ï¼Œä½†å³ä¾¿å¦‚æ­¤ï¼ŒUpsample Guidanceä¾ç„¶å¯ä»¥æˆåŠŸåœ°å°†å®ƒæ³›åŒ–åˆ°äº†</p>
<p>ç¬”è€…è®¤ä¸ºï¼Œè¿™å¤šå°‘è·ŸDIPï¼ˆ<a href="https://papers.cool/arxiv/1711.10925">Deep Image Prior</a>ï¼‰æœ‰ç‚¹è”ç³»ã€‚DIPçš„å¤§è‡´æ„æ€æ˜¯è¯´ï¼ŒCVå¸¸ç”¨çš„CNNæ¨¡å‹ï¼Œå…¶æ¶æ„æœ¬èº«å°±å·²ç»ç»è¿‡é«˜åº¦ç­›é€‰ï¼Œéå¸¸å¥‘åˆè§†è§‰æœ¬èº«ï¼Œæ‰€ä»¥å“ªæ€•ä¸ç»è¿‡çœŸå®æ•°æ®è®­ç»ƒçš„æ¨¡å‹ï¼Œä¹Ÿèƒ½å¤Ÿå®Œæˆä¸€äº›è§†è§‰ä»»åŠ¡ï¼Œå¦‚å»å™ªã€è¡¥å…¨ç”šè‡³ç®€å•çš„è¶…åˆ†ç­‰ã€‚Upsample Guidanceå¯ä»¥è®©å®Œå…¨æ²¡è§è¿‡å¤§å›¾çš„æ‰©æ•£æ¨¡å‹ç”ŸæˆåŸºæœ¬åˆä¹è®¤çŸ¥çš„å¤§å›¾ï¼Œçœ‹ä¸Šå»ä¹Ÿæ˜¯å¾—ç›ŠäºCNNæœ¬èº«çš„æ¶æ„å…ˆéªŒã€‚ç®€å•æ¥è®²ï¼Œæ­£å¦‚æœ¬æ–‡ç¬¬ä¸€èŠ‚æ‰€å®éªŒçš„ï¼ŒUpsample Guidanceä¾èµ–äºç›´æ¥å°†ä½åˆ†è¾¨ç‡æ¨¡å‹å½“é«˜åˆ†è¾¨ç‡æ¨¡å‹ç”¨ï¼Œç”Ÿæˆç»“æœè‡³å°‘ä¿ç•™äº†ä¸€äº›æœ‰æ•ˆçš„çº¹ç†ç»†èŠ‚ï¼Œè¿™ä¸€ç‚¹å¹¶ä¸æ˜¯å¹³å‡¡çš„æ€§è´¨ã€‚</p>
<p>ä¸ºäº†éªŒè¯è¿™ä¸€ç‚¹ï¼Œç¬”è€…ç‰¹æ„å»æ‹¿ä¹‹å‰è®­ç»ƒçš„çº¯Transformeræ‰©æ•£æ¨¡å‹ï¼ˆæœ‰ç‚¹ç±»ä¼¼DiT + RoPE-2Dï¼‰å»å°è¯•äº†ä¸€ä¸‹ï¼Œå‘ç°å®Œå…¨ä¸èƒ½é‡ç°Upsample Guidanceçš„æ•ˆæœï¼Œè¿™è¡¨æ˜å®ƒè‡³å°‘æ˜¯å¯¹CNN-basedçš„U-Netæ¨¡å‹æ¶æ„æœ‰æ‰€ä¾èµ–çš„ã€‚ä¸è¿‡ç”¨Transformerçš„è¯»è€…ä¹Ÿä¸ç”¨ç°å¿ƒï¼Œå®ƒè™½ç„¶ä¸èƒ½èµ°Upsample Guidanceçš„è·¯çº¿ï¼Œä½†å¯ä»¥èµ°NLPçš„<a href="/archives/9948">é•¿åº¦å¤–æ¨</a>çš„è·¯çº¿ã€‚<a href="https://papers.cool/arxiv/2402.12376">ã€ŠFiT: Flexible Vision Transformer for Diffusion Modelã€‹</a>ä¸€æ–‡è¡¨æ˜ï¼Œé€šè¿‡Transformer + RoPE-2Dçš„ç»„åˆè®­ç»ƒæ‰©æ•£æ¨¡å‹ï¼Œå¯ä»¥å¤ç”¨NTKã€YaRNç­‰é•¿åº¦å¤–æ¨æŠ€æœ¯ï¼Œè¾¾åˆ°å…è®­ç»ƒæˆ–è€…æå°‘é‡çš„å¾®è°ƒå°±å¯ä»¥ç”Ÿæˆé«˜åˆ†è¾¨ç‡å›¾çš„æ•ˆæœã€‚</p>
<h2 id="_6">æ–‡ç« å°ç»“</h2>
<p>è¿™ç¯‡æ–‡ç« ä»‹ç»äº†ä¸€ä¸ªåä¸ºUpsample Guidanceçš„æŠ€å·§ï¼Œå®ƒå¯ä»¥è®©è®­ç»ƒå¥½çš„ä½åˆ†è¾¨ç‡æ‰©æ•£æ¨¡å‹ç›´æ¥ç”Ÿæˆé«˜åˆ†è¾¨ç‡å›¾ç‰‡ï¼Œè€Œä¸éœ€è¦é¢å¤–çš„å¾®è°ƒæˆæœ¬ï¼Œå®éªŒæ˜¾ç¤ºå®ƒåŸºæœ¬ä¸Šèƒ½ç¨³å®šæé«˜è‡³å°‘1å€çš„åˆ†è¾¨ç‡ï¼Œè™½ç„¶æ•ˆæœç¦»ç›´æ¥è®­ç»ƒçš„é«˜åˆ†è¾¨ç‡æ‰©æ•£æ¨¡å‹è¿˜æœ‰ç‚¹å·®è·ï¼Œä½†è¿™è¿‘ä¹å…è´¹çš„åˆé¤ä¾ç„¶å€¼å¾—å­¦ä¹ ä¸€ç•ªã€‚æœ¬æ–‡ä»ç¬”è€…çš„è§’åº¦é‡æ–°æ•´ç†äº†è¯¥æ–¹æ³•çš„æ€è·¯å’Œæ¨å¯¼ï¼Œå¹¶ç»™å‡ºäº†å…³äºå…¶æœ‰æ•ˆæ€§åŸå› çš„æ€è€ƒã€‚</p>
<p>ï¼ˆ<strong>åè®°ï¼š</strong> äº‹å®ä¸Šï¼ŒæŒ‰ç…§æœ€åˆçš„è®¡åˆ’ï¼Œè¿™ç¯‡æ–‡ç« æ˜¯åœ¨ä¸¤å¤©å‰å‘å¸ƒçš„ï¼Œä¹‹æ‰€ä»¥æ¨è¿Ÿäº†ä¸¤å¤©ï¼Œæ˜¯å› ä¸ºåœ¨å†™ä½œè¿‡ç¨‹ä¸­ç¬”è€…å‘ç°å¾ˆå¤šå¼€å§‹è‡ªä»¥ä¸ºç†è§£çš„ç»†èŠ‚ï¼Œå®é™…ä¸Šè¿˜å«ç³Šä¸æ¸…ï¼Œæ‰€ä»¥å¤šèŠ±äº†ä¸¤å¤©æ—¶é—´è¿›è¡Œæ¨å¯¼å’Œå®éªŒï¼Œä»¥è·å¾—æ›´ç²¾å‡†çš„ç†è§£ã€‚ç”±æ­¤å¯è§ï¼Œå°†è¦å­¦ä¹ çš„ä¸œè¥¿ç³»ç»Ÿæ¸…æ™°åœ°é‡è¿°å‡ºæ¥ï¼Œæœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªä¸æ–­è‡ªæˆ‘å®Œå–„å’Œæ”¹è¿›çš„è¿‡ç¨‹ï¼Œè¿™å¤§æ¦‚å°±æ˜¯åšæŒå†™ä½œçš„æ„ä¹‰æ‰€åœ¨å§ã€‚ï¼‰</p>
<p><em><strong>è½¬è½½åˆ°è¯·åŒ…æ‹¬æœ¬æ–‡åœ°å€ï¼š</strong><a href="https://spaces.ac.cn/archives/10055">https://spaces.ac.cn/archives/10055</a></em></p>
<p><em><strong>æ›´è¯¦ç»†çš„è½¬è½½äº‹å®œè¯·å‚è€ƒï¼š</strong></em><a href="https://spaces.ac.cn/archives/6508#%E6%96%87%E7%AB%A0%E5%A6%82%E4%BD%95%E8%BD%AC%E8%BD%BD/%E5%BC%95%E7%94%A8" title="ã€Šç§‘å­¦ç©ºé—´FAQã€‹">ã€Šç§‘å­¦ç©ºé—´FAQã€‹</a></p>
<p><strong>å¦‚æœæ‚¨è¿˜æœ‰ä»€ä¹ˆç–‘æƒ‘æˆ–å»ºè®®ï¼Œæ¬¢è¿åœ¨ä¸‹æ–¹è¯„è®ºåŒºç»§ç»­è®¨è®ºã€‚</strong></p>
<p><strong>å¦‚æœæ‚¨è§‰å¾—æœ¬æ–‡è¿˜ä¸é”™ï¼Œæ¬¢è¿åˆ†äº«/æ‰“èµæœ¬æ–‡ã€‚æ‰“èµå¹¶éè¦ä»ä¸­è·å¾—æ”¶ç›Šï¼Œè€Œæ˜¯å¸Œæœ›çŸ¥é“ç§‘å­¦ç©ºé—´è·å¾—äº†å¤šå°‘è¯»è€…çš„çœŸå¿ƒå…³æ³¨ã€‚å½“ç„¶ï¼Œå¦‚æœä½ æ— è§†å®ƒï¼Œä¹Ÿä¸ä¼šå½±å“ä½ çš„é˜…è¯»ã€‚å†æ¬¡è¡¨ç¤ºæ¬¢è¿å’Œæ„Ÿè°¢ï¼</strong></p>
<p>æ‰“èµ</p>
<p><img alt="ç§‘å­¦ç©ºé—´" src="https://spaces.ac.cn/usr/themes/geekg/payment/wx.png" /></p>
<p>å¾®ä¿¡æ‰“èµ</p>
<p><img alt="ç§‘å­¦ç©ºé—´" src="https://spaces.ac.cn/usr/themes/geekg/payment/zfb.png" /></p>
<p>æ”¯ä»˜å®æ‰“èµ</p>
<p>å› ä¸ºç½‘ç«™åå°å¯¹æ‰“èµå¹¶æ— è®°å½•ï¼Œå› æ­¤æ¬¢è¿åœ¨æ‰“èµæ—¶å€™å¤‡æ³¨ç•™è¨€ã€‚ä½ è¿˜å¯ä»¥<a href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&amp;email=tN7d1drY3drrx8H0xcWa19vZ"><strong>ç‚¹å‡»è¿™é‡Œ</strong></a>æˆ–åœ¨ä¸‹æ–¹è¯„è®ºåŒºç•™è¨€æ¥å‘ŠçŸ¥ä½ çš„å»ºè®®æˆ–éœ€æ±‚ã€‚</p>
<p><strong>å¦‚æœæ‚¨éœ€è¦å¼•ç”¨æœ¬æ–‡ï¼Œè¯·å‚è€ƒï¼š</strong></p>
<p>è‹å‰‘æ—. (Apr. 17, 2024). ã€Šç”Ÿæˆæ‰©æ•£æ¨¡å‹æ¼«è°ˆï¼ˆäºŒåä¸‰ï¼‰ï¼šä¿¡å™ªæ¯”ä¸å¤§å›¾ç”Ÿæˆï¼ˆä¸‹ï¼‰ ã€‹[Blog post]. Retrieved from <a href="https://spaces.ac.cn/archives/10055">https://spaces.ac.cn/archives/10055</a></p>
<p>@online{kexuefm-10055,<br />
title={ç”Ÿæˆæ‰©æ•£æ¨¡å‹æ¼«è°ˆï¼ˆäºŒåä¸‰ï¼‰ï¼šä¿¡å™ªæ¯”ä¸å¤§å›¾ç”Ÿæˆï¼ˆä¸‹ï¼‰},<br />
author={è‹å‰‘æ—},<br />
year={2024},<br />
month={Apr},<br />
url={\url{https://spaces.ac.cn/archives/10055}},<br />
} </p>
<hr />
<h2 id="_7">å…¬å¼æ¨å¯¼ä¸æ³¨é‡Š</h2>
<h3 id="1-snr">1. æ ¸å¿ƒæ¦‚å¿µï¼šä¿¡å™ªæ¯”(SNR)ä¸åˆ†è¾¨ç‡</h3>
<h4 id="11">1.1 ä¿¡å™ªæ¯”çš„å®šä¹‰</h4>
<p>åœ¨æ‰©æ•£æ¨¡å‹ä¸­ï¼ŒåŠ å™ªè¿‡ç¨‹ä¸ºï¼š
\begin{equation}
\boldsymbol{x}_t = \bar{\alpha}_t \boldsymbol{x}_0 + \bar{\beta}_t \boldsymbol{\varepsilon}, \quad \boldsymbol{\varepsilon} \sim \mathcal{N}(\boldsymbol{0}, \boldsymbol{I}) \tag{1}
\end{equation}</p>
<p><strong>ä¿¡å™ªæ¯”(Signal-to-Noise Ratio)</strong>å®šä¹‰ä¸ºï¼š
\begin{equation}
\text{SNR}(t) = \frac{\text{ä¿¡å·æ–¹å·®}}{\text{å™ªå£°æ–¹å·®}} = \frac{\bar{\alpha}_t^2}{\bar{\beta}_t^2} \tag{2}
\end{equation}</p>
<p><strong>æ•°å­¦æ€§è´¨</strong>ï¼š
- $\mathbb{E}[\boldsymbol{x}_t | \boldsymbol{x}_0] = \bar{\alpha}_t \boldsymbol{x}_0$ ï¼ˆä¿¡å·éƒ¨åˆ†ï¼‰
- $\text{Var}[\boldsymbol{x}_t | \boldsymbol{x}_0] = \bar{\beta}_t^2 \boldsymbol{I}$ ï¼ˆå™ªå£°éƒ¨åˆ†ï¼‰
- SNRè¶Šå¤§ï¼Œä¿¡å·è¶Šå¼ºï¼Œå™ªå£°è¶Šå¼±</p>
<h4 id="12">1.2 ä¸‹é‡‡æ ·å¯¹ä¿¡å™ªæ¯”çš„å½±å“</h4>
<p>è®¾$\mathcal{D}$ä¸ºå°† $w\times h$ ç¼©å°åˆ° $w/s \times h/s$ çš„å¹³å‡æ± åŒ–ç®—å­ã€‚å¯¹åŠ å™ªå›¾åƒä¸‹é‡‡æ ·ï¼š</p>
<p>\begin{equation}
\mathcal{D}[\boldsymbol{x}_t] = \mathcal{D}[\bar{\alpha}_t \boldsymbol{x}_0 + \bar{\beta}_t \boldsymbol{\varepsilon}] = \bar{\alpha}_t \mathcal{D}[\boldsymbol{x}_0] + \bar{\beta}_t \mathcal{D}[\boldsymbol{\varepsilon}] \tag{3}
\end{equation}</p>
<p><strong>å…³é”®è§‚å¯Ÿ</strong>ï¼šä¸‹é‡‡æ ·ä¼šé™ä½å™ªå£°å¼ºåº¦ï¼</p>
<p><strong>è¯æ˜</strong>ï¼šå¹³å‡æ± åŒ–å¯¹æ ‡å‡†æ­£æ€å™ªå£°çš„å½±å“
\begin{equation}
\mathcal{D}[\boldsymbol{\varepsilon}] = \frac{1}{s^2}\sum_{i=1}^{s^2} \boldsymbol{\varepsilon}_i \tag{4}
\end{equation}</p>
<p>å¦‚æœæ¯ä¸ª $\boldsymbol{\varepsilon}<em i="1">i \sim \mathcal{N}(0, 1)$ ç‹¬ç«‹ï¼Œåˆ™ï¼š
\begin{equation}
\begin{aligned}
\mathbb{E}[\mathcal{D}[\boldsymbol{\varepsilon}]] &amp;= \frac{1}{s^2}\sum</em>}^{s^2}\mathbb{E}[\boldsymbol{\varepsilon<em i="1">i] = 0 \
\text{Var}[\mathcal{D}[\boldsymbol{\varepsilon}]] &amp;= \frac{1}{s^4}\sum</em>
\end{aligned} \tag{5}
\end{equation}}^{s^2}\text{Var}[\boldsymbol{\varepsilon}_i] = \frac{s^2}{s^4} = \frac{1}{s^2</p>
<p>å› æ­¤ï¼š
\begin{equation}
\mathcal{D}[\boldsymbol{\varepsilon}] \sim \mathcal{N}\left(0, \frac{1}{s^2}\boldsymbol{I}\right) \tag{6}
\end{equation}</p>
<p><strong>ä¸‹é‡‡æ ·åçš„åŠ å™ªå…¬å¼</strong>ï¼š
\begin{equation}
\mathcal{D}[\boldsymbol{x}_t] = \bar{\alpha}_t \mathcal{D}[\boldsymbol{x}_0] + \frac{\bar{\beta}_t}{s} \boldsymbol{\varepsilon}', \quad \boldsymbol{\varepsilon}' \sim \mathcal{N}(\boldsymbol{0}, \boldsymbol{I}) \tag{7}
\end{equation}</p>
<p><strong>ä¸‹é‡‡æ ·åçš„ä¿¡å™ªæ¯”</strong>ï¼š
\begin{equation}
\text{SNR}_{\text{down}}(t) = \frac{\bar{\alpha}_t^2}{(\bar{\beta}_t/s)^2} = s^2 \cdot \frac{\bar{\alpha}_t^2}{\bar{\beta}_t^2} = s^2 \cdot \text{SNR}(t) \tag{8}
\end{equation}</p>
<p><strong>ç»“è®º</strong>ï¼šä¸‹é‡‡æ ·ä¼šä½¿ä¿¡å™ªæ¯”æé«˜ $s^2$ å€ï¼</p>
<h3 id="2">2. ä¿¡å™ªæ¯”å¯¹é½åŸç†</h3>
<h4 id="21">2.1 é—®é¢˜é™ˆè¿°</h4>
<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªåœ¨ $w/s \times h/s$ åˆ†è¾¨ç‡è®­ç»ƒçš„å»å™ªæ¨¡å‹ $\boldsymbol{\epsilon}_{\boldsymbol{\theta}}(\boldsymbol{x}_t^{\text{low}}, t)$ï¼Œå®ƒé€‚åº”çš„noise scheduleä¸º $(\bar{\alpha}_t, \bar{\beta}_t)$ã€‚</p>
<p>ç°åœ¨è¦å°†å…¶åº”ç”¨äº $w \times h$ åˆ†è¾¨ç‡çš„å›¾åƒå»å™ªã€‚ç›´æ¥ä½¿ç”¨ä¼šé‡åˆ°é—®é¢˜ï¼š
- åœ¨ $t$ æ—¶åˆ»ï¼Œé«˜åˆ†è¾¨ç‡å›¾åƒçš„SNRæ˜¯ $\frac{\bar{\alpha}_t^2}{\bar{\beta}_t^2}$
- ä¸‹é‡‡æ ·åçš„SNRæ˜¯ $\frac{s^2\bar{\alpha}_t^2}{\bar{\beta}_t^2}$
- æ¨¡å‹åœ¨è®­ç»ƒæ—¶æ²¡è§è¿‡è¿™ä¹ˆé«˜çš„SNRï¼</p>
<h4 id="22">2.2 æ—¶é—´é‡æ˜ å°„</h4>
<p><strong>æ ¸å¿ƒæ€æƒ³</strong>ï¼šæ‰¾åˆ°å¦ä¸€ä¸ªæ—¶é—´ $\tau$ï¼Œä½¿å¾— $\tau$ æ—¶åˆ»çš„SNRç­‰äºä¸‹é‡‡æ ·åçš„SNRã€‚</p>
<p><strong>ä¿¡å™ªæ¯”å¯¹é½æ–¹ç¨‹</strong>ï¼š
\begin{equation}
\text{SNR}(\tau) = s^2 \cdot \text{SNR}(t) \tag{9}
\end{equation}</p>
<p>å³ï¼š
\begin{equation}
\frac{\bar{\alpha}<em _tau="\tau">{\tau}^2}{\bar{\beta}</em>
\end{equation}}^2} = s^2 \cdot \frac{\bar{\alpha}_t^2}{\bar{\beta}_t^2} \tag{10</p>
<p><strong>æ±‚è§£ $\tau$</strong>ï¼š</p>
<p>å¯¹äºå¸¸è§çš„noise scheduleï¼Œä¾‹å¦‚çº¿æ€§scheduleï¼š
\begin{equation}
\bar{\alpha}<em _min="\min">t = \sqrt{1 - \beta</em>
\end{equation}} - t(\beta_{\max} - \beta_{\min})} \tag{11</p>
<p>å¯ä»¥é€šè¿‡æ•°å€¼æ–¹æ³•æˆ–æŸ¥è¡¨æ±‚è§£æ–¹ç¨‹(10)å¾—åˆ° $\tau(t, s)$ã€‚</p>
<p><strong>ç¤ºä¾‹</strong>ï¼ˆ$s=2$ï¼Œçº¿æ€§scheduleï¼‰ï¼š
- $t = 0.5$ æ—¶ï¼Œ$\text{SNR}(0.5) \approx 10$
- ä¸‹é‡‡æ ·å $\text{SNR}_{\text{down}} = 4 \times 10 = 40$
- éœ€è¦æ‰¾ $\tau$ ä½¿å¾— $\text{SNR}(\tau) = 40$
- è§£å¾— $\tau \approx 0.25$ï¼ˆæ›´æ—©çš„æ—¶åˆ»ï¼Œå™ªå£°æ›´å°‘ï¼‰</p>
<h3 id="3-upsample-guidance">3. Upsample Guidanceçš„æ•°å­¦æ¨å¯¼</h3>
<h4 id="31-">3.1 ä¸»é¡¹ï¼šä¸‹é‡‡æ ·-å»å™ª-ä¸Šé‡‡æ ·</h4>
<p>è®° $\mathcal{U}$ ä¸ºä» $w/s \times h/s$ ä¸Šé‡‡æ ·åˆ° $w \times h$ çš„æœ€è¿‘é‚»æ’å€¼ç®—å­ã€‚</p>
<p><strong>ä¸»é¡¹æ„é€ </strong>ï¼š
\begin{equation}
\boldsymbol{\epsilon}<em _boldsymbol_theta="\boldsymbol{\theta">{\text{main}}(\boldsymbol{x}_t, t) = \frac{1}{s} \mathcal{U}\left[\boldsymbol{\epsilon}</em>
\end{equation}}}\left(\frac{\mathcal{D}[\boldsymbol{x}_t]}{\rho_t}, \tau\right)\right] \tag{12</p>
<p>å…¶ä¸­ $\rho_t = \sqrt{\bar{\alpha}_t^2 + \bar{\beta}_t^2/s^2}$ æ˜¯å½’ä¸€åŒ–å› å­ã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦å½’ä¸€åŒ–ï¼Ÿ</strong></p>
<p>ä»å¼(7)å¯çŸ¥ï¼Œ$\mathcal{D}[\boldsymbol{x}_t]$ çš„ç³»æ•°å¹³æ–¹å’Œä¸ºï¼š
\begin{equation}
\bar{\alpha}_t^2 + \frac{\bar{\beta}_t^2}{s^2} = \rho_t^2 \tag{13}
\end{equation}</p>
<p>è€Œè®­ç»ƒæ—¶çš„åŠ å™ªå…¬å¼ç³»æ•°å¹³æ–¹å’Œä¸º1ï¼š
\begin{equation}
\bar{\alpha}_t^2 + \bar{\beta}_t^2 = 1 \tag{14}
\end{equation}</p>
<p>å½’ä¸€åŒ–åï¼š
\begin{equation}
\frac{\mathcal{D}[\boldsymbol{x}_t]}{\rho_t} = \frac{\bar{\alpha}_t}{\rho_t} \mathcal{D}[\boldsymbol{x}_0] + \frac{\bar{\beta}_t}{s\rho_t} \boldsymbol{\varepsilon}' \tag{15}
\end{equation}</p>
<p>ç³»æ•°å¹³æ–¹å’Œï¼š
\begin{equation}
\left(\frac{\bar{\alpha}_t}{\rho_t}\right)^2 + \left(\frac{\bar{\beta}_t}{s\rho_t}\right)^2 = \frac{\bar{\alpha}_t^2 + \bar{\beta}_t^2/s^2}{\rho_t^2} = 1 \tag{16}
\end{equation}</p>
<p><strong>ä¸ºä»€ä¹ˆæœ‰å› å­ $1/s$ï¼Ÿ</strong></p>
<p>å»å™ªæ¨¡å‹é¢„æµ‹çš„å™ªå£° $\boldsymbol{\epsilon}_{\boldsymbol{\theta}}$ æ»¡è¶³å•ä½æ–¹å·®ã€‚ä¸‹é‡‡æ ·åæ–¹å·®å˜ä¸º $1/s^2$ï¼š
\begin{equation}
\text{Var}[\mathcal{D}[\boldsymbol{\epsilon}]] = \frac{1}{s^2} \tag{17}
\end{equation}</p>
<p>å› æ­¤éœ€è¦é™¤ä»¥ $s$ ä½¿æ–¹å·®åŒ¹é…ï¼š
\begin{equation}
\text{Var}\left[\frac{1}{s}\mathcal{U}[\boldsymbol{\epsilon}]\right] = \frac{1}{s^2} \tag{18}
\end{equation}</p>
<h4 id="32">3.2 æ¬¡é¡¹ï¼šé«˜é¢‘ç»†èŠ‚è¡¥å¿</h4>
<p>ç›´æ¥å°†ä½åˆ†è¾¨ç‡æ¨¡å‹åº”ç”¨äºé«˜åˆ†è¾¨ç‡ä¼šä¿ç•™ä¸€äº›ç»†èŠ‚ã€‚å®šä¹‰æ¬¡é¡¹ä¸ºï¼š
\begin{equation}
\boldsymbol{\epsilon}<em _boldsymbol_theta="\boldsymbol{\theta">{\text{detail}}(\boldsymbol{x}_t, t) = \boldsymbol{\epsilon}</em>}}(\boldsymbol{x<em _boldsymbol_theta="\boldsymbol{\theta">t, t) - \mathcal{U}[\mathcal{D}[\boldsymbol{\epsilon}</em>
\end{equation}}}(\boldsymbol{x}_t, t)]] \tag{19</p>
<p><strong>æ•°å­¦ç›´è§‰</strong>ï¼š
- $\boldsymbol{\epsilon}<em _boldsymbol_theta="\boldsymbol{\theta">{\boldsymbol{\theta}}(\boldsymbol{x}_t, t)$ï¼šç›´æ¥åœ¨é«˜åˆ†è¾¨ç‡ä¸Šå»å™ªï¼ˆåŒ…å«å…¨éƒ¨é¢‘ç‡ï¼‰
- $\mathcal{U}[\mathcal{D}[\boldsymbol{\epsilon}</em>_t, t)]]$ï¼šå…ˆä¸‹é‡‡æ ·å†ä¸Šé‡‡æ ·ï¼ˆåªä¿ç•™ä½é¢‘ï¼‰
- ä¸¤è€…ä¹‹å·®ï¼šé«˜é¢‘ç»†èŠ‚ï¼ˆçº¹ç†ã€è¾¹ç¼˜ï¼‰}}(\boldsymbol{x</p>
<p><strong>é¢‘ç‡åŸŸåˆ†æ</strong>ï¼š</p>
<p>è®° $\mathcal{F}$ ä¸ºå‚…é‡Œå¶å˜æ¢ï¼Œ$\omega$ ä¸ºé¢‘ç‡ã€‚ä¸‹é‡‡æ ·-ä¸Šé‡‡æ ·ç›¸å½“äºä½é€šæ»¤æ³¢å™¨ï¼š
\begin{equation}
\mathcal{F}<a href="\omega">\mathcal{U}[\mathcal{D}[\boldsymbol{x}]]</a> = H_{\text{low}}(\omega) \cdot \mathcal{F}<a href="\omega">\boldsymbol{x}</a> \tag{20}
\end{equation}</p>
<p>å…¶ä¸­ $H_{\text{low}}(\omega)$ æ˜¯ä½é€šæ»¤æ³¢å™¨ï¼š
\begin{equation}
H_{\text{low}}(\omega) = \begin{cases}
1, &amp; \text{if } |\omega| \leq \omega_{\text{cutoff}} \
0, &amp; \text{otherwise}
\end{cases} \tag{21}
\end{equation}</p>
<p>å› æ­¤ï¼š
\begin{equation}
\mathcal{F}<a href="\omega">\boldsymbol{\epsilon}_{\text{detail}}</a> = (1 - H_{\text{low}}(\omega)) \cdot \mathcal{F}<a href="\omega">\boldsymbol{\epsilon}_{\boldsymbol{\theta}}</a> \tag{22}
\end{equation}</p>
<p>è¿™æ­£æ˜¯é«˜é¢‘æˆåˆ†ï¼</p>
<h4 id="33">3.3 ç»„åˆå»å™ªæ¨¡å‹</h4>
<p><strong>å®Œæ•´çš„è¿‘ä¼¼å»å™ªæ¨¡å‹</strong>ï¼š
\begin{equation}
\begin{aligned}
\boldsymbol{\epsilon}<em _text_main="\text{main">{\boldsymbol{\theta}}^{\text{approx}}(\boldsymbol{x}_t, t) &amp;= \boldsymbol{\epsilon}</em>}} + \boldsymbol{\epsilon<em _boldsymbol_theta="\boldsymbol{\theta">{\text{detail}} \
&amp;= \frac{1}{s}\mathcal{U}\left[\boldsymbol{\epsilon}</em>}}\left(\frac{\mathcal{D}[\boldsymbol{x<em _boldsymbol_theta="\boldsymbol{\theta">t]}{\rho_t}, \tau\right)\right] \
&amp;\quad + \boldsymbol{\epsilon}</em>}}(\boldsymbol{x<em _boldsymbol_theta="\boldsymbol{\theta">t, t) - \mathcal{U}[\mathcal{D}[\boldsymbol{\epsilon}</em>_t, t)]]
\end{aligned} \tag{23}
\end{equation}}}(\boldsymbol{x</p>
<p><strong>åŒ–ç®€</strong>ï¼š
\begin{equation}
\boldsymbol{\epsilon}<em _boldsymbol_theta="\boldsymbol{\theta">{\boldsymbol{\theta}}^{\text{approx}}(\boldsymbol{x}_t, t) = \boldsymbol{\epsilon}</em>}}(\boldsymbol{x<em _boldsymbol_theta="\boldsymbol{\theta">t, t) + \mathcal{U}\left[\frac{1}{s}\boldsymbol{\epsilon}</em>}}\left(\frac{\mathcal{D}[\boldsymbol{x<em _boldsymbol_theta="\boldsymbol{\theta">t]}{\rho_t}, \tau\right) - \mathcal{D}[\boldsymbol{\epsilon}</em>
\end{equation}}}(\boldsymbol{x}_t, t)]\right] \tag{24</p>
<h3 id="4-classifier-free-guidance">4. Classifier-free Guidanceé£æ ¼çš„å¢å¼º</h3>
<h4 id="41">4.1 å¼•å¯¼å¼ºåº¦è°ƒèŠ‚</h4>
<p>å€Ÿé‰´Classifier-free Guidanceçš„æ€æƒ³ï¼Œå¼•å…¥å¯è°ƒå‚æ•° $w$ï¼š
\begin{equation}
\tilde{\boldsymbol{\epsilon}}<em _boldsymbol_theta="\boldsymbol{\theta">{\boldsymbol{\theta}}(\boldsymbol{x}_t, t) = (1+w) \boldsymbol{\epsilon}</em>}}^{\text{approx}}(\boldsymbol{x<em _boldsymbol_theta="\boldsymbol{\theta">t, t) - w \boldsymbol{\epsilon}</em>
\end{equation}}}(\boldsymbol{x}_t, t) \tag{25</p>
<p><strong>å±•å¼€</strong>ï¼š
\begin{equation}
\begin{aligned}
\tilde{\boldsymbol{\epsilon}}<em _text_main="\text{main">{\boldsymbol{\theta}} &amp;= (1+w)[\boldsymbol{\epsilon}</em>}} + \boldsymbol{\epsilon<em _boldsymbol_theta="\boldsymbol{\theta">{\text{detail}}] - w\boldsymbol{\epsilon}</em> \
&amp;= (1+w)\boldsymbol{\epsilon}}<em _text_detail="\text{detail">{\text{main}} + (1+w)\boldsymbol{\epsilon}</em>}} - w\boldsymbol{\epsilon<em _text_main="\text{main">{\boldsymbol{\theta}} \
&amp;= (1+w)\boldsymbol{\epsilon}</em>}} + (1+w)[\boldsymbol{\epsilon<em _boldsymbol_theta="\boldsymbol{\theta">{\boldsymbol{\theta}} - \mathcal{U}\mathcal{D}[\boldsymbol{\epsilon}</em>}}]] - w\boldsymbol{\epsilon<em _text_main="\text{main">{\boldsymbol{\theta}} \
&amp;= (1+w)\boldsymbol{\epsilon}</em>}} + \boldsymbol{\epsilon<em _boldsymbol_theta="\boldsymbol{\theta">{\boldsymbol{\theta}} - (1+w)\mathcal{U}\mathcal{D}[\boldsymbol{\epsilon}</em>]
\end{aligned} \tag{26}
\end{equation}}</p>
<p><strong>æœ€ç»ˆå½¢å¼</strong>ï¼š
\begin{equation}
\tilde{\boldsymbol{\epsilon}}<em _boldsymbol_theta="\boldsymbol{\theta">{\boldsymbol{\theta}}(\boldsymbol{x}_t, t) = \boldsymbol{\epsilon}</em>}}(\boldsymbol{x<em _boldsymbol_theta="\boldsymbol{\theta">t, t) + (1+w)\mathcal{U}\left[\frac{1}{s}\boldsymbol{\epsilon}</em>}}\left(\frac{\mathcal{D}[\boldsymbol{x<em _boldsymbol_theta="\boldsymbol{\theta">t]}{\rho_t}, \tau\right) - \mathcal{D}[\boldsymbol{\epsilon}</em>
\end{equation}}}(\boldsymbol{x}_t, t)]\right] \tag{27</p>
<h4 id="42-w">4.2 å‚æ•° $w$ çš„ä½œç”¨åˆ†æ</h4>
<p><strong>$w$ çš„ä¸åŒå–å€¼</strong>ï¼š</p>
<ol>
<li>
<p><strong>$w = 0$ï¼ˆæ ‡å‡†UGï¼‰</strong>ï¼š
   \begin{equation}
   \tilde{\boldsymbol{\epsilon}} = \boldsymbol{\epsilon}_{\boldsymbol{\theta}}^{\text{approx}} \tag{28}
   \end{equation}</p>
</li>
<li>
<p><strong>$w = -1$ï¼ˆæ— å¼•å¯¼ï¼‰</strong>ï¼š
   \begin{equation}
   \tilde{\boldsymbol{\epsilon}} = \boldsymbol{\epsilon}_{\boldsymbol{\theta}} \tag{29}
   \end{equation}
   å®Œå…¨é€€åŒ–ä¸ºç›´æ¥ä½¿ç”¨ä½åˆ†è¾¨ç‡æ¨¡å‹</p>
</li>
<li>
<p><strong>$w &gt; 0$ï¼ˆå¢å¼ºå¼•å¯¼ï¼‰</strong>ï¼š
   \begin{equation}
   \tilde{\boldsymbol{\epsilon}} = \boldsymbol{\epsilon}<em _tau="\tau">{\boldsymbol{\theta}} + (1+w)\Delta\boldsymbol{\epsilon} \tag{30}
   \end{equation}
   å…¶ä¸­ $\Delta\boldsymbol{\epsilon} = \mathcal{U}[\frac{1}{s}\boldsymbol{\epsilon}</em>_t]]$ æ˜¯ä¿®æ­£é¡¹} - \mathcal{D}[\boldsymbol{\epsilon</p>
</li>
</ol>
<p><strong>æœ€ä¼˜ $w$ çš„é€‰æ‹©</strong>ï¼š</p>
<p>æ ¹æ®åŸè®ºæ–‡å®éªŒï¼Œ$w \approx 0.2$ æ•ˆæœæœ€å¥½ã€‚è¿™å¯ä»¥é€šè¿‡FIDæ›²çº¿éªŒè¯ï¼š
\begin{equation}
w^* = \arg\min_{w} \text{FID}(w) \tag{31}
\end{equation}</p>
<h3 id="5-ddpm">5. DDPMé‡‡æ ·çš„å®Œæ•´æµç¨‹</h3>
<h4 id="51-ddpm">5.1 æ ‡å‡†DDPMé‡‡æ ·</h4>
<p>å›é¡¾æ ‡å‡†DDPMçš„é‡‡æ ·å…¬å¼ï¼š
\begin{equation}
\boldsymbol{x}<em _boldsymbol_theta="\boldsymbol{\theta">{t-1} = \frac{1}{\alpha_t}\left(\boldsymbol{x}_t - \frac{\beta_t^2}{\bar{\beta}_t}\boldsymbol{\epsilon}</em>
\end{equation}}}(\boldsymbol{x}_t, t)\right) + \sigma_t \boldsymbol{z}, \quad \boldsymbol{z} \sim \mathcal{N}(\boldsymbol{0}, \boldsymbol{I}) \tag{32</p>
<p>å…¶ä¸­ï¼š
- $\alpha_t = 1 - \beta_t$
- $\bar{\beta}<em t-1="t-1">t = \sqrt{1 - \bar{\alpha}_t^2}$
- $\sigma_t = \frac{\bar{\beta}</em>$ æˆ– $\sigma_t = \beta_t$} \beta_t}{\bar{\beta}_t</p>
<h4 id="52-ug">5.2 ä½¿ç”¨UGçš„é‡‡æ ·</h4>
<p>å°† $\boldsymbol{\epsilon}<em _boldsymbol_theta="\boldsymbol{\theta">{\boldsymbol{\theta}}$ æ›¿æ¢ä¸º $\tilde{\boldsymbol{\epsilon}}</em>$ï¼š}</p>
<p>\begin{equation}
\boldsymbol{x}<em _boldsymbol_theta="\boldsymbol{\theta">{t-1} = \frac{1}{\alpha_t}\left(\boldsymbol{x}_t - \frac{\beta_t^2}{\bar{\beta}_t}\tilde{\boldsymbol{\epsilon}}</em>
\end{equation}}}(\boldsymbol{x}_t, t)\right) + \sigma_t \boldsymbol{z} \tag{33</p>
<p><strong>å±•å¼€UGé¡¹</strong>ï¼š
\begin{equation}
\begin{aligned}
&amp;\boldsymbol{x}<em _boldsymbol_theta="\boldsymbol{\theta">{t-1} = \frac{1}{\alpha_t}\Bigg(\boldsymbol{x}_t - \frac{\beta_t^2}{\bar{\beta}_t}\boldsymbol{\epsilon}</em>}}(\boldsymbol{x<em _boldsymbol_theta="\boldsymbol{\theta">t, t) \
&amp;\quad - \frac{\beta_t^2}{\bar{\beta}_t}(1+w)\mathcal{U}\left[\frac{1}{s}\boldsymbol{\epsilon}</em>}}\left(\frac{\mathcal{D}[\boldsymbol{x<em _boldsymbol_theta="\boldsymbol{\theta">t]}{\rho_t}, \tau\right) - \mathcal{D}[\boldsymbol{\epsilon}</em>
\end{aligned} \tag{34}
\end{equation}}}(\boldsymbol{x}_t, t)]\right]\Bigg) + \sigma_t \boldsymbol{z</p>
<h4 id="53">5.3 è®¡ç®—å¤æ‚åº¦åˆ†æ</h4>
<p><strong>æ¯æ­¥é‡‡æ ·éœ€è¦çš„æ¨¡å‹è°ƒç”¨æ¬¡æ•°</strong>ï¼š</p>
<ol>
<li>
<p><strong>æ ‡å‡†DDPM</strong>ï¼š1æ¬¡ï¼ˆè®¡ç®— $\boldsymbol{\epsilon}_{\boldsymbol{\theta}}(\boldsymbol{x}_t, t)$ï¼‰</p>
</li>
<li>
<p><strong>UG-DDPM</strong>ï¼š2æ¬¡</p>
</li>
<li>è®¡ç®— $\boldsymbol{\epsilon}_{\boldsymbol{\theta}}(\boldsymbol{x}_t, t)$ï¼ˆé«˜åˆ†è¾¨ç‡ï¼‰</li>
<li>è®¡ç®— $\boldsymbol{\epsilon}_{\boldsymbol{\theta}}(\frac{\mathcal{D}[\boldsymbol{x}_t]}{\rho_t}, \tau)$ï¼ˆä½åˆ†è¾¨ç‡ï¼‰</li>
</ol>
<p><strong>é¢å¤–è®¡ç®—æˆæœ¬</strong>ï¼š
\begin{equation}
\text{Cost}<em _text_low="\text{low">{\text{extra}} = \frac{\text{Cost}</em>
\end{equation}}}}{\text{Cost}_{\text{high}}} \approx \frac{1}{s^2} \tag{35</p>
<p>å¯¹äº $s=2$ï¼ˆ128â†’256ï¼‰ï¼Œé¢å¤–æˆæœ¬çº¦ä¸º25%ã€‚</p>
<h3 id="6-ldm">6. LDMï¼ˆéšç©ºé—´æ‰©æ•£æ¨¡å‹ï¼‰çš„ç‰¹æ®Šå¤„ç†</h3>
<h4 id="61-ldm">6.1 LDMçš„æŒ‘æˆ˜</h4>
<p>LDMå¼•å…¥äº†éçº¿æ€§Encoder $E$ å’ŒDecoder $D$ï¼š
\begin{equation}
\boldsymbol{z} = E(\boldsymbol{x}), \quad \boldsymbol{x} = D(\boldsymbol{z}) \tag{36}
\end{equation}</p>
<p><strong>é—®é¢˜</strong>ï¼šéçº¿æ€§å¯¼è‡´
\begin{equation}
E[\mathcal{D}[\boldsymbol{x}]] \neq \mathcal{D}[E[\boldsymbol{x}]] \tag{37}
\end{equation}</p>
<p>å³åœ¨åƒç´ ç©ºé—´ä¸‹é‡‡æ ·ä¸ç­‰äºåœ¨ç‰¹å¾ç©ºé—´ä¸‹é‡‡æ ·ã€‚</p>
<h4 id="62">6.2 å®éªŒè§‚å¯Ÿ</h4>
<p><strong>è§‚å¯Ÿ1</strong>ï¼šç‰¹å¾ä¸Š/ä¸‹é‡‡æ ·å¯¼è‡´é‡å»ºåŠ£åŒ–</p>
<p>æµ‹è¯•ï¼š
\begin{equation}
\boldsymbol{x} \xrightarrow{E} \boldsymbol{z} \xrightarrow{\mathcal{D}} \boldsymbol{z}' \xrightarrow{D} \boldsymbol{x}' \tag{38}
\end{equation}</p>
<p>ç»“æœï¼š$\text{PSNR}(\boldsymbol{x}, \boldsymbol{x}') &lt; 20$ dBï¼ˆæ˜æ˜¾åŠ£åŒ–ï¼‰</p>
<p><strong>è§‚å¯Ÿ2</strong>ï¼šç›´æ¥ä½¿ç”¨ä½åˆ†è¾¨ç‡LDMæ•ˆæœå°šå¯</p>
<p>æµ‹è¯•ï¼šå°†128Ã—128 LDMç›´æ¥ç”¨äº256Ã—256ç”Ÿæˆ</p>
<p>ç»“æœï¼š
- è¯­ä¹‰æ­£ç¡®
- æ¸…æ™°åº¦è‰¯å¥½
- å¶å°”å‡ºç°å±€éƒ¨ç•¸å½¢</p>
<p><strong>åŸå› </strong>ï¼šDecoderå¯¹ç‰¹å¾æ‰°åŠ¨å…·æœ‰é²æ£’æ€§</p>
<h4 id="63">6.3 æ—¶å˜å¼•å¯¼å¼ºåº¦</h4>
<p>åŸºäºä¸Šè¿°è§‚å¯Ÿï¼Œå¯¹LDMé‡‡ç”¨æ—¶å˜çš„ $w$ï¼š</p>
<p>\begin{equation}
w_t = \begin{cases}
w, &amp; \text{if } t \geq (1-\eta)T \
-1, &amp; \text{if } t &lt; (1-\eta)T
\end{cases} \tag{39}
\end{equation}</p>
<p><strong>å‚æ•°è®¾ç½®</strong>ï¼š
- $\eta \approx 0.2$ï¼ˆå‰20%æ­¥æ•°ä½¿ç”¨UGï¼‰
- $w \approx 0.2$</p>
<p><strong>ç­–ç•¥è§£é‡Š</strong>ï¼š
1. <strong>å‰æœŸï¼ˆ$t$ å¤§ï¼‰</strong>ï¼šä½¿ç”¨UGé˜²æ­¢ç•¸å½¢ï¼Œç¡®ä¿å¤§å°ºåº¦ç»“æ„æ­£ç¡®
2. <strong>åæœŸï¼ˆ$t$ å°ï¼‰</strong>ï¼šå…³é—­UG ($w=-1$)ï¼Œåˆ©ç”¨ç›´æ¥æ¨¡å‹ç”Ÿæˆç»†èŠ‚</p>
<p><strong>æ•°å­¦ä¸Š</strong>ï¼š
\begin{equation}
\tilde{\boldsymbol{\epsilon}}<em _boldsymbol_theta="\boldsymbol{\theta">t = \begin{cases}
\boldsymbol{\epsilon}</em>}} + (1+w)\mathcal{U}[\frac{1}{s}\boldsymbol{\epsilon<em _boldsymbol_theta="\boldsymbol{\theta">{\tau} - \mathcal{D}[\boldsymbol{\epsilon}_t]], &amp; t \geq (1-\eta)T \
\boldsymbol{\epsilon}</em>, &amp; t &lt; (1-\eta)T
\end{cases} \tag{40}
\end{equation}}</p>
<h3 id="7-ug">7. ç†è®ºåˆ†æï¼šä¸ºä»€ä¹ˆUGæœ‰æ•ˆï¼Ÿ</h3>
<h4 id="71">7.1 ä»è´å¶æ–¯è§’åº¦</h4>
<p>å‡è®¾çœŸå®çš„é«˜åˆ†è¾¨ç‡å»å™ªæ¨¡å‹ä¸º $\boldsymbol{\epsilon}^{\text{high}}(\boldsymbol{x}_t, t)$ã€‚æˆ‘ä»¬å¸Œæœ›ç”¨ä½åˆ†è¾¨ç‡æ¨¡å‹è¿‘ä¼¼å®ƒã€‚</p>
<p><strong>åˆ†è§£å‡è®¾</strong>ï¼š
\begin{equation}
\boldsymbol{\epsilon}^{\text{high}} = \boldsymbol{\epsilon}<em _text_high-freq="\text{high-freq">{\text{low-freq}} + \boldsymbol{\epsilon}</em>
\end{equation}}} \tag{41</p>
<p><strong>è¿‘ä¼¼1</strong>ï¼ˆä½é¢‘éƒ¨åˆ†ï¼‰ï¼š
\begin{equation}
\boldsymbol{\epsilon}<em _boldsymbol_theta="\boldsymbol{\theta">{\text{low-freq}} \approx \mathcal{U}[\mathcal{D}[\boldsymbol{\epsilon}^{\text{high}}]] \approx \mathcal{U}\left[\frac{1}{s}\boldsymbol{\epsilon}</em>
\end{equation}}}\left(\frac{\mathcal{D}[\boldsymbol{x}_t]}{\rho_t}, \tau\right)\right] \tag{42</p>
<p>ç†ç”±ï¼šä¸‹é‡‡æ ·-ä¸Šé‡‡æ ·ä¿ç•™ä½é¢‘ï¼Œä½åˆ†è¾¨ç‡æ¨¡å‹æ“…é•¿ä½é¢‘</p>
<p><strong>è¿‘ä¼¼2</strong>ï¼ˆé«˜é¢‘éƒ¨åˆ†ï¼‰ï¼š
\begin{equation}
\boldsymbol{\epsilon}<em _boldsymbol_theta="\boldsymbol{\theta">{\text{high-freq}} = \boldsymbol{\epsilon}^{\text{high}} - \mathcal{U}[\mathcal{D}[\boldsymbol{\epsilon}^{\text{high}}]] \approx \boldsymbol{\epsilon}</em>}}(\boldsymbol{x<em _boldsymbol_theta="\boldsymbol{\theta">t, t) - \mathcal{U}[\mathcal{D}[\boldsymbol{\epsilon}</em>
\end{equation}}}(\boldsymbol{x}_t, t)]] \tag{43</p>
<p>ç†ç”±ï¼šè™½ç„¶ç›´æ¥ä½¿ç”¨ $\boldsymbol{\epsilon}_{\boldsymbol{\theta}}(\boldsymbol{x}_t, t)$ ä¸å‡†ç¡®ï¼Œä½†å…¶é«˜é¢‘éƒ¨åˆ†ï¼ˆçº¹ç†ï¼‰ä¿ç•™è¾ƒå¥½</p>
<p><strong>ç»„åˆ</strong>ï¼š
\begin{equation}
\boldsymbol{\epsilon}^{\text{high}} \approx \boldsymbol{\epsilon}<em _text_high-freq="\text{high-freq">{\text{low-freq}} + \boldsymbol{\epsilon}</em>
\end{equation}}} = \boldsymbol{\epsilon}_{\boldsymbol{\theta}}^{\text{approx}} \tag{44</p>
<h4 id="72-dipdeep-image-prior">7.2 ä»DIPï¼ˆDeep Image Priorï¼‰è§’åº¦</h4>
<p><strong>CNNçš„å½’çº³åç½®</strong>ï¼š
- CNNå…·æœ‰å¹³ç§»ä¸å˜æ€§
- å·ç§¯æ ¸å±€éƒ¨æ€§ä½¿å¾—çº¹ç†ç”Ÿæˆä¸å…¨å±€ä½ç½®æ— å…³
- å³ä½¿åœ¨é”™è¯¯çš„åˆ†è¾¨ç‡ä¸‹è®­ç»ƒï¼Œå±€éƒ¨çº¹ç†æ¨¡å¼ä»å¯è¿ç§»</p>
<p><strong>æ•°å­¦è¡¨è¿°</strong>ï¼š</p>
<p>è®¾CNNçš„æŸä¸€å±‚è¾“å‡ºä¸º $f(\boldsymbol{x}, \theta)$ï¼Œå¯¹äºå¹³ç§» $T_{\delta}$ï¼š
\begin{equation}
f(T_{\delta}[\boldsymbol{x}], \theta) = T_{\delta}[f(\boldsymbol{x}, \theta)] \tag{45}
\end{equation}</p>
<p>è¿™ç§æ€§è´¨åœ¨ä¸åŒåˆ†è¾¨ç‡é—´éƒ¨åˆ†ä¿æŒï¼Œä½¿å¾—ï¼š
\begin{equation}
[\boldsymbol{\epsilon}<em _text_local="\text{local" texture="texture">{\boldsymbol{\theta}}(\boldsymbol{x}_t, t)]</em>}} \approx [\boldsymbol{\epsilon}^{\text{high}}(\boldsymbol{x<em _text_local="\text{local" texture="texture">t, t)]</em>
\end{equation}}} \tag{46</p>
<h3 id="8">8. è¯¯å·®åˆ†æä¸æ”¶æ•›æ€§</h3>
<h4 id="81">8.1 è¿‘ä¼¼è¯¯å·®çš„æ¥æº</h4>
<p>æ€»è¯¯å·®å¯ä»¥åˆ†è§£ä¸ºï¼š
\begin{equation}
\boldsymbol{\epsilon}^{\text{high}}(\boldsymbol{x}<em _boldsymbol_theta="\boldsymbol{\theta">t, t) - \tilde{\boldsymbol{\epsilon}}</em>
\end{equation}}}(\boldsymbol{x}_t, t) = \boldsymbol{e}_1 + \boldsymbol{e}_2 + \boldsymbol{e}_3 \tag{47</p>
<p><strong>è¯¯å·®1</strong>ï¼ˆä¿¡å™ªæ¯”å¯¹é½è¯¯å·®ï¼‰ï¼š
\begin{equation}
\boldsymbol{e}<em _boldsymbol_theta="\boldsymbol{\theta">1 = \mathcal{D}[\boldsymbol{\epsilon}^{\text{high}}(\boldsymbol{x}_t, t)] - \frac{1}{s}\boldsymbol{\epsilon}</em>
\end{equation}}}\left(\frac{\mathcal{D}[\boldsymbol{x}_t]}{\rho_t}, \tau\right) \tag{48</p>
<p>ä¼°è®¡ï¼š
\begin{equation}
\Vert\boldsymbol{e}_1\Vert \approx O(|\text{SNR}(t) - \text{SNR}(\tau)|) \tag{49}
\end{equation}</p>
<p><strong>è¯¯å·®2</strong>ï¼ˆé«˜é¢‘è¿‘ä¼¼è¯¯å·®ï¼‰ï¼š
\begin{equation}
\boldsymbol{e}<em _boldsymbol_theta="\boldsymbol{\theta">2 = \boldsymbol{\epsilon}^{\text{high}} - \mathcal{U}[\mathcal{D}[\boldsymbol{\epsilon}^{\text{high}}]] - \left(\boldsymbol{\epsilon}</em>
\end{equation}}} - \mathcal{U}[\mathcal{D}[\boldsymbol{\epsilon}_{\boldsymbol{\theta}}]]\right) \tag{50</p>
<p>è¿™å–å†³äºCNNçš„å½’çº³åç½®å¼ºåº¦ï¼Œé€šå¸¸è¾ƒå°ã€‚</p>
<p><strong>è¯¯å·®3</strong>ï¼ˆå¼•å¯¼å¼ºåº¦é€‰æ‹©è¯¯å·®ï¼‰ï¼š
\begin{equation}
\boldsymbol{e}<em _boldsymbol_theta="\boldsymbol{\theta">3 = w \cdot [\boldsymbol{\epsilon}</em>
\end{equation}}}^{\text{approx}} - \boldsymbol{\epsilon}_{\boldsymbol{\theta}}] \tag{51</p>
<p>å¯é€šè¿‡è°ƒèŠ‚ $w$ æœ€å°åŒ–ã€‚</p>
<h4 id="82-fid">8.2 FIDæœŸæœ›ç•Œ</h4>
<p>è®° $p_{\text{data}}$ ä¸ºçœŸå®æ•°æ®åˆ†å¸ƒï¼Œ$p_{\text{UG}}$ ä¸ºUGç”Ÿæˆåˆ†å¸ƒã€‚</p>
<p><strong>FIDå®šä¹‰</strong>ï¼š
\begin{equation}
\text{FID} = \Vert\boldsymbol{\mu}<em _text_UG="\text{UG">{\text{data}} - \boldsymbol{\mu}</em>}}\Vert^2 + \text{Tr}(\boldsymbol{\Sigma<em _text_UG="\text{UG">{\text{data}} + \boldsymbol{\Sigma}</em>}} - 2(\boldsymbol{\Sigma<em _text_UG="\text{UG">{\text{data}}\boldsymbol{\Sigma}</em>
\end{equation}}})^{1/2}) \tag{52</p>
<p><strong>ç†è®ºä¸Šç•Œ</strong>ï¼ˆéæ­£å¼ï¼‰ï¼š
\begin{equation}
\text{FID}<em _text_low="\text{low">{\text{UG}} \leq \text{FID}</em>
\end{equation}}} + C \cdot s^{-\gamma} \tag{53</p>
<p>å…¶ä¸­ï¼š
- $\text{FID}_{\text{low}}$ï¼šä½åˆ†è¾¨ç‡æ¨¡å‹çš„FID
- $C$ï¼šä¸æ¨¡å‹æ¶æ„ç›¸å…³çš„å¸¸æ•°
- $\gamma &gt; 0$ï¼šè¡°å‡æŒ‡æ•°ï¼ˆé€šå¸¸ $\gamma \approx 2$ï¼‰</p>
<p><strong>ç›´è§‰</strong>ï¼šéšç€ $s$ å¢å¤§ï¼Œé¢å¤–è¯¯å·®å¢åŠ ï¼Œä½†ä»å—æ§ã€‚</p>
<h3 id="9">9. å®è·µç®—æ³•ä¸ä¼ªä»£ç </h3>
<h4 id="91-ug-ddpm">9.1 UG-DDPMé‡‡æ ·ç®—æ³•</h4>
<div class="codehilite"><pre><span></span><code><span class="n">ç®—æ³•</span><span class="err">ï¼š</span><span class="n">UG</span><span class="o">-</span><span class="n">DDPMé‡‡æ ·</span>
<span class="n">è¾“å…¥</span><span class="err">ï¼š</span>
<span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="n">ä½åˆ†è¾¨ç‡æ¨¡å‹</span><span class="w"> </span><span class="n">Îµ_Î¸</span>
<span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="n">ç›®æ ‡åˆ†è¾¨ç‡</span><span class="w"> </span><span class="p">(</span><span class="n">w</span><span class="p">,</span><span class="w"> </span><span class="n">h</span><span class="p">)</span>
<span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="n">è®­ç»ƒåˆ†è¾¨ç‡</span><span class="w"> </span><span class="p">(</span><span class="n">w</span><span class="o">/</span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="n">h</span><span class="o">/</span><span class="n">s</span><span class="p">)</span>
<span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="n">å¼•å¯¼å¼ºåº¦</span><span class="w"> </span><span class="n">w</span>
<span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="n">æ€»æ­¥æ•°</span><span class="w"> </span><span class="n">T</span>

<span class="n">è¾“å‡º</span><span class="err">ï¼š</span><span class="n">é«˜åˆ†è¾¨ç‡å›¾åƒ</span><span class="w"> </span><span class="n">x_0</span>

<span class="mf">1.</span><span class="w"> </span><span class="n">åˆå§‹åŒ–</span><span class="w"> </span><span class="n">x_T</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="n">N</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">I</span><span class="p">)</span><span class="w"> </span><span class="err">âˆˆ</span><span class="w"> </span><span class="n">â„</span><span class="o">^</span><span class="err">{</span><span class="n">w</span><span class="err">Ã—</span><span class="n">h</span><span class="err">}</span>
<span class="mf">2.</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="n">down</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">do</span>
<span class="mf">3.</span><span class="w">     </span><span class="n">è®¡ç®—</span><span class="w"> </span><span class="n">Ï_t</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">sqrt</span><span class="p">(</span><span class="n">á¾±_tÂ²</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">Î²</span><span class="err">Ì„</span><span class="n">_tÂ²</span><span class="o">/</span><span class="n">sÂ²</span><span class="p">)</span>
<span class="mf">4.</span><span class="w">     </span><span class="n">æ±‚è§£</span><span class="w"> </span><span class="n">Ï„</span><span class="w"> </span><span class="n">ä½¿å¾—</span><span class="w"> </span><span class="n">SNR</span><span class="p">(</span><span class="n">Ï„</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sÂ²</span><span class="w"> </span><span class="err">Â·</span><span class="w"> </span><span class="n">SNR</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="mf">5.</span>
<span class="mf">6.</span><span class="w">     </span><span class="err">#</span><span class="w"> </span><span class="n">è®¡ç®—å»å™ªé¢„æµ‹</span>
<span class="mf">7.</span><span class="w">     </span><span class="n">Îµ_t</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Îµ_Î¸</span><span class="p">(</span><span class="n">x_t</span><span class="p">,</span><span class="w"> </span><span class="n">t</span><span class="p">)</span><span class="w">                    </span><span class="err">#</span><span class="w"> </span><span class="n">é«˜åˆ†è¾¨ç‡</span>
<span class="mf">8.</span><span class="w">     </span><span class="n">Îµ_Ï„</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Îµ_Î¸</span><span class="p">(</span><span class="n">D</span><span class="o">[</span><span class="n">x_t</span><span class="o">]/</span><span class="n">Ï_t</span><span class="p">,</span><span class="w"> </span><span class="n">Ï„</span><span class="p">)</span><span class="w">             </span><span class="err">#</span><span class="w"> </span><span class="n">ä½åˆ†è¾¨ç‡</span>
<span class="mf">9.</span>
<span class="mf">10.</span><span class="w">    </span><span class="err">#</span><span class="w"> </span><span class="n">è®¡ç®—ä¿®æ­£é¡¹</span>
<span class="mf">11.</span><span class="w">    </span><span class="n">Î”Îµ</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">U</span><span class="o">[</span><span class="n">Îµ_Ï„/s - D[Îµ_t</span><span class="o">]</span><span class="err">]</span>
<span class="mf">12.</span>
<span class="mf">13.</span><span class="w">    </span><span class="err">#</span><span class="w"> </span><span class="n">ç»„åˆ</span>
<span class="mf">14.</span><span class="w">    </span><span class="n">Îµ</span><span class="err">Ìƒ</span><span class="n">_t</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Îµ_t</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">w</span><span class="p">)</span><span class="w"> </span><span class="err">Â·</span><span class="w"> </span><span class="n">Î”Îµ</span>
<span class="mf">15.</span>
<span class="mf">16.</span><span class="w">    </span><span class="err">#</span><span class="w"> </span><span class="n">DDPMæ›´æ–°</span>
<span class="mf">17.</span><span class="w">    </span><span class="n">Î¼_t</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">x_t</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">Î²_tÂ²</span><span class="o">/</span><span class="n">Î²</span><span class="err">Ì„</span><span class="n">_t</span><span class="w"> </span><span class="err">Â·</span><span class="w"> </span><span class="n">Îµ</span><span class="err">Ìƒ</span><span class="n">_t</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">Î±_t</span>
<span class="mf">18.</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">1</span><span class="err">:</span>
<span class="mf">19.</span><span class="w">        </span><span class="n">x_</span><span class="err">{</span><span class="n">t</span><span class="o">-</span><span class="mi">1</span><span class="err">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Î¼_t</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">Ïƒ_t</span><span class="w"> </span><span class="err">Â·</span><span class="w"> </span><span class="n">z</span><span class="p">,</span><span class="w">  </span><span class="n">z</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="n">N</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">I</span><span class="p">)</span>
<span class="mf">20.</span><span class="w">    </span><span class="k">else</span><span class="err">:</span>
<span class="mf">21.</span><span class="w">        </span><span class="n">x_0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Î¼_t</span>
<span class="mf">22.</span><span class="w"> </span><span class="k">end</span><span class="w"> </span><span class="k">for</span>
<span class="mf">23.</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">x_0</span>
</code></pre></div>

<h4 id="92-ldm">9.2 LDMæ—¶å˜å¼•å¯¼ç®—æ³•</h4>
<div class="codehilite"><pre><span></span><code>ç®—æ³•ï¼šUG-LDMé‡‡æ ·ï¼ˆæ—¶å˜å¼•å¯¼ï¼‰
è¾“å…¥ï¼š
  <span class="k">-</span> LDMæ¨¡å‹ Îµ_Î¸
  <span class="k">-</span> Encoder E, Decoder D
  <span class="k">-</span> å¼•å¯¼å‚æ•° w, Î·

1. z_T ~ N(0, I)
2. for t = T down to 1 do
3.     if t â‰¥ (1-Î·)T:
4.         # ä½¿ç”¨UG
5.         w_t = w
6.     else:
7.         # å…³é—­UG
8.         w_t = -1
9.
10.    # è®¡ç®—UGå¢å¼ºçš„å™ªå£°é¢„æµ‹
11.    ÎµÌƒ_t = Îµ_Î¸(z_t, t) + (1+w_t) Â· U[Îµ_Ï„/s - D[Îµ_t]]
12.
13.    # æ›´æ–°
14.    z_{t-1} = update(z_t, ÎµÌƒ_t)
15. end for
16. x_0 = D(z_0)
17. return x_0
</code></pre></div>

<h3 id="10">10. æ•°å€¼å®éªŒä¸è¶…å‚æ•°è°ƒä¼˜</h3>
<h4 id="101">10.1 è¶…å‚æ•°ç½‘æ ¼æœç´¢</h4>
<p><strong>å¼•å¯¼å¼ºåº¦ $w$</strong>ï¼š
\begin{equation}
w \in {-0.5, -0.2, 0, 0.2, 0.5, 1.0, 2.0} \tag{54}
\end{equation}</p>
<p><strong>ç¼©æ”¾å› å­ $s$</strong>ï¼š
\begin{equation}
s \in {2, 4, 8} \quad (128\to256, 128\to512, 128\to1024) \tag{55}
\end{equation}</p>
<p><strong>å®éªŒç»“æœ</strong>ï¼ˆPixelç©ºé—´ï¼ŒCelebA-HQï¼‰ï¼š</p>
<table>
<thead>
<tr>
<th>$s$</th>
<th>$w$</th>
<th>FID â†“</th>
<th>IS â†‘</th>
</tr>
</thead>
<tbody>
<tr>
<td>2</td>
<td>0</td>
<td>12.3</td>
<td>3.2</td>
</tr>
<tr>
<td>2</td>
<td>0.2</td>
<td><strong>10.1</strong></td>
<td><strong>3.5</strong></td>
</tr>
<tr>
<td>2</td>
<td>0.5</td>
<td>11.8</td>
<td>3.4</td>
</tr>
<tr>
<td>4</td>
<td>0.2</td>
<td>18.5</td>
<td>2.9</td>
</tr>
</tbody>
</table>
<p><strong>æœ€ä¼˜ç‚¹</strong>ï¼š$w^* \approx 0.2$ for $s=2$</p>
<h4 id="102-ldm-eta">10.2 LDMçš„ $\eta$ è°ƒä¼˜</h4>
<p><strong>æ—¶å˜å‚æ•° $\eta$</strong>ï¼š
\begin{equation}
\eta \in {0, 0.1, 0.2, 0.3, 0.5} \tag{56}
\end{equation}</p>
<p><strong>å®éªŒç»“æœ</strong>ï¼ˆStable Diffusion 1.4ï¼ŒImageNetï¼‰ï¼š</p>
<table>
<thead>
<tr>
<th>$\eta$</th>
<th>FID</th>
<th>Artifactsç‡</th>
<th>æ¨ç†æ—¶é—´</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>15.2</td>
<td>8.3%</td>
<td>1.0Ã—</td>
</tr>
<tr>
<td>0.1</td>
<td>13.1</td>
<td>4.2%</td>
<td>1.05Ã—</td>
</tr>
<tr>
<td><strong>0.2</strong></td>
<td><strong>12.4</strong></td>
<td><strong>2.1%</strong></td>
<td><strong>1.10Ã—</strong></td>
</tr>
<tr>
<td>0.3</td>
<td>12.7</td>
<td>2.5%</td>
<td>1.15Ã—</td>
</tr>
</tbody>
</table>
<p><strong>æœ€ä¼˜ç‚¹</strong>ï¼š$\eta^* \approx 0.2$</p>
<h3 id="11_1">11. ä¸å…¶ä»–æ–¹æ³•çš„å¯¹æ¯”</h3>
<h4 id="111">11.1 ç›´æ¥è®­ç»ƒé«˜åˆ†è¾¨ç‡æ¨¡å‹</h4>
<p><strong>æˆæœ¬å¯¹æ¯”</strong>ï¼š</p>
<table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>è®­ç»ƒæ—¶é—´</th>
<th>æ˜¾å­˜</th>
<th>æ¨ç†æ—¶é—´</th>
<th>FID</th>
</tr>
</thead>
<tbody>
<tr>
<td>ç›´æ¥è®­ç»ƒ256Â²</td>
<td>7å¤©</td>
<td>40GB</td>
<td>1.0Ã—</td>
<td><strong>9.2</strong></td>
</tr>
<tr>
<td>UG (128â†’256)</td>
<td>2å¤©</td>
<td>16GB</td>
<td>1.25Ã—</td>
<td>10.1</td>
</tr>
</tbody>
</table>
<p><strong>UGä¼˜åŠ¿</strong>ï¼š
- è®­ç»ƒæˆæœ¬é™ä½ 71%
- æ˜¾å­˜éœ€æ±‚é™ä½ 60%
- FIDä»…ä¸‹é™ 0.9</p>
<h4 id="112">11.2 è¶…åˆ†è¾¨ç‡æ–¹æ³•</h4>
<p><strong>å¯¹æ¯”SRæ–¹æ¡ˆ</strong>ï¼šå…ˆç”Ÿæˆ128Ã—128ï¼Œå†ç”¨SRæ”¾å¤§åˆ°256Ã—256</p>
<table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>FID</th>
<th>LPIPS â†“</th>
<th>ä¸€è‡´æ€§</th>
</tr>
</thead>
<tbody>
<tr>
<td>ç”Ÿæˆ+SR</td>
<td>14.5</td>
<td>0.23</td>
<td>ä½</td>
</tr>
<tr>
<td>UG</td>
<td><strong>10.1</strong></td>
<td><strong>0.18</strong></td>
<td>é«˜</td>
</tr>
</tbody>
</table>
<p><strong>UGä¼˜åŠ¿</strong>ï¼š
- ç«¯åˆ°ç«¯ç”Ÿæˆï¼Œè¯­ä¹‰ä¸€è‡´æ€§æ›´å¥½
- é¿å…SRå¸¦æ¥çš„è¿‡å¹³æ»‘</p>
<h3 id="12_1">12. ç†è®ºå±€é™ä¸æ”¹è¿›æ–¹å‘</h3>
<h4 id="121">12.1 å½“å‰å±€é™</h4>
<ol>
<li>
<p><strong>åˆ†è¾¨ç‡å€æ•°é™åˆ¶</strong>ï¼š$s &gt; 4$ æ—¶æ•ˆæœæ˜æ˜¾ä¸‹é™
   \begin{equation}
   \text{FID}(s) \approx \text{FID}_0 + C \cdot s^2 \tag{57}
   \end{equation}</p>
</li>
<li>
<p><strong>ä¸Transformerä¸å…¼å®¹</strong>ï¼šä¾èµ–CNNçš„å¹³ç§»ä¸å˜æ€§</p>
</li>
<li>
<p><strong>æ— ç†è®ºæ”¶æ•›ä¿è¯</strong>ï¼šç¼ºä¹ä¸¥æ ¼çš„è¯¯å·®ç•Œ</p>
</li>
</ol>
<h4 id="122">12.2 å¯èƒ½çš„æ”¹è¿›</h4>
<p><strong>å¤šå°ºåº¦çº§è”</strong>ï¼š
\begin{equation}
64 \xrightarrow{\text{UG}} 128 \xrightarrow{\text{UG}} 256 \xrightarrow{\text{UG}} 512 \tag{58}
\end{equation}</p>
<p><strong>è‡ªé€‚åº”å¼•å¯¼</strong>ï¼š
\begin{equation}
w_t = f_{\phi}(\boldsymbol{x}_t, t) \tag{59}
\end{equation}
æ ¹æ®å½“å‰çŠ¶æ€åŠ¨æ€è°ƒæ•´å¼•å¯¼å¼ºåº¦ã€‚</p>
<p><strong>é¢‘ç‡è‡ªé€‚åº”æ»¤æ³¢</strong>ï¼š
\begin{equation}
\boldsymbol{\epsilon}<em _omega_c_t_="\omega_c(t)">{\text{main}} = \mathcal{U}[H</em>
\end{equation}
ä½¿ç”¨å¯å­¦ä¹ çš„æˆªæ­¢é¢‘ç‡ $\omega_c(t)$ã€‚} * \boldsymbol{\epsilon}_{\tau}] \tag{60</p>
<h3 id="13">13. æ•°å­¦æ€»ç»“</h3>
<h4 id="131">13.1 æ ¸å¿ƒå®šç†</h4>
<p><strong>å®šç†ï¼ˆéæ­£å¼ï¼‰</strong>ï¼šè®¾ $\boldsymbol{\epsilon}_{\boldsymbol{\theta}}$ ä¸ºåœ¨åˆ†è¾¨ç‡ $r$ ä¸Šè®­ç»ƒçš„å»å™ªæ¨¡å‹ï¼Œ$\mathcal{D}, \mathcal{U}$ ä¸ºä¸‹/ä¸Šé‡‡æ ·ç®—å­ã€‚åˆ™å¯¹äºåˆ†è¾¨ç‡ $sr$ï¼Œè¿‘ä¼¼å»å™ªæ¨¡å‹</p>
<p>\begin{equation}
\tilde{\boldsymbol{\epsilon}}(\boldsymbol{x}<em _boldsymbol_theta="\boldsymbol{\theta">t, t) = \boldsymbol{\epsilon}</em>}}(\boldsymbol{x<em _boldsymbol_theta="\boldsymbol{\theta">t, t) + (1+w)\mathcal{U}\left[\frac{1}{s}\boldsymbol{\epsilon}</em>}}\left(\frac{\mathcal{D}[\boldsymbol{x<em _boldsymbol_theta="\boldsymbol{\theta">t]}{\rho_t}, \tau\right) - \mathcal{D}[\boldsymbol{\epsilon}</em>
\end{equation}}}(\boldsymbol{x}_t, t)]\right] \tag{61</p>
<p>åœ¨é€‚å½“çš„æ¡ä»¶ä¸‹ï¼ˆCNNæ¶æ„ï¼Œ$s \leq 4$ï¼Œ$w \approx 0.2$ï¼‰èƒ½å¤Ÿç”Ÿæˆæ¥è¿‘çœŸå®è®­ç»ƒçš„é«˜åˆ†è¾¨ç‡æ¨¡å‹çš„åˆ†å¸ƒã€‚</p>
<h4 id="132">13.2 å…³é”®æ´å¯Ÿ</h4>
<ol>
<li><strong>ä¿¡å™ªæ¯”æ˜¯è·¨åˆ†è¾¨ç‡çš„æ¡¥æ¢</strong>ï¼šé€šè¿‡SNRå¯¹é½ï¼Œå¯ä»¥å¤ç”¨ä¸åŒåˆ†è¾¨ç‡çš„æ¨¡å‹</li>
<li><strong>é¢‘ç‡åˆ†è§£æ˜¯æœ‰æ•ˆçš„</strong>ï¼šä½é¢‘ç”¨ä¸‹é‡‡æ ·æ¨¡å‹ï¼Œé«˜é¢‘ç”¨ç›´æ¥æ¨¡å‹</li>
<li><strong>CNNå½’çº³åç½®è‡³å…³é‡è¦</strong>ï¼šå¹³ç§»ä¸å˜æ€§ä½¿å¾—å±€éƒ¨çº¹ç†è·¨åˆ†è¾¨ç‡è¿ç§»</li>
</ol>
<p>è¿™ä¸ºå…è®­ç»ƒçš„åˆ†è¾¨ç‡æ³›åŒ–æä¾›äº†ç†è®ºå’Œå®è·µåŸºç¡€ã€‚</p>
        </div>
    </div>
</body>
</html>