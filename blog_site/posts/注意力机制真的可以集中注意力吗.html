<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ³¨æ„åŠ›æœºåˆ¶çœŸçš„å¯ä»¥â€œé›†ä¸­æ³¨æ„åŠ›â€å—ï¼Ÿ</title>
    <style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    line-height: 1.6; color: #333; max-width: 900px; margin: 0 auto; padding: 20px; background: #f5f5f5;
}
.container { background: white; padding: 40px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
header { border-bottom: 2px solid #e0e0e0; padding-bottom: 20px; margin-bottom: 30px; }
h1 { color: #2c3e50; margin-bottom: 10px; font-size: 2em; }
.meta { color: #666; font-size: 0.9em; margin-bottom: 20px; }
.content { margin-top: 30px; overflow-wrap: break-word; }
.content h2 { color: #34495e; margin-top: 30px; margin-bottom: 15px; border-bottom: 1px solid #eee; padding-bottom: 5px; }
.content p { margin-bottom: 15px; }
.content pre { background: #f8f8f8; padding: 15px; border-radius: 5px; overflow-x: auto; border-left: 3px solid #3498db; margin: 15px 0; }
.content code { background: #f8f8f8; padding: 2px 5px; border-radius: 3px; font-family: monospace; font-size: 0.9em; }
.content blockquote { border-left: 4px solid #3498db; padding-left: 20px; margin: 20px 0; color: #555; font-style: italic; }
.content table { border-collapse: collapse; width: 100%; margin: 20px 0; }
.content th, .content td { border: 1px solid #ddd; padding: 10px; text-align: left; }
.back-link { display: inline-block; margin-bottom: 20px; color: #3498db; text-decoration: none; font-weight: 500; }
</style>
    
<script>
    window.MathJax = {
        tex: {
            inlineMath: [['$', '$'], ['\(', '\)']],
            displayMath: [['$$', '$$'], ['\[', '\]']],
            processEscapes: true
        }
    };
</script>
<script id="MathJax-script" async src="https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js"></script>

</head>
<body>
    <div class="container">
        <a href="../index.html" class="back-link">â† è¿”å›é¦–é¡µ</a>
        <header>
            <h1>æ³¨æ„åŠ›æœºåˆ¶çœŸçš„å¯ä»¥â€œé›†ä¸­æ³¨æ„åŠ›â€å—ï¼Ÿ</h1>
            <div class="meta">ğŸ“… æœ€åæ›´æ–°: 2025-11-10 | ğŸ“„ å¤§å°: 14.6 KB</div>
        </header>
        <div class="content">
            <p><strong>åŸæ–‡é“¾æ¥</strong>: <a href="https://spaces.ac.cn/archives/9889">https://spaces.ac.cn/archives/9889</a></p>
<p><strong>å‘å¸ƒæ—¥æœŸ</strong>: </p>
<hr />
<p>ä¹‹å‰åœ¨<a href="/archives/8338#%E4%BD%8E%E7%A7%A9%E9%97%AE%E9%A2%98">ã€ŠTransformerå‡çº§ä¹‹è·¯ï¼š3ã€ä»Performeråˆ°çº¿æ€§Attentionã€‹</a>ã€<a href="/archives/9529">ã€Šä¸ºä»€ä¹ˆç°åœ¨çš„LLMéƒ½æ˜¯Decoder-onlyçš„æ¶æ„ï¼Ÿã€‹</a>ç­‰æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ä»AttentionçŸ©é˜µçš„â€œç§©â€çš„è§’åº¦æ¢è®¨äº†Attentionæœºåˆ¶ï¼Œå¹¶æ›¾ç»åˆ¤æ–­çº¿æ€§Attentionä¸å¦‚æ ‡å‡†Attentionçš„å…³é”®åŸå› æ­£æ˜¯â€œä½ç§©ç“¶é¢ˆâ€ã€‚ç„¶è€Œï¼Œè¿™ä¸€è§£é‡Šå¯¹äºåŒå‘çš„Encoderæ¨¡å‹æˆ–è®¸æˆç«‹ï¼Œä½†å´éš¾ä»¥é€‚ç”¨äºå•å‘çš„Decoderæ¨¡å‹ï¼Œå› ä¸ºDecoderçš„AttentionçŸ©é˜µçš„ä¸Šä¸‰è§’éƒ¨åˆ†æ˜¯è¢«maskæ‰çš„ï¼Œç•™ä¸‹çš„ä¸‹ä¸‰è§’çŸ©é˜µå¿…ç„¶æ˜¯æ»¡ç§©çš„ï¼Œè€Œæ—¢ç„¶éƒ½æ˜¯æ»¡ç§©äº†ï¼Œé‚£ä¹ˆä½ç§©ç“¶é¢ˆé—®é¢˜ä¼¼ä¹å°±ä¸å¤å­˜åœ¨äº†ã€‚</p>
<p>æ‰€ä»¥ï¼Œâ€œä½ç§©ç“¶é¢ˆâ€å¹¶ä¸èƒ½å®Œå…¨è§£é‡Šçº¿æ€§Attentionçš„èƒ½åŠ›ç¼ºé™·ã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œç¬”è€…è¯•å›¾å¯»æ±‚å¦ä¸€ä¸ªè§’åº¦çš„è§£é‡Šã€‚ç®€å•æ¥è¯´ï¼Œä¸æ ‡å‡†Attentionç›¸æ¯”ï¼Œçº¿æ€§Attentionæ›´éš¾â€œé›†ä¸­æ³¨æ„åŠ›â€ï¼Œä»è€Œéš¾ä»¥å‡†ç¡®åœ°å®šä½åˆ°å…³é”®tokenï¼Œè¿™å¤§æ¦‚æ˜¯å®ƒæ•ˆæœç¨é€Šä¸€ç­¹çš„ä¸»è¦åŸå› ã€‚</p>
<h2 id="_1">ç¨€ç–ç¨‹åº¦</h2>
<p>åœ¨æ–‡ç« <a href="/archives/8823">ã€Šä»ç†µä¸å˜æ€§çœ‹Attentionçš„Scaleæ“ä½œã€‹</a>ä¸­ï¼Œæˆ‘ä»¬å°±ä»â€œé›†ä¸­æ³¨æ„åŠ›â€çš„è§’åº¦è€ƒå¯Ÿè¿‡Attentionæœºåˆ¶ï¼Œå½“æ—¶æˆ‘ä»¬ä»¥ä¿¡æ¯ç†µä½œä¸ºâ€œé›†ä¸­ç¨‹åº¦â€çš„åº¦é‡ï¼Œç†µè¶Šä½ï¼Œè¡¨æ˜Attentionè¶Šæœ‰å¯èƒ½é›†ä¸­åœ¨æŸä¸ªtokenä¸Šã€‚</p>
<p>ä½†æ˜¯ï¼Œå¯¹äºä¸€èˆ¬çš„Attentionæœºåˆ¶æ¥è¯´ï¼ŒAttentionçŸ©é˜µå¯èƒ½æ˜¯éå½’ä¸€åŒ–çš„ï¼Œæ¯”å¦‚<a href="/archives/8934">ã€ŠFLASHï¼šå¯èƒ½æ˜¯è¿‘æ¥æœ€æœ‰æ„æ€çš„é«˜æ•ˆTransformerè®¾è®¡ã€‹</a>ä»‹ç»çš„GAUæ¨¡å—ï¼Œä»¥åŠ<a href="/archives/9105#%E6%96%B0%E5%BD%92%E4%B8%80%E5%8C%96">ã€Šç›¸å¯¹ä½ç½®ç¼–ç Transformerçš„ä¸€ä¸ªç†è®ºç¼ºé™·ä¸å¯¹ç­–ã€‹</a>æ‰€å¼•å…¥çš„$l_2$å½’ä¸€åŒ–Attentionï¼Œç”šè‡³ä»æ›´ä¸€èˆ¬çš„<a href="https://papers.cool/arxiv/1711.07971">Non-Local Neural Networks</a>è§’åº¦æ¥çœ‹ï¼ŒAttentionçŸ©é˜µè¿˜æœªå¿…æ˜¯éè´Ÿçš„ã€‚è¿™äº›éå½’ä¸€åŒ–çš„ä¹ƒè‡³éè´Ÿçš„AttentionçŸ©é˜µè‡ªç„¶å°±ä¸é€‚ç”¨äºä¿¡æ¯ç†µäº†ï¼Œå› ä¸ºä¿¡æ¯ç†µæ˜¯é’ˆå¯¹æ¦‚ç‡åˆ†å¸ƒçš„ã€‚</p>
<p>ä¸ºæ­¤ï¼Œæˆ‘ä»¬è€ƒè™‘åœ¨<a href="/archives/9595">ã€Šå¦‚ä½•åº¦é‡æ•°æ®çš„ç¨€ç–ç¨‹åº¦ï¼Ÿã€‹</a>ä»‹ç»çš„$l_1/l_2$å½¢å¼çš„ç¨€ç–ç¨‹åº¦æŒ‡æ ‡ï¼š<br />
\begin{equation}S(x) = \frac{\mathbb{E}[|x|]}{\sqrt{\mathbb{E}[x^2]}}\end{equation}<br />
è¯¥æŒ‡æ ‡è·Ÿä¿¡æ¯ç†µç›¸ä¼¼ï¼Œ$S(x)$è¶Šå°æ„å‘³ç€å¯¹åº”çš„éšæœºå‘é‡è¶Šç¨€ç–ï¼Œè¶Šç¨€ç–æ„å‘³ç€è¶Šæœ‰å¯èƒ½â€œä¸€å®¶ç‹¬å¤§â€ï¼Œè¿™å¯¹åº”äºæ¦‚ç‡ä¸­çš„one hotåˆ†å¸ƒï¼Œè·Ÿä¿¡æ¯ç†µä¸åŒçš„æ˜¯ï¼Œå®ƒé€‚ç”¨äºä¸€èˆ¬çš„éšæœºå˜é‡æˆ–è€…å‘é‡ã€‚</p>
<h2 id="_2">ç®€åŒ–å½¢å¼</h2>
<p>å¯¹äºæ³¨æ„åŠ›æœºåˆ¶ï¼Œæˆ‘ä»¬è®°$\boldsymbol{a} = (a_1,a_2,\cdots,a_n)$ï¼Œå…¶ä¸­$a_j \propto f(\boldsymbol{q}\cdot\boldsymbol{k}<em _boldsymbol_k="\boldsymbol{k">j)$ï¼Œé‚£ä¹ˆ<br />
\begin{equation}S(\boldsymbol{a}) = \frac{\mathbb{E}</em>}}[|f(\boldsymbol{q}\cdot\boldsymbol{k})|]}{\sqrt{\mathbb{E<em _boldsymbol_varepsilon="\boldsymbol{\varepsilon">{\boldsymbol{k}}[f^2(\boldsymbol{q}\cdot\boldsymbol{k})]}}\end{equation}<br />
æ¥ä¸‹æ¥éƒ½è€ƒè™‘$n\to\infty$çš„æé™ã€‚å‡è®¾$\boldsymbol{k}\sim\mathcal{N}(\boldsymbol{\mu},\sigma^2\boldsymbol{I})$ï¼Œé‚£ä¹ˆå¯ä»¥è®¾$\boldsymbol{k} = \boldsymbol{\mu} + \sigma \boldsymbol{\varepsilon}$ï¼Œå…¶ä¸­$\boldsymbol{\varepsilon}\sim\mathcal{N}(\boldsymbol{0},\boldsymbol{I})$ï¼Œäºæ˜¯<br />
\begin{equation}S(\boldsymbol{a}) = \frac{\mathbb{E}</em>}}[|f(\boldsymbol{q}\cdot\boldsymbol{\mu} + \sigma\boldsymbol{q}\cdot\boldsymbol{\varepsilon})|]}{\sqrt{\mathbb{E<em _varepsilon="\varepsilon">{\boldsymbol{\varepsilon}}[f^2(\boldsymbol{q}\cdot\boldsymbol{\mu} + \sigma\boldsymbol{q}\cdot\boldsymbol{\varepsilon})]}}\end{equation}<br />
æ³¨æ„$\boldsymbol{\varepsilon}$æ‰€æœä»çš„åˆ†å¸ƒ$\mathcal{N}(\boldsymbol{0},\boldsymbol{I})$æ˜¯ä¸€ä¸ªå„å‘åŒæ€§çš„åˆ†å¸ƒï¼Œä¸<a href="/archives/7076">ã€Šnç»´ç©ºé—´ä¸‹ä¸¤ä¸ªéšæœºå‘é‡çš„å¤¹è§’åˆ†å¸ƒã€‹</a>æ¨å¯¼çš„åŒ–ç®€æ€è·¯ä¸€æ ·ï¼Œç”±äºå„å‘åŒæ€§çš„åŸå› ï¼Œ$\boldsymbol{q}\cdot\boldsymbol{\varepsilon}$ç›¸å…³çš„æ•°å­¦æœŸæœ›åªä¸$\boldsymbol{q}$çš„æ¨¡é•¿æœ‰å…³ï¼Œè·Ÿå®ƒçš„æ–¹å‘æ— å…³ï¼Œäºæ˜¯æˆ‘ä»¬å¯ä»¥å°†$\boldsymbol{q}$ç®€åŒ–ä¸º$(\Vert\boldsymbol{q}\Vert,0,0,\cdots,0)$ï¼Œé‚£ä¹ˆå¯¹$\boldsymbol{\varepsilon}$çš„æ•°å­¦æœŸæœ›å°±å¯ä»¥ç®€åŒ–ä¸º<br />
\begin{equation}S(\boldsymbol{a}) = \frac{\mathbb{E}</em>}[|f(\boldsymbol{q}\cdot\boldsymbol{\mu} + \sigma\Vert\boldsymbol{q}\Vert\varepsilon)|]}{\sqrt{\mathbb{E}_{\varepsilon}[f^2(\boldsymbol{q}\cdot\boldsymbol{\mu} + \sigma\Vert\boldsymbol{q}\Vert\varepsilon)]}}\end{equation<br />
å…¶ä¸­$\varepsilon\sim\mathcal{N}(0,1)$æ˜¯ä¸€ä¸ªéšæœºæ ‡é‡ã€‚</p>
<h2 id="_3">ä¸¤ä¸ªä¾‹å­</h2>
<p>ç°åœ¨å¯ä»¥å¯¹å¸¸è§çš„ä¸€äº›$f$è¿›è¡Œè®¡ç®—å¯¹æ¯”äº†ã€‚ç›®å‰æœ€å¸¸ç”¨çš„Attentionæœºåˆ¶æ˜¯$f=\exp$ï¼Œæ­¤æ—¶æ±‚æœŸæœ›åªæ˜¯å¸¸è§„çš„ä¸€ç»´é«˜æ–¯ç§¯åˆ†ï¼Œå®¹æ˜“ç®—å¾—<br />
\begin{equation}S(\boldsymbol{a}) = \exp\left(-\frac{1}{2}\sigma^2\Vert\boldsymbol{q}\Vert^2\right)\end{equation}<br />
å½“$\sigma\to\infty$æˆ–$\Vert\boldsymbol{q}\Vert\to\infty$æ—¶ï¼Œéƒ½æœ‰$S(\boldsymbol{a})\to 0$ï¼Œä¹Ÿå°±æ˜¯ç†è®ºä¸Šæ ‡å‡†Attentionç¡®å®å¯ä»¥ä»»æ„ç¨€ç–åœ°â€œé›†ä¸­æ³¨æ„åŠ›â€ï¼ŒåŒæ—¶è¿™ä¹Ÿå‘Šè¯‰äº†æˆ‘ä»¬è®©æ³¨æ„åŠ›æ›´é›†ä¸­çš„æ–¹æ³•ï¼šå¢å¤§$\boldsymbol{q}$çš„æ¨¡é•¿ï¼Œæˆ–è€…å¢å¤§å„ä¸ª$\boldsymbol{k}$ä¹‹é—´çš„æ–¹å·®ï¼Œæ¢è¨€ä¹‹æ‹‰å¼€$\boldsymbol{k}$çš„å·®è·ã€‚</p>
<p>å¦ä¸€ä¸ªä¾‹å­æ˜¯ç¬”è€…å–œæ¬¢çš„GAUï¼ˆGated Attention Unitï¼‰ï¼Œå®ƒåœ¨å¼€å§‹æå‡ºçš„æ—¶å€™æ˜¯$f=\text{relu}^2$ï¼ˆä¸è¿‡ç¬”è€…åæ¥è‡ªå·±ç”¨çš„æ—¶å€™å¤åŸä¸ºSoftmaxäº†ï¼Œå‚è€ƒ<a href="/archives/8934">ã€ŠFLASHï¼šå¯èƒ½æ˜¯è¿‘æ¥æœ€æœ‰æ„æ€çš„é«˜æ•ˆTransformerè®¾è®¡ã€‹</a>å’Œ<a href="/archives/9019">ã€Šå¬è¯´Attentionä¸Softmaxæ›´é…å“¦ï½ã€‹</a>ï¼‰ï¼Œæ­¤æ—¶ç§¯åˆ†æ²¡æœ‰$f=\exp$é‚£ä¹ˆç®€å•ï¼Œä¸è¿‡ä¹Ÿå¯ä»¥ç›´æ¥ç”¨Mathematicaç¡¬ç®—ï¼Œç»“æœæ˜¯<br />
\begin{equation}S(\boldsymbol{a}) =\frac{e^{-\frac{\beta ^2}{2 \gamma ^2}} \left(\sqrt{2} \beta \gamma +\sqrt{\pi } e^{\frac{\beta ^2}{2 \gamma ^2}} \left(\beta ^2+\gamma ^2\right) \left(\text{erf}\left(\frac{\beta }{\sqrt{2} \gamma }\right)+1\right)\right)}{\sqrt[4]{\pi } \sqrt{2 \sqrt{2} \beta \gamma e^{-\frac{\beta ^2}{2 \gamma ^2}} \left(\beta ^2+5 \gamma ^2\right)+2 \sqrt{\pi } \left(\beta ^4+6 \beta ^2 \gamma ^2+3 \gamma ^4\right) \left(\text{erf}\left(\frac{\beta }{\sqrt{2} \gamma }\right)+1\right)}}\end{equation}<br />
å…¶ä¸­$\beta = \boldsymbol{q}\cdot\boldsymbol{\mu}, \gamma = \sigma\Vert\boldsymbol{q}\Vert$ã€‚å¼å­å¾ˆææ€–ï¼Œä½†æ˜¯æ— æ‰€è°“ï¼Œç”»å›¾å³å¯ï¼š  </p>
<p><a href="/usr/uploads/2023/12/1525614182.png" title="ç‚¹å‡»æŸ¥çœ‹åŸå›¾"><img alt="relu2æ³¨æ„åŠ›çš„ç¨€ç–ç¨‹åº¦æ›²çº¿å›¾" src="/usr/uploads/2023/12/1525614182.png" /></a></p>
<p>relu2æ³¨æ„åŠ›çš„ç¨€ç–ç¨‹åº¦æ›²çº¿å›¾</p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œåªæœ‰$\beta &lt; 0$æ—¶ï¼ŒåŸç‰ˆGAUçš„ç¨€ç–åº¦æ‰æœ‰æœºä¼šè¶‹äº0ã€‚è¿™ä¹Ÿå¾ˆç›´è§‚ï¼Œå½“åç½®é¡¹å°äº0æ—¶ï¼Œæ‰æœ‰æ›´å¤šçš„æœºä¼šè®©$\text{relu}$çš„ç»“æœä¸º0ï¼Œä»è€Œå®ç°ç¨€ç–ã€‚è¿™ä¸ªç»“æœä¹Ÿè¯´æ˜äº†è·Ÿ$f=\exp$çš„æ ‡å‡†æ³¨æ„åŠ›ä¸åŒï¼Œ$\boldsymbol{k}$çš„biasé¡¹å¯èƒ½ä¼šå¯¹$f=\text{relu}^2$çš„GAUæœ‰æ­£é¢å¸®åŠ©ã€‚</p>
<h2 id="_4">æç®€çº¿æ€§</h2>
<p>ä¸‹é¢æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸ªæœ€ç®€å•çš„ä¾‹å­ï¼šä¸åŠ $f$ï¼Œæˆ–è€…ç­‰ä»·åœ°è¯´$f=\text{identical}$ã€‚è¿™ç§æƒ…å†µä¸‹å¯¹åº”çš„å°±æ˜¯æœ€ç®€å•çš„ä¸€ç§çº¿æ€§Attentionï¼ŒåŒæ ·å¯ä»¥ç”¨Mathematicaç¡¬ç®—å¾—ï¼š<br />
\begin{equation}S(\boldsymbol{a}) =\frac{\sqrt{\frac{2}{\pi }} \gamma e^{-\frac{\beta ^2}{2 \gamma ^2}}+\beta \text{erf}\left(\frac{\beta }{\sqrt{2} \gamma }\right)}{\sqrt{\beta ^2+\gamma ^2}}\end{equation}<br />
ä¸‹é¢æ˜¯å‡ ä¸ªä¸åŒ$\beta$çš„å‡½æ•°å›¾åƒï¼š  </p>
<p><a href="/usr/uploads/2023/12/2153977202.png" title="ç‚¹å‡»æŸ¥çœ‹åŸå›¾"><img alt="æç®€çº¿æ€§æ³¨æ„åŠ›çš„ç¨€ç–ç¨‹åº¦æ›²çº¿å›¾" src="/usr/uploads/2023/12/2153977202.png" /></a></p>
<p>æç®€çº¿æ€§æ³¨æ„åŠ›çš„ç¨€ç–ç¨‹åº¦æ›²çº¿å›¾</p>
<p>æ³¨æ„ï¼Œæ­¤æ—¶çš„$S(\boldsymbol{a})$æ˜¯å…³äº$\beta$å¶å‡½æ•°ï¼ˆè¯»è€…ä¸å¦¨å°è¯•è¯æ˜ä¸€ä¸‹ï¼‰ï¼Œæ‰€ä»¥$\beta &lt; 0$æ—¶å›¾åƒè·Ÿå®ƒç›¸åæ•°çš„å›¾åƒæ˜¯ä¸€æ ·çš„ï¼Œå› æ­¤ä¸Šå›¾åªç”»äº†$\beta \geq 0$çš„ç»“æœã€‚ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œä¸åŠ ä»»ä½•æ¿€æ´»å‡½æ•°çš„çº¿æ€§Attentionçš„ç¨€ç–ç¨‹åº¦å¹¶ä¸èƒ½æ¥è¿‘0ï¼Œè€Œæ˜¯å­˜åœ¨ä¸€ä¸ªè¾ƒé«˜çš„ä¸‹é™ï¼Œè¿™æ„å‘³ç€å½“è¾“å…¥åºåˆ—è¶³å¤Ÿé•¿æ—¶ï¼Œè¿™ç§çº¿æ€§Attentionå¹¶æ²¡æœ‰åŠæ³•â€œé›†ä¸­æ³¨æ„åŠ›â€åˆ°å…³é”®ä½ç½®ä¸Šã€‚</p>
<h2 id="_5">ä¸€èˆ¬çº¿æ€§</h2>
<p>ä»<a href="/archives/7546">ã€Šçº¿æ€§Attentionçš„æ¢ç´¢ï¼šAttentionå¿…é¡»æœ‰ä¸ªSoftmaxå—ï¼Ÿã€‹</a>æˆ‘ä»¬çŸ¥é“ï¼Œçº¿æ€§Attentionçš„ä¸€èˆ¬å½¢å¼ä¸º$a_j \propto g(\boldsymbol{q})\cdot h(\boldsymbol{k}<em _boldsymbol_varepsilon="\boldsymbol{\varepsilon">j)$ï¼Œå…¶ä¸­$g,h$æ˜¯å€¼åŸŸéè´Ÿçš„æ¿€æ´»å‡½æ•°ã€‚æˆ‘ä»¬è®°$\tilde{\boldsymbol{q}}=g(\boldsymbol{q}),\tilde{\boldsymbol{k}}=h(\boldsymbol{k})$ï¼Œé‚£ä¹ˆ$a_j\propto \tilde{\boldsymbol{q}}^{\scriptscriptstyle\top}\tilde{\boldsymbol{k}}$ï¼Œå¹¶ä¸”å¯ä»¥å†™å‡º<br />
\begin{equation}S(\boldsymbol{a}) = \frac{\mathbb{E}</em>}}\left[\tilde{\boldsymbol{q}}^{\scriptscriptstyle\top}\tilde{\boldsymbol{k}}\right]}{\sqrt{\mathbb{E<em _boldsymbol_varepsilon="\boldsymbol{\varepsilon">{\boldsymbol{\varepsilon}}\left[\tilde{\boldsymbol{q}}^{\scriptscriptstyle\top}\tilde{\boldsymbol{k}}\tilde{\boldsymbol{k}}^{\scriptscriptstyle\top}\tilde{\boldsymbol{q}}\right]}} = \frac{\tilde{\boldsymbol{q}}^{\scriptscriptstyle\top}\mathbb{E}</em>}}\left[\tilde{\boldsymbol{k}}\right]}{\sqrt{\tilde{\boldsymbol{q}}^{\scriptscriptstyle\top}\mathbb{E}_{\boldsymbol{\varepsilon}}\left[\tilde{\boldsymbol{k}}\tilde{\boldsymbol{k}}^{\scriptscriptstyle\top}\right]\tilde{\boldsymbol{q}}}} = \frac{\tilde{\boldsymbol{q}}^{\scriptscriptstyle\top}\tilde{\boldsymbol{\mu}}}{\sqrt{\tilde{\boldsymbol{q}}^{\scriptscriptstyle\top}\left[\tilde{\boldsymbol{\mu}}\tilde{\boldsymbol{\mu}}^{\scriptscriptstyle\top} + \tilde{\boldsymbol{\Sigma}}\right]\tilde{\boldsymbol{q}}}} = \frac{1}{\sqrt{1 + \frac{\tilde{\boldsymbol{q}}^{\scriptscriptstyle\top}\tilde{\boldsymbol{\Sigma}}\tilde{\boldsymbol{q}}}{(\tilde{\boldsymbol{q}}^{\scriptscriptstyle\top}\tilde{\boldsymbol{\mu}})^2}}}\end{equation<br />
è¿™æ˜¯å…³äºéè´Ÿå‹çº¿æ€§Attentionçš„ä¸€èˆ¬ç»“æœï¼Œç°åœ¨è¿˜æ²¡åšä»»ä½•è¿‘ä¼¼ï¼Œå…¶ä¸­$\tilde{\boldsymbol{\mu}},\tilde{\boldsymbol{\Sigma}}$åˆ†åˆ«æ˜¯$\tilde{\boldsymbol{k}}$åºåˆ—çš„å‡å€¼å‘é‡å’Œåæ–¹å·®çŸ©é˜µã€‚</p>
<p>ä»è¿™ä¸ªç»“æœå¯ä»¥çœ‹å‡ºï¼Œéè´Ÿå‹çº¿æ€§Attentionä¹Ÿå¯èƒ½ä»»æ„ç¨€ç–ï¼ˆå³$S(\boldsymbol{a})\to 0$ï¼‰ï¼Œåªéœ€è¦å‡å€¼è¶‹äº0ï¼Œæˆ–è€…åæ–¹å·®è¶‹äº$\infty$ï¼Œä¹Ÿå°±æ˜¯è¯´$\tilde{\boldsymbol{k}}$åºåˆ—çš„ä¿¡å™ªæ¯”å°½å¯èƒ½å°ã€‚ç„¶è€Œ$\tilde{\boldsymbol{k}}$åºåˆ—æ˜¯ä¸€ä¸ªéè´Ÿå‘é‡åºåˆ—ï¼Œä¿¡å™ªæ¯”å¾ˆå°çš„éè´Ÿåºåˆ—æ„å‘³ç€åºåˆ—ä¸­å¤§éƒ¨åˆ†å…ƒç´ éƒ½æ˜¯ç›¸è¿‘çš„ï¼Œäºæ˜¯è¿™æ ·çš„åºåˆ—èƒ½è¡¨è¾¾çš„ä¿¡æ¯æœ‰é™ï¼Œä¹Ÿæ„å‘³ç€çº¿æ€§Attentioné€šå¸¸åªèƒ½è¡¨ç¤ºç»å¯¹ä½ç½®çš„é‡è¦æ€§ï¼ˆæ¯”å¦‚AttentionçŸ©é˜µå³æŸä¸€åˆ—éƒ½æ˜¯1ï¼‰ï¼Œè€Œæ— æ³•å¾ˆå¥½åœ°è¡¨è¾¾ç›¸å¯¹ä½ç½®çš„é‡è¦æ€§ï¼Œè¿™æœ¬è´¨ä¸Šä¹Ÿæ˜¯çº¿æ€§Attentionçš„ä½ç§©ç“¶é¢ˆçš„ä½“ç°ã€‚</p>
<p>ä¸ºäº†æ›´å½¢è±¡åœ°æ„ŸçŸ¥$S(\boldsymbol{a})$çš„å˜åŒ–è§„å¾‹ï¼Œæˆ‘ä»¬ä¸å¦¨å‡è®¾ä¸€ç§æœ€ç®€å•çš„æƒ…å†µï¼š$\tilde{\boldsymbol{k}}$çš„æ¯ä¸€ä¸ªåˆ†é‡æ˜¯ç‹¬ç«‹åŒåˆ†å¸ƒçš„ï¼Œè¿™æ—¶å€™å‡å€¼å‘é‡å¯ä»¥ç®€åŒ–ä¸º$\tilde{\mu}\boldsymbol{1}$ï¼Œåæ–¹å·®çŸ©é˜µåˆ™å¯ä»¥ç®€åŒ–ä¸º$\tilde{\sigma}^2\boldsymbol{I}$ï¼Œé‚£ä¹ˆ$S(\boldsymbol{a})$çš„å…¬å¼å¯ä»¥è¿›ä¸€æ­¥ç®€åŒ–ä¸º<br />
\begin{equation}S(\boldsymbol{a}) = \frac{1}{\sqrt{1 + \left(\frac{\tilde{\sigma}}{\tilde{\mu}}\frac{\Vert\tilde{\boldsymbol{q}}\Vert_2}{\Vert\tilde{\boldsymbol{q}}\Vert_1}\right)^2}}\end{equation}<br />
è¿™ä¸ªç»“æœè§‚å¯Ÿèµ·æ¥å°±æ›´ç›´è§‚äº†ï¼Œè¦æƒ³çº¿æ€§æ³¨æ„åŠ›å˜å¾—ç¨€ç–ï¼Œä¸€ä¸ªæ–¹å‘æ˜¯å¢å¤§$\frac{\tilde{\sigma}}{\tilde{\mu}}$ï¼Œå³é™ä½$\tilde{\boldsymbol{k}}$åºåˆ—çš„ä¿¡å™ªæ¯”ï¼Œå¦ä¸€ä¸ªæ–¹å‘åˆ™æ˜¯å¢å¤§$\frac{\Vert\boldsymbol{q}\Vert_2}{\Vert\boldsymbol{q}\Vert_1}$ï¼Œè¯¥å› å­æœ€å¤§å€¼æ˜¯$\sqrt{d}$ï¼Œå…¶ä¸­$d$æ˜¯$\boldsymbol{q},\boldsymbol{k}$çš„ç»´æ•°ï¼Œæ‰€ä»¥å¢å¤§å®ƒæ„å‘³ç€è¦å¢å¤§$d$ï¼Œè€Œå¢å¤§äº†$d$æ„å‘³ç€æé«˜äº†æ³¨æ„åŠ›çŸ©é˜µçš„ç§©çš„ä¸Šé™ï¼Œè¿™è·Ÿä½ç§©ç“¶é¢ˆè§†è§’çš„ç»“è®ºä¸€æ ·ï¼Œåªæœ‰å¢å¤§$d$æ‰èƒ½ä»æ ¹æœ¬ä¸Šç¼“è§£çº¿æ€§Attentionçš„ä¸è¶³ã€‚</p>
<p>ç‰¹åˆ«åœ°ï¼Œæˆ‘ä»¬åœ¨<a href="/archives/8601">ã€ŠTransformerå‡çº§ä¹‹è·¯ï¼š5ã€ä½œä¸ºæ— é™ç»´çš„çº¿æ€§Attentionã€‹</a>ä¹Ÿåˆ†æè¿‡ï¼Œæ ‡å‡†Attentionä¹Ÿå¯ä»¥ç†è§£ä¸ºä¸€ç§æ— é™ç»´çš„çº¿æ€§Attentionï¼Œä¹Ÿå°±æ˜¯è¯´ç†è®ºä¸Šåªæœ‰å°†$d$å¢åŠ åˆ°æ— ç©·å¤§ï¼Œæ‰èƒ½å½»åº•å¼¥åˆä¸¤è€…çš„å·®è·ã€‚</p>
<h2 id="_6">çº¿æ€§è¡°å‡</h2>
<p>æœ€åï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹åœ¨<a href="/archives/9554">ã€ŠGoogleæ–°ä½œè¯•å›¾â€œå¤æ´»â€RNNï¼šRNNèƒ½å¦å†æ¬¡è¾‰ç…Œï¼Ÿã€‹</a>ä»‹ç»è¿‡çš„çº¿æ€§RNNæ¨¡å‹ç³»åˆ—ï¼Œå®ƒä»¬çš„ç‰¹ç‚¹æ˜¯å¸¦æœ‰ä¸€ä¸ªæ˜¾å¼çš„é€’å½’ï¼Œè¿™å¯ä»¥çœ‹æˆä¸€ä¸ªç®€å•çš„Attentionï¼š<br />
\begin{equation}\boldsymbol{a} = (a_1,a_2,\cdots,a_{n-1},a_n) = (\lambda^{n-1},\lambda^{n-2},\cdots,\lambda,1)\end{equation}<br />
å…¶ä¸­$\lambda\in(0,1]$ã€‚å¯ä»¥ç®—å‡º<br />
\begin{equation}S(\boldsymbol{a}) = \sqrt{\frac{1 - \lambda^n}{n(1-\lambda)}\frac{1+\lambda}{1+\lambda^n}} &lt; \sqrt{\frac{1}{n}\frac{1+\lambda}{(1-\lambda)(1+\lambda^n)}}\end{equation}<br />
å½“$\lambda &lt; 1$æ—¶ï¼Œåªè¦$n\to\infty$ï¼Œæ€»æœ‰$S(\boldsymbol{a})\to 0$ï¼Œæ‰€ä»¥å¯¹äºå¸¦æœ‰æ˜¾å¼Decayçš„çº¿æ€§RNNæ¨¡å‹æ¥è¯´ï¼Œç¨€ç–æ€§æ˜¯ä¸æˆé—®é¢˜çš„ï¼Œå®ƒçš„é—®é¢˜æ˜¯åªèƒ½è¡¨è¾¾éšç€ç›¸å¯¹ä½ç½®å¢å¤§è€Œè¡°å‡çš„ã€å›ºå®šä¸å˜çš„æ³¨æ„åŠ›ï¼Œä»è€Œæ— æ³•è‡ªé€‚åº”åœ°å…³æ³¨åˆ°è·ç¦»è¶³å¤Ÿé•¿çš„Contextã€‚</p>
<h2 id="_7">æ–‡ç« å°ç»“</h2>
<p>æœ¬æ–‡æå‡ºäº†é€šè¿‡AttentionçŸ©é˜µçš„ç¨€ç–ç¨‹åº¦æ¥è€ƒå¯Ÿä¸åŒAttentionæœºåˆ¶æ½œåŠ›çš„æ€è·¯ï¼Œå¾—å‡ºäºŒæ¬¡å‹Attentionæœºåˆ¶æœ‰å¯èƒ½å®ç°ä»»æ„ç¨€ç–çš„AttentionçŸ©é˜µï¼Œçº¿æ€§Attentionåˆ™å¹¶ä¸å®¹æ˜“å®ç°è¿™ç§ç¨€ç–ï¼Œæˆ–è€…åªèƒ½å®ç°ç»å¯¹ä½ç½®ç›¸å…³çš„ç¨€ç–ï¼Œè¿™å¯èƒ½æ˜¯çº¿æ€§Attentionèƒ½åŠ›æœ‰æ‰€é™åˆ¶çš„åŸå› ä¹‹ä¸€ã€‚</p>
<p><em><strong>è½¬è½½åˆ°è¯·åŒ…æ‹¬æœ¬æ–‡åœ°å€ï¼š</strong><a href="https://spaces.ac.cn/archives/9889">https://spaces.ac.cn/archives/9889</a></em></p>
<p><em><strong>æ›´è¯¦ç»†çš„è½¬è½½äº‹å®œè¯·å‚è€ƒï¼š</strong></em><a href="https://spaces.ac.cn/archives/6508#%E6%96%87%E7%AB%A0%E5%A6%82%E4%BD%95%E8%BD%AC%E8%BD%BD/%E5%BC%95%E7%94%A8" title="ã€Šç§‘å­¦ç©ºé—´FAQã€‹">ã€Šç§‘å­¦ç©ºé—´FAQã€‹</a></p>
<p><strong>å¦‚æœæ‚¨è¿˜æœ‰ä»€ä¹ˆç–‘æƒ‘æˆ–å»ºè®®ï¼Œæ¬¢è¿åœ¨ä¸‹æ–¹è¯„è®ºåŒºç»§ç»­è®¨è®ºã€‚</strong></p>
<p><strong>å¦‚æœæ‚¨è§‰å¾—æœ¬æ–‡è¿˜ä¸é”™ï¼Œæ¬¢è¿åˆ†äº«/æ‰“èµæœ¬æ–‡ã€‚æ‰“èµå¹¶éè¦ä»ä¸­è·å¾—æ”¶ç›Šï¼Œè€Œæ˜¯å¸Œæœ›çŸ¥é“ç§‘å­¦ç©ºé—´è·å¾—äº†å¤šå°‘è¯»è€…çš„çœŸå¿ƒå…³æ³¨ã€‚å½“ç„¶ï¼Œå¦‚æœä½ æ— è§†å®ƒï¼Œä¹Ÿä¸ä¼šå½±å“ä½ çš„é˜…è¯»ã€‚å†æ¬¡è¡¨ç¤ºæ¬¢è¿å’Œæ„Ÿè°¢ï¼</strong></p>
<p>æ‰“èµ</p>
<p><img alt="ç§‘å­¦ç©ºé—´" src="https://spaces.ac.cn/usr/themes/geekg/payment/wx.png" /></p>
<p>å¾®ä¿¡æ‰“èµ</p>
<p><img alt="ç§‘å­¦ç©ºé—´" src="https://spaces.ac.cn/usr/themes/geekg/payment/zfb.png" /></p>
<p>æ”¯ä»˜å®æ‰“èµ</p>
<p>å› ä¸ºç½‘ç«™åå°å¯¹æ‰“èµå¹¶æ— è®°å½•ï¼Œå› æ­¤æ¬¢è¿åœ¨æ‰“èµæ—¶å€™å¤‡æ³¨ç•™è¨€ã€‚ä½ è¿˜å¯ä»¥<a href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&amp;email=tN7d1drY3drrx8H0xcWa19vZ"><strong>ç‚¹å‡»è¿™é‡Œ</strong></a>æˆ–åœ¨ä¸‹æ–¹è¯„è®ºåŒºç•™è¨€æ¥å‘ŠçŸ¥ä½ çš„å»ºè®®æˆ–éœ€æ±‚ã€‚</p>
<p><strong>å¦‚æœæ‚¨éœ€è¦å¼•ç”¨æœ¬æ–‡ï¼Œè¯·å‚è€ƒï¼š</strong></p>
<p>è‹å‰‘æ—. (Dec. 12, 2023). ã€Šæ³¨æ„åŠ›æœºåˆ¶çœŸçš„å¯ä»¥â€œé›†ä¸­æ³¨æ„åŠ›â€å—ï¼Ÿ ã€‹[Blog post]. Retrieved from <a href="https://spaces.ac.cn/archives/9889">https://spaces.ac.cn/archives/9889</a></p>
<p>@online{kexuefm-9889,<br />
title={æ³¨æ„åŠ›æœºåˆ¶çœŸçš„å¯ä»¥â€œé›†ä¸­æ³¨æ„åŠ›â€å—ï¼Ÿ},<br />
author={è‹å‰‘æ—},<br />
year={2023},<br />
month={Dec},<br />
url={\url{https://spaces.ac.cn/archives/9889}},<br />
} </p>
<hr />
<h2 id="_8">å…¬å¼æ¨å¯¼ä¸æ³¨é‡Š</h2>
<p>TODO: æ·»åŠ è¯¦ç»†çš„æ•°å­¦å…¬å¼æ¨å¯¼å’Œæ³¨é‡Š</p>
        </div>
    </div>
</body>
</html>