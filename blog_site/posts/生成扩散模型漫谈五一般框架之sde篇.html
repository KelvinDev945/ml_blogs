<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç”Ÿæˆæ‰©æ•£æ¨¡å‹æ¼«è°ˆï¼ˆäº”ï¼‰ï¼šä¸€èˆ¬æ¡†æ¶ä¹‹SDEç¯‡</title>
    <style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    line-height: 1.6; color: #333; max-width: 900px; margin: 0 auto; padding: 20px; background: #f5f5f5;
}
.container { background: white; padding: 40px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
header { border-bottom: 2px solid #e0e0e0; padding-bottom: 20px; margin-bottom: 30px; }
h1 { color: #2c3e50; margin-bottom: 10px; font-size: 2em; }
.meta { color: #666; font-size: 0.9em; margin-bottom: 20px; }
.content { margin-top: 30px; overflow-wrap: break-word; }
.content h2 { color: #34495e; margin-top: 30px; margin-bottom: 15px; border-bottom: 1px solid #eee; padding-bottom: 5px; }
.content p { margin-bottom: 15px; }
.content pre { background: #f8f8f8; padding: 15px; border-radius: 5px; overflow-x: auto; border-left: 3px solid #3498db; margin: 15px 0; }
.content code { background: #f8f8f8; padding: 2px 5px; border-radius: 3px; font-family: monospace; font-size: 0.9em; }
.content blockquote { border-left: 4px solid #3498db; padding-left: 20px; margin: 20px 0; color: #555; font-style: italic; }
.content table { border-collapse: collapse; width: 100%; margin: 20px 0; }
.content th, .content td { border: 1px solid #ddd; padding: 10px; text-align: left; }
.back-link { display: inline-block; margin-bottom: 20px; color: #3498db; text-decoration: none; font-weight: 500; }
</style>
    
<script>
    window.MathJax = {
        tex: {
            inlineMath: [['$', '$'], ['\(', '\)']],
            displayMath: [['$$', '$$'], ['\[', '\]']],
            processEscapes: true
        }
    };
</script>
<script id="MathJax-script" async src="https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js"></script>

</head>
<body>
    <div class="container">
        <a href="../index.html" class="back-link">â† è¿”å›é¦–é¡µ</a>
        <header>
            <h1>ç”Ÿæˆæ‰©æ•£æ¨¡å‹æ¼«è°ˆï¼ˆäº”ï¼‰ï¼šä¸€èˆ¬æ¡†æ¶ä¹‹SDEç¯‡</h1>
            <div class="meta">ğŸ“… æœ€åæ›´æ–°: 2025-11-26 | ğŸ“„ å¤§å°: 50.6 KB</div>
        </header>
        <div class="content">
            <p><strong>åŸæ–‡é“¾æ¥</strong>: <a href="https://spaces.ac.cn/archives/9209">https://spaces.ac.cn/archives/9209</a></p>
<p><strong>å‘å¸ƒæ—¥æœŸ</strong>: </p>
<hr />
<p>åœ¨å†™<a href="/search/%E7%94%9F%E6%88%90%E6%89%A9%E6%95%A3%E6%A8%A1%E5%9E%8B/">ç”Ÿæˆæ‰©æ•£æ¨¡å‹</a>çš„ç¬¬ä¸€ç¯‡æ–‡ç« æ—¶ï¼Œå°±æœ‰è¯»è€…åœ¨è¯„è®ºåŒºæ¨èäº†å®‹é£åšå£«çš„è®ºæ–‡<a href="https://papers.cool/arxiv/2011.13456">ã€ŠScore-Based Generative Modeling through Stochastic Differential Equationsã€‹</a>ï¼Œå¯ä»¥è¯´è¯¥è®ºæ–‡æ„å»ºäº†ä¸€ä¸ªç›¸å½“ä¸€èˆ¬åŒ–çš„ç”Ÿæˆæ‰©æ•£æ¨¡å‹ç†è®ºæ¡†æ¶ï¼Œå°†DDPMã€SDEã€ODEç­‰è¯¸å¤šç»“æœè”ç³»äº†èµ·æ¥ã€‚è¯šç„¶ï¼Œè¿™æ˜¯ä¸€ç¯‡å¥½è®ºæ–‡ï¼Œä½†å¹¶ä¸æ˜¯ä¸€ç¯‡é€‚åˆåˆå­¦è€…çš„è®ºæ–‡ï¼Œé‡Œè¾¹ç›´æ¥ç”¨åˆ°äº†éšæœºå¾®åˆ†æ–¹ç¨‹ï¼ˆSDEï¼‰ã€Fokker-Planckæ–¹ç¨‹ã€å¾—åˆ†åŒ¹é…ç­‰å¤§é‡ç»“æœï¼Œä¸Šæ‰‹éš¾åº¦è¿˜æ˜¯é¢‡å¤§çš„ã€‚</p>
<p>ä¸è¿‡ï¼Œåœ¨ç»è¿‡äº†å‰å››ç¯‡æ–‡ç« çš„ç§¯ç´¯åï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥å°è¯•å»å­¦ä¹ ä¸€ä¸‹è¿™ç¯‡è®ºæ–‡äº†ã€‚åœ¨æ¥ä¸‹æ¥çš„æ–‡ç« ä¸­ï¼Œç¬”è€…å°†å°è¯•ä»å°½å¯èƒ½å°‘çš„ç†è®ºåŸºç¡€å‡ºå‘ï¼Œå°½é‡å¤ç°åŸè®ºæ–‡ä¸­çš„æ¨å¯¼ç»“æœã€‚</p>
<h2 id="_1">éšæœºå¾®åˆ†</h2>
<p>åœ¨DDPMä¸­ï¼Œæ‰©æ•£è¿‡ç¨‹è¢«åˆ’åˆ†ä¸ºäº†å›ºå®šçš„$T$æ­¥ï¼Œè¿˜æ˜¯ç”¨<a href="/archives/9119">ã€Šç”Ÿæˆæ‰©æ•£æ¨¡å‹æ¼«è°ˆï¼ˆä¸€ï¼‰ï¼šDDPM = æ‹†æ¥¼ + å»ºæ¥¼ã€‹</a>çš„ç±»æ¯”æ¥è¯´ï¼Œå°±æ˜¯â€œæ‹†æ¥¼â€å’Œâ€œå»ºæ¥¼â€éƒ½è¢«äº‹å…ˆåˆ’åˆ†ä¸ºäº†$T$æ­¥ï¼Œè¿™ä¸ªåˆ’åˆ†æœ‰ç€ç›¸å½“å¤§çš„äººä¸ºæ€§ã€‚äº‹å®ä¸Šï¼ŒçœŸå®çš„â€œæ‹†â€ã€â€œå»ºâ€è¿‡ç¨‹åº”è¯¥æ˜¯æ²¡æœ‰åˆ»æ„åˆ’åˆ†çš„æ­¥éª¤çš„ï¼Œæˆ‘ä»¬å¯ä»¥å°†å®ƒä»¬ç†è§£ä¸ºä¸€ä¸ªåœ¨æ—¶é—´ä¸Šè¿ç»­çš„å˜æ¢è¿‡ç¨‹ï¼Œå¯ä»¥ç”¨éšæœºå¾®åˆ†æ–¹ç¨‹ï¼ˆStochastic Differential Equationï¼ŒSDEï¼‰æ¥æè¿°ã€‚</p>
<p>ä¸ºæ­¤ï¼Œæˆ‘ä»¬ç”¨ä¸‹è¿°SDEæè¿°å‰å‘è¿‡ç¨‹ï¼ˆâ€œæ‹†æ¥¼â€ï¼‰ï¼š<br />
\begin{equation}d\boldsymbol{x} = \boldsymbol{f}<em t="t" t_Delta="t+\Delta">t(\boldsymbol{x}) dt + g_t d\boldsymbol{w}\label{eq:sde-forward}\end{equation}<br />
ç›¸ä¿¡å¾ˆå¤šè¯»è€…éƒ½å¯¹SDEå¾ˆé™Œç”Ÿï¼Œç¬”è€…ä¹Ÿåªæ˜¯åœ¨ç¡•å£«é˜¶æ®µåˆšå¥½æ¥è§¦è¿‡ä¸€æ®µæ—¶é—´ï¼Œç•¥æ‡‚çš®æ¯›ã€‚ä¸è¿‡ä¸æ‡‚ä¸è¦ç´§ï¼Œæˆ‘ä»¬åªéœ€è¦å°†å®ƒçœ‹æˆæ˜¯ä¸‹è¿°ç¦»æ•£å½¢å¼åœ¨$\Delta t\to 0$æ—¶çš„æé™ï¼š<br />
\begin{equation}\boldsymbol{x}</em>} - \boldsymbol{x}_t = \boldsymbol{f}_t(\boldsymbol{x}_t) \Delta t + g_t \sqrt{\Delta t}\boldsymbol{\varepsilon},\quad \boldsymbol{\varepsilon}\sim \mathcal{N}(\boldsymbol{0}, \boldsymbol{I})\label{eq:sde-discrete}\end{equation<br />
å†ç›´ç™½ä¸€ç‚¹ï¼Œå¦‚æœå‡è®¾æ‹†æ¥¼éœ€è¦$1$å¤©ï¼Œé‚£ä¹ˆæ‹†æ¥¼å°±æ˜¯$\boldsymbol{x}$ä»$t=0$åˆ°$t=1$çš„å˜åŒ–è¿‡ç¨‹ï¼Œæ¯ä¸€å°æ­¥çš„å˜åŒ–æˆ‘ä»¬å¯ä»¥ç”¨ä¸Šè¿°æ–¹ç¨‹æè¿°ã€‚è‡³äºæ—¶é—´é—´éš”$\Delta t$ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰åšç‰¹æ®Šé™åˆ¶ï¼Œåªæ˜¯è¶Šå°çš„$\Delta t$æ„å‘³ç€æ˜¯å¯¹åŸå§‹SDEè¶Šå¥½çš„è¿‘ä¼¼ï¼Œå¦‚æœå–$\Delta t=0.001$ï¼Œé‚£å°±å¯¹åº”äºåŸæ¥çš„$T=1000$ï¼Œå¦‚æœæ˜¯$\Delta t = 0.01$åˆ™å¯¹åº”äº$T=100$ï¼Œç­‰ç­‰ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨è¿ç»­æ—¶é—´çš„SDEè§†è§’ä¹‹ä¸‹ï¼Œä¸åŒçš„$T$æ˜¯SDEä¸åŒçš„ç¦»æ•£åŒ–ç¨‹åº¦çš„ä½“ç°ï¼Œå®ƒä»¬ä¼šè‡ªåŠ¨åœ°å¯¼è‡´ç›¸ä¼¼çš„ç»“æœï¼Œæˆ‘ä»¬ä¸éœ€è¦äº‹å…ˆæŒ‡å®š$T$ï¼Œè€Œæ˜¯æ ¹æ®å®é™…æƒ…å†µä¸‹çš„ç²¾ç¡®åº¦æ¥å–é€‚å½“çš„$T$è¿›è¡Œæ•°å€¼è®¡ç®—ã€‚</p>
<p>æ‰€ä»¥ï¼Œå¼•å…¥SDEå½¢å¼æ¥æè¿°æ‰©æ•£æ¨¡å‹çš„æœ¬è´¨å¥½å¤„æ˜¯â€œå°†ç†è®ºåˆ†æå’Œä»£ç å®ç°åˆ†ç¦»å¼€æ¥â€ï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ©è¿ç»­æ€§SDEçš„æ•°å­¦å·¥å…·å¯¹å®ƒåšåˆ†æï¼Œè€Œå®è·µçš„æ—¶å€™ï¼Œåˆ™åªéœ€è¦ç”¨ä»»æ„é€‚å½“çš„ç¦»æ•£åŒ–æ–¹æ¡ˆå¯¹SDEè¿›è¡Œæ•°å€¼è®¡ç®—ã€‚</p>
<p>å¯¹äºå¼$\eqref{eq:sde-discrete}$ï¼Œè¯»è€…å¯èƒ½æ¯”è¾ƒæœ‰ç–‘æƒ‘çš„æ˜¯ä¸ºä»€ä¹ˆå³ç«¯ç¬¬ä¸€é¡¹æ˜¯$\mathcal{O}(\Delta t)$çš„ï¼Œè€Œç¬¬äºŒé¡¹æ˜¯$\mathcal{O}(\sqrt{\Delta t})$çš„ï¼Ÿä¹Ÿå°±æ˜¯è¯´ä¸ºä»€ä¹ˆéšæœºé¡¹çš„é˜¶è¦æ¯”ç¡®å®šé¡¹çš„é˜¶è¦é«˜ï¼Ÿè¿™ä¸ªè¿˜çœŸä¸æ˜¯é‚£ä¹ˆå®¹æ˜“è§£é‡Šï¼Œä¹Ÿæ˜¯SDEæ¯”è¾ƒè®©äººè¿·æƒ‘çš„åœ°æ–¹ä¹‹ä¸€ã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯$\boldsymbol{\varepsilon}$ä¸€ç›´æœä»æ ‡å‡†æ­£æ€åˆ†å¸ƒï¼Œå¦‚æœéšæœºé¡¹çš„æƒé‡ä¹Ÿæ˜¯$\mathcal{O}(\Delta t)$ï¼Œé‚£ä¹ˆç”±äºæ ‡å‡†æ­£æ€åˆ†å¸ƒçš„å‡å€¼ä¸º$\boldsymbol{0}$ã€åæ–¹å·®ä¸º$ \boldsymbol{I}$ï¼Œä¸´è¿‘çš„éšæœºæ•ˆåº”ä¼šç›¸äº’æŠµæ¶ˆæ‰ï¼Œè¦æ”¾å¤§åˆ°$\mathcal{O}(\sqrt{\Delta t})$æ‰èƒ½åœ¨é•¿æœŸç»“æœä¸­ä½“ç°å‡ºéšæœºæ•ˆåº”çš„ä½œç”¨ã€‚</p>
<h2 id="_2">é€†å‘æ–¹ç¨‹</h2>
<p>ç”¨æ¦‚ç‡çš„è¯­è¨€ï¼Œå¼$\eqref{eq:sde-discrete}$æ„å‘³ç€æ¡ä»¶æ¦‚ç‡ä¸º<br />
\begin{equation}\begin{aligned}<br />
p(\boldsymbol{x}<em t="t" t_Delta="t+\Delta">{t+\Delta t}|\boldsymbol{x}_t) =&amp;\, \mathcal{N}\left(\boldsymbol{x}</em>};\boldsymbol{x<em t="t" t_Delta="t+\Delta">t + \boldsymbol{f}_t(\boldsymbol{x}_t) \Delta t, g_t^2\Delta t \,\boldsymbol{I}\right)\\\<br />
\propto&amp;\, \exp\left(-\frac{\Vert\boldsymbol{x}</em>} - \boldsymbol{x<em t="t" t_Delta="t+\Delta">t - \boldsymbol{f}_t(\boldsymbol{x}_t) \Delta t\Vert^2}{2 g_t^2\Delta t}\right)<br />
\end{aligned}\label{eq:sde-proba}\end{equation}<br />
ç®€å•èµ·è§ï¼Œè¿™é‡Œæ²¡æœ‰å†™å‡ºæ— å…³ç´§è¦çš„å½’ä¸€åŒ–å› å­ã€‚æŒ‰ç…§DDPMçš„æ€æƒ³ï¼Œæˆ‘ä»¬æœ€ç»ˆæ˜¯æƒ³è¦ä»â€œæ‹†æ¥¼â€çš„è¿‡ç¨‹ä¸­å­¦ä¼šâ€œå»ºæ¥¼â€ï¼Œå³å¾—åˆ°$p(\boldsymbol{x}_t|\boldsymbol{x}</em>)$ï¼Œä¸ºæ­¤ï¼Œæˆ‘ä»¬åƒ<a href="/archives/9164">ã€Šç”Ÿæˆæ‰©æ•£æ¨¡å‹æ¼«è°ˆï¼ˆä¸‰ï¼‰ï¼šDDPM = è´å¶æ–¯ + å»å™ªã€‹</a>ä¸€æ ·ï¼Œç”¨è´å¶æ–¯å®šç†ï¼š<br />
\begin{equation}\begin{aligned}<br />
p(\boldsymbol{x}<em t="t" t_Delta="t+\Delta">t|\boldsymbol{x}</em>}) =&amp;\, \frac{p(\boldsymbol{x<em t="t" t_Delta="t+\Delta">{t+\Delta t}|\boldsymbol{x}_t)p(\boldsymbol{x}_t)}{p(\boldsymbol{x}</em>})} = p(\boldsymbol{x<em t="t" t_Delta="t+\Delta">{t+\Delta t}|\boldsymbol{x}_t) \exp\left(\log p(\boldsymbol{x}_t) - \log p(\boldsymbol{x}</em>)\right)\\\<br />
\propto&amp;\, \exp\left(-\frac{\Vert\boldsymbol{x}<em t="t" t_Delta="t+\Delta">{t+\Delta t} - \boldsymbol{x}_t - \boldsymbol{f}_t(\boldsymbol{x}_t) \Delta t\Vert^2}{2 g_t^2\Delta t} + \log p(\boldsymbol{x}_t) - \log p(\boldsymbol{x}</em>)\right)<br />
\end{aligned}\label{eq:bayes-dt}\end{equation}<br />
ä¸éš¾å‘ç°ï¼Œå½“$\Delta t$è¶³å¤Ÿå°æ—¶ï¼Œåªæœ‰å½“$\boldsymbol{x}<em t="t" t_Delta="t+\Delta">{t+\Delta t}$ä¸$\boldsymbol{x}_t$è¶³å¤Ÿæ¥è¿‘æ—¶ï¼Œ$p(\boldsymbol{x}</em>}|\boldsymbol{x<em t="t" t_Delta="t+\Delta">t)$æ‰ä¼šæ˜æ˜¾ä¸ç­‰äº0ï¼Œåè¿‡æ¥ä¹Ÿåªæœ‰è¿™ç§æƒ…å†µä¸‹$p(\boldsymbol{x}_t|\boldsymbol{x}</em>})$æ‰ä¼šæ˜æ˜¾ä¸ç­‰äº0ã€‚å› æ­¤ï¼Œæˆ‘ä»¬åªéœ€è¦å¯¹$\boldsymbol{x<em t="t" t_Delta="t+\Delta">{t+\Delta t}$ä¸$\boldsymbol{x}_t$è¶³å¤Ÿæ¥è¿‘æ—¶çš„æƒ…å½¢åšè¿‘ä¼¼åˆ†æï¼Œä¸ºæ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨æ³°å‹’å±•å¼€ï¼š<br />
\begin{equation}\log p(\boldsymbol{x}</em>})\approx \log p(\boldsymbol{x<em t="t" t_Delta="t+\Delta">t) + (\boldsymbol{x}</em>} - \boldsymbol{x<em _boldsymbol_x="\boldsymbol{x">t)\cdot \nabla</em><em t="t" t_Delta="t+\Delta">t}\log p(\boldsymbol{x}_t) + \Delta t \frac{\partial}{\partial t}\log p(\boldsymbol{x}_t)\end{equation}<br />
æ³¨æ„ä¸è¦å¿½ç•¥äº†$\frac{\partial}{\partial t}$é¡¹ï¼Œå› ä¸º$p(\boldsymbol{x}_t)$å®é™…ä¸Šæ˜¯â€œ$t$æ—¶åˆ»éšæœºå˜é‡ç­‰äº$\boldsymbol{x}_t$çš„æ¦‚ç‡å¯†åº¦â€ï¼Œè€Œ$p(\boldsymbol{x}</em>})$å®é™…ä¸Šæ˜¯â€œ$t+\Delta t$æ—¶åˆ»éšæœºå˜é‡ç­‰äº$\boldsymbol{x<em t="t" t_Delta="t+\Delta">{t+\Delta t}$çš„æ¦‚ç‡å¯†åº¦â€ï¼Œä¹Ÿå°±æ˜¯è¯´$p(\boldsymbol{x}_t)$å®é™…ä¸ŠåŒæ—¶æ˜¯$t$å’Œ$\boldsymbol{x}_t$çš„å‡½æ•°ï¼Œæ‰€ä»¥è¦å¤šä¸€é¡¹$t$çš„åå¯¼æ•°ã€‚ä»£å…¥åˆ°å¼$\eqref{eq:bayes-dt}$åï¼Œé…æ–¹å¾—åˆ°<br />
\begin{equation}p(\boldsymbol{x}_t|\boldsymbol{x}</em>}) \propto \exp\left(-\frac{\Vert\boldsymbol{x<em _boldsymbol_x="\boldsymbol{x">{t+\Delta t} - \boldsymbol{x}_t - \left[\boldsymbol{f}_t(\boldsymbol{x}_t) - g_t^2\nabla</em><em t="t" t_Delta="t+\Delta">t}\log p(\boldsymbol{x}_t) \right]\Delta t\Vert^2}{2 g_t^2\Delta t} + \mathcal{O}(\Delta t)\right)\end{equation}<br />
å½“$\Delta t\to 0$æ—¶ï¼Œ$\mathcal{O}(\Delta t)\to 0$ä¸èµ·ä½œç”¨ï¼Œå› æ­¤<br />
\begin{equation}\begin{aligned}<br />
p(\boldsymbol{x}_t|\boldsymbol{x}</em>}) \propto&amp;\, \exp\left(-\frac{\Vert\boldsymbol{x<em _boldsymbol_x="\boldsymbol{x">{t+\Delta t} - \boldsymbol{x}_t - \left[\boldsymbol{f}_t(\boldsymbol{x}_t) - g_t^2\nabla</em><em t="t" t_Delta="t+\Delta">t}\log p(\boldsymbol{x}_t) \right]\Delta t\Vert^2}{2 g_t^2\Delta t}\right) \\\<br />
\approx&amp;\,\exp\left(-\frac{\Vert \boldsymbol{x}_t - \boldsymbol{x}</em>} + \left[\boldsymbol{f<em t="t" t_Delta="t+\Delta">{t+\Delta t}(\boldsymbol{x}</em>}) - g_{t+\Delta t}^2\nabla_{\boldsymbol{x<em t="t" t_Delta="t+\Delta">{t+\Delta t}}\log p(\boldsymbol{x}</em>\right)}) \right]\Delta t\Vert^2}{2 g_{t+\Delta t}^2\Delta t<br />
\end{aligned}\end{equation}<br />
å³$p(\boldsymbol{x}<em t="t" t_Delta="t+\Delta">t|\boldsymbol{x}</em>})$è¿‘ä¼¼ä¸€ä¸ªå‡å€¼ä¸º$\boldsymbol{x<em t="t" t_Delta="t+\Delta">{t+\Delta t} - \left[\boldsymbol{f}</em>}(\boldsymbol{x<em t="t" t_Delta="t+\Delta">{t+\Delta t}) - g</em>}^2\nabla_{\boldsymbol{x<em t="t" t_Delta="t+\Delta">{t+\Delta t}}\log p(\boldsymbol{x}</em>$çš„æ­£æ€åˆ†å¸ƒï¼Œå–$\Delta t\to 0$çš„æé™ï¼Œé‚£ä¹ˆå¯¹åº”äºSDEï¼š}) \right]\Delta t$ã€åæ–¹å·®ä¸º$g_{t+\Delta t}^2\Delta t\,\boldsymbol{I<br />
\begin{equation}d\boldsymbol{x} = \left[\boldsymbol{f}<em _boldsymbol_x="\boldsymbol{x">t(\boldsymbol{x}) - g_t^2\nabla</em>}}\log p_t(\boldsymbol{x}) \right] dt + g_t d\boldsymbol{w}\label{eq:reverse-sde}\end{equation<br />
è¿™å°±æ˜¯åå‘è¿‡ç¨‹å¯¹åº”çš„SDEï¼Œæœ€æ—©å‡ºç°åœ¨<a href="https://www.sciencedirect.com/science/article/pii/0304414982900515">ã€ŠReverse-Time Diffusion Equation Modelsã€‹</a>ä¸­ã€‚è¿™é‡Œæˆ‘ä»¬ç‰¹æ„åœ¨$p$å¤„æ ‡æ³¨äº†ä¸‹æ ‡$t$ï¼Œä»¥çªå‡ºè¿™æ˜¯$t$æ—¶åˆ»çš„åˆ†å¸ƒã€‚</p>
<h2 id="_3">å¾—åˆ†åŒ¹é…</h2>
<p>ç°åœ¨æˆ‘ä»¬å·²ç»å¾—åˆ°äº†é€†å‘çš„SDEä¸º$\eqref{eq:reverse-sde}$ï¼Œå¦‚æœè¿›ä¸€æ­¥çŸ¥é“$\nabla_{\boldsymbol{x}}\log p_t(\boldsymbol{x})$ï¼Œé‚£ä¹ˆå°±å¯ä»¥é€šè¿‡ç¦»æ•£åŒ–æ ¼å¼<br />
\begin{equation}\boldsymbol{x}<em t="t" t_Delta="t+\Delta">t - \boldsymbol{x}</em>} = - \left[\boldsymbol{f<em t="t" t_Delta="t+\Delta">{t+\Delta t}(\boldsymbol{x}</em>}) - g_{t+\Delta t}^2\nabla_{\boldsymbol{x<em t="t" t_Delta="t+\Delta">{t+\Delta t}}\log p(\boldsymbol{x}</em>}) \right]\Delta t - g_{t+\Delta t} \sqrt{\Delta t}\boldsymbol{\varepsilon}\label{eq:reverse-sde-discrete}\end{equation<br />
æ¥é€æ­¥å®Œæˆâ€œå»ºæ¥¼â€çš„ç”Ÿæˆè¿‡ç¨‹ã€å…¶ä¸­$\boldsymbol{\varepsilon}\sim \mathcal{N}(\boldsymbol{0}, \boldsymbol{I})$ã€‘ï¼Œä»è€Œå®Œæˆä¸€ä¸ªç”Ÿæˆæ‰©æ•£æ¨¡å‹çš„æ„å»ºã€‚</p>
<p>é‚£ä¹ˆå¦‚ä½•å¾—åˆ°$\nabla_{\boldsymbol{x}}\log p_t(\boldsymbol{x})$å‘¢ï¼Ÿ$t$æ—¶åˆ»çš„$p_t(\boldsymbol{x})$å°±æ˜¯å‰é¢çš„$p(\boldsymbol{x}<em 0="0" _Delta="\Delta" t_to="t\to">t)$ï¼Œå®ƒçš„å«ä¹‰å°±æ˜¯$t$æ—¶åˆ»çš„è¾¹ç¼˜åˆ†å¸ƒã€‚åœ¨å®é™…ä½¿ç”¨æ—¶ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šè®¾è®¡èƒ½æ‰¾åˆ°$p(\boldsymbol{x}_t|\boldsymbol{x}_0)$è§£æè§£çš„æ¨¡å‹ï¼Œè¿™æ„å‘³ç€<br />
\begin{equation}\small p(\boldsymbol{x}_t|\boldsymbol{x}_0) = \lim</em>}\int\cdots\iint p(\boldsymbol{x<em t="t" t-_Delta="t-\Delta">t|\boldsymbol{x}</em>})p(\boldsymbol{x<em t="t" t-2_Delta="t-2\Delta">{t-\Delta t}|\boldsymbol{x}</em>})\cdots p(\boldsymbol{x<em t="t" t-_Delta="t-\Delta">{\Delta t}|\boldsymbol{x}_0) d\boldsymbol{x}</em>} d\boldsymbol{x<em _Delta="\Delta" t="t">{t-2\Delta t}\cdots d\boldsymbol{x}</em>}\end{equation<br />
æ˜¯å¯ä»¥ç›´æ¥æ±‚å‡ºçš„ï¼Œæ¯”å¦‚å½“$\boldsymbol{f}<em _boldsymbol_x="\boldsymbol{x">t(\boldsymbol{x})$æ˜¯å…³äº$\boldsymbol{x}$çš„çº¿æ€§å‡½æ•°æ—¶ï¼Œ$p(\boldsymbol{x}_t|\boldsymbol{x}_0)$å°±å¯ä»¥è§£ææ±‚è§£ã€‚åœ¨æ­¤å‰æä¸‹ï¼Œæœ‰<br />
\begin{equation}p(\boldsymbol{x}_t) = \int p(\boldsymbol{x}_t|\boldsymbol{x}_0)\tilde{p}(\boldsymbol{x}_0)d\boldsymbol{x}_0=\mathbb{E}</em><em _boldsymbol_x="\boldsymbol{x">0}\left[p(\boldsymbol{x}_t|\boldsymbol{x}_0)\right]\end{equation}<br />
äºæ˜¯<br />
\begin{equation}\nabla</em><em _boldsymbol_x="\boldsymbol{x">t}\log p(\boldsymbol{x}_t) = \frac{\mathbb{E}</em><em _boldsymbol_x="\boldsymbol{x">0}\left[\nabla</em><em _boldsymbol_x="\boldsymbol{x">t} p(\boldsymbol{x}_t|\boldsymbol{x}_0)\right]}{\mathbb{E}</em><em _boldsymbol_x="\boldsymbol{x">0}\left[p(\boldsymbol{x}_t|\boldsymbol{x}_0)\right]} = \frac{\mathbb{E}</em><em _boldsymbol_x="\boldsymbol{x">0}\left[p(\boldsymbol{x}_t|\boldsymbol{x}_0)\nabla</em><em _boldsymbol_x="\boldsymbol{x">t} \log p(\boldsymbol{x}_t|\boldsymbol{x}_0)\right]}{\mathbb{E}</em><em _boldsymbol_x="\boldsymbol{x">0}\left[p(\boldsymbol{x}_t|\boldsymbol{x}_0)\right]}\end{equation}<br />
å¯ä»¥çœ‹åˆ°æœ€åçš„å¼å­å…·æœ‰â€œ$\nabla</em><em _boldsymbol_theta="\boldsymbol{\theta">t} \log p(\boldsymbol{x}_t|\boldsymbol{x}_0)$çš„åŠ æƒå¹³å‡â€çš„å½¢å¼ï¼Œç”±äºå‡è®¾äº†$p(\boldsymbol{x}_t|\boldsymbol{x}_0)$æœ‰è§£æè§£ï¼Œå› æ­¤ä¸Šå¼å®é™…ä¸Šæ˜¯èƒ½å¤Ÿç›´æ¥ä¼°ç®—çš„ï¼Œç„¶è€Œå®ƒæ¶‰åŠåˆ°å¯¹å…¨ä½“è®­ç»ƒæ ·æœ¬$\boldsymbol{x}_0$çš„å¹³å‡ï¼Œä¸€æ¥è®¡ç®—é‡å¤§ï¼ŒäºŒæ¥æ³›åŒ–èƒ½åŠ›ä¹Ÿä¸å¤Ÿå¥½ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¸Œæœ›ç”¨ç¥ç»ç½‘ç»œå­¦ä¸€ä¸ªå‡½æ•°$\boldsymbol{s}</em>}}(\boldsymbol{x<em _boldsymbol_x="\boldsymbol{x">t, t)$ï¼Œä½¿å¾—å®ƒèƒ½å¤Ÿç›´æ¥è®¡ç®—$\nabla</em>_t)$ã€‚}_t}\log p(\boldsymbol{x</p>
<p>å¾ˆå¤šè¯»è€…åº”è¯¥å¯¹å¦‚ä¸‹ç»“æœå¹¶ä¸é™Œç”Ÿï¼ˆæˆ–è€…æ¨å¯¼ä¸€éä¹Ÿä¸å›°éš¾ï¼‰ï¼š<br />
\begin{equation}\mathbb{E}[\boldsymbol{x}] = \mathop{\text{argmin}}<em _boldsymbol_x="\boldsymbol{x">{\boldsymbol{\mu}}\mathbb{E}</em>}}\left[\Vert \boldsymbol{\mu} - \boldsymbol{x}\Vert^2\right]\end{equation<br />
å³è¦è®©$\boldsymbol{\mu}$ç­‰äº$\boldsymbol{x}$çš„å‡å€¼ï¼Œåªéœ€è¦æœ€å°åŒ–$\Vert \boldsymbol{\mu} - \boldsymbol{x}\Vert^2$çš„å‡å€¼ã€‚åŒç†ï¼Œè¦è®©$\boldsymbol{s}<em _boldsymbol_x="\boldsymbol{x">{\boldsymbol{\theta}}(\boldsymbol{x}_t, t)$ç­‰äº$\nabla</em><em _boldsymbol_x="\boldsymbol{x">t} \log p(\boldsymbol{x}_t|\boldsymbol{x}_0)$çš„åŠ æƒå¹³å‡ã€å³$\nabla</em><em _boldsymbol_theta="\boldsymbol{\theta">t}\log p(\boldsymbol{x}_t)$ã€‘ï¼Œåˆ™åªéœ€è¦æœ€å°åŒ–$\left\Vert \boldsymbol{s}</em>}}(\boldsymbol{x<em _boldsymbol_x="\boldsymbol{x">t, t) - \nabla</em><em _boldsymbol_x="\boldsymbol{x">t} \log p(\boldsymbol{x}_t|\boldsymbol{x}_0)\right\Vert^2$çš„åŠ æƒå¹³å‡ï¼Œå³<br />
\begin{equation} \frac{\mathbb{E}</em><em _boldsymbol_theta="\boldsymbol{\theta">0}\left[p(\boldsymbol{x}_t|\boldsymbol{x}_0)\left\Vert \boldsymbol{s}</em>}}(\boldsymbol{x<em _boldsymbol_x="\boldsymbol{x">t, t) - \nabla</em><em _boldsymbol_x="\boldsymbol{x">t} \log p(\boldsymbol{x}_t|\boldsymbol{x}_0)\right\Vert^2\right]}{\mathbb{E}</em><em _boldsymbol_x="\boldsymbol{x">0}\left[p(\boldsymbol{x}_t|\boldsymbol{x}_0)\right]}\end{equation}<br />
åˆ†æ¯çš„$\mathbb{E}</em><em _boldsymbol_x="\boldsymbol{x">0}\left[p(\boldsymbol{x}_t|\boldsymbol{x}_0)\right]$åªæ˜¯èµ·åˆ°è°ƒèŠ‚Lossæƒé‡çš„ä½œç”¨ï¼Œç®€å•èµ·è§æˆ‘ä»¬å¯ä»¥ç›´æ¥å»æ‰å®ƒï¼Œè¿™ä¸ä¼šå½±å“æœ€ä¼˜è§£çš„ç»“æœã€‚æœ€åæˆ‘ä»¬å†å¯¹$\boldsymbol{x}_t$ç§¯åˆ†ï¼ˆç›¸å½“äºå¯¹äºæ¯ä¸€ä¸ª$\boldsymbol{x}_t$éƒ½è¦æœ€å°åŒ–ä¸Šè¿°æŸå¤±ï¼‰ï¼Œå¾—åˆ°æœ€ç»ˆçš„æŸå¤±å‡½æ•°<br />
\begin{equation}\begin{aligned}&amp;\,\int \mathbb{E}</em><em _boldsymbol_theta="\boldsymbol{\theta">0}\left[p(\boldsymbol{x}_t|\boldsymbol{x}_0)\left\Vert \boldsymbol{s}</em>}}(\boldsymbol{x<em _boldsymbol_x="\boldsymbol{x">t, t) - \nabla</em><em _boldsymbol_x="\boldsymbol{x">t} \log p(\boldsymbol{x}_t|\boldsymbol{x}_0)\right\Vert^2\right] d\boldsymbol{x}_t \\\<br />
=&amp;\, \mathbb{E}</em><em _boldsymbol_theta="\boldsymbol{\theta">0,\boldsymbol{x}_t \sim p(\boldsymbol{x}_t|\boldsymbol{x}_0)\tilde{p}(\boldsymbol{x}_0)}\left[\left\Vert \boldsymbol{s}</em>}}(\boldsymbol{x<em _boldsymbol_x="\boldsymbol{x">t, t) - \nabla</em>_0)\right\Vert^2\right]}_t} \log p(\boldsymbol{x}_t|\boldsymbol{x<br />
\end{aligned}\label{eq:score-match}\end{equation}<br />
è¿™å°±æ˜¯â€œï¼ˆæ¡ä»¶ï¼‰å¾—åˆ†åŒ¹é…â€çš„æŸå¤±å‡½æ•°ï¼Œä¹‹å‰æˆ‘ä»¬åœ¨<a href="/archives/7038">ã€Šä»å»å™ªè‡ªç¼–ç å™¨åˆ°ç”Ÿæˆæ¨¡å‹ã€‹</a>æ¨å¯¼çš„å»å™ªè‡ªç¼–ç å™¨çš„è§£æè§£ï¼Œä¹Ÿæ˜¯å®ƒçš„ä¸€ä¸ªç‰¹ä¾‹ã€‚å¾—åˆ†åŒ¹é…çš„æœ€æ—©å‡ºå¤„å¯ä»¥è¿½æº¯åˆ°2005å¹´çš„è®ºæ–‡<a href="https://www.jmlr.org/papers/v6/hyvarinen05a.html">ã€ŠEstimation of Non-Normalized Statistical Models by Score Matchingã€‹</a>ï¼Œè‡³äºæ¡ä»¶å¾—åˆ†åŒ¹é…çš„æœ€æ—©å‡ºå¤„ï¼Œç¬”è€…è¿½æº¯åˆ°çš„æ˜¯2011å¹´çš„è®ºæ–‡<a href="https://www.iro.umontreal.ca/~vincentp/Publications/DenoisingScoreMatching_NeuralComp2011.pdf">ã€ŠA Connection Between Score Matching and Denoising Autoencodersã€‹</a>ã€‚</p>
<p>ä¸è¿‡ï¼Œè™½ç„¶è¯¥ç»“æœè·Ÿå¾—åˆ†åŒ¹é…æ˜¯ä¸€æ ·çš„ï¼Œä½†å…¶å®åœ¨è¿™ä¸€èŠ‚çš„æ¨å¯¼ä¸­ï¼Œæˆ‘ä»¬å·²ç»æŠ›å¼€äº†â€œå¾—åˆ†â€çš„æ¦‚å¿µäº†ï¼Œçº¯ç²¹æ˜¯ç”±ç›®æ ‡è‡ªç„¶åœ°å¼•å¯¼å‡ºæ¥çš„ç­”æ¡ˆï¼Œç¬”è€…è®¤ä¸ºè¿™æ ·çš„å¤„ç†è¿‡ç¨‹æ›´æœ‰å¯å‘æ€§ï¼Œå¸Œæœ›è¿™ä¸€æ¨å¯¼èƒ½é™ä½å¤§å®¶å¯¹å¾—åˆ†åŒ¹é…çš„ç†è§£éš¾åº¦ã€‚</p>
<h2 id="_4">ç»“æœå€’æ¨</h2>
<p>è‡³æ­¤ï¼Œæˆ‘ä»¬æ„å»ºäº†ç”Ÿæˆæ‰©æ•£æ¨¡å‹çš„ä¸€èˆ¬æµç¨‹ï¼š</p>
<blockquote>
<p>1ã€é€šè¿‡éšæœºå¾®åˆ†æ–¹ç¨‹$\eqref{eq:sde-forward}$å®šä¹‰â€œæ‹†æ¥¼â€ï¼ˆå‰å‘è¿‡ç¨‹ï¼‰ï¼›</p>
<p>2ã€æ±‚$p(\boldsymbol{x}_t|\boldsymbol{x}_0)$çš„è¡¨è¾¾å¼ï¼›</p>
<p>3ã€é€šè¿‡æŸå¤±å‡½æ•°$\eqref{eq:score-match}$è®­ç»ƒ$\boldsymbol{s}_{\boldsymbol{\theta}}(\boldsymbol{x}_t, t)$ï¼ˆå¾—åˆ†åŒ¹é…ï¼‰ï¼›</p>
<p>4ã€ç”¨$\boldsymbol{s}<em _boldsymbol_x="\boldsymbol{x">{\boldsymbol{\theta}}(\boldsymbol{x}_t, t)$æ›¿æ¢å¼$\eqref{eq:reverse-sde}$çš„$\nabla</em>)$ï¼Œå®Œæˆâ€œå»ºæ¥¼â€ï¼ˆåå‘è¿‡ç¨‹ï¼‰ã€‚}}\log p_t(\boldsymbol{x</p>
</blockquote>
<p>å¯èƒ½å¤§å®¶çœ‹åˆ°SDEã€å¾®åˆ†æ–¹ç¨‹ç­‰å­—çœ¼ï¼Œå¤©ç„¶å°±è§‰å¾—â€œææ…Œâ€ï¼Œä½†æœ¬è´¨ä¸Šæ¥è¯´ï¼ŒSDEåªæ˜¯ä¸ªâ€œå¹Œå­â€ï¼Œå®é™…ä¸Šå°†å¯¹SDEçš„ç†è§£è½¬æ¢åˆ°å¼$\eqref{eq:sde-discrete}$å’Œå¼$\eqref{eq:sde-proba}$ä¸Šåï¼Œå®Œå…¨å°±å¯ä»¥æŠ›å¼€SDEçš„æ¦‚å¿µäº†ï¼Œå› æ­¤æ¦‚å¿µä¸Šå…¶å®æ˜¯æ²¡æœ‰å¤ªå¤§éš¾åº¦çš„ã€‚</p>
<p>ä¸éš¾å‘ç°ï¼Œå®šä¹‰ä¸€ä¸ªéšæœºå¾®åˆ†æ–¹ç¨‹$\eqref{eq:sde-forward}$æ˜¯å¾ˆå®¹æ˜“çš„ï¼Œä½†æ˜¯ä»$\eqref{eq:sde-forward}$æ±‚è§£$p(\boldsymbol{x}_t|\boldsymbol{x}_0)$å´æ˜¯ä¸å®¹æ˜“çš„ã€‚åŸè®ºæ–‡çš„å‰©ä½™ç¯‡å¹…ï¼Œä¸»è¦æ˜¯å¯¹ä¸¤ä¸ªæœ‰å®ç”¨æ€§çš„ä¾‹å­æ¨å¯¼å’Œå®éªŒã€‚ç„¶è€Œï¼Œæ—¢ç„¶æ±‚è§£$p(\boldsymbol{x}_t|\boldsymbol{x}_0)$ä¸å®¹æ˜“ï¼Œé‚£ä¹ˆæŒ‰ç…§ç¬”è€…çš„çœ‹æ³•ï¼Œä¸å…¶å…ˆå®šä¹‰$\eqref{eq:sde-forward}$å†æ±‚è§£$p(\boldsymbol{x}_t|\boldsymbol{x}_0)$ï¼Œå€’ä¸å¦‚åƒ<a href="/archives/9181">DDIM</a>ä¸€æ ·ï¼Œå…ˆå®šä¹‰$p(\boldsymbol{x}_t|\boldsymbol{x}_0)$ï¼Œç„¶åå†æ¥åæ¨å¯¹åº”çš„SDEï¼Ÿ</p>
<p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬å…ˆå®šä¹‰<br />
\begin{equation} p(\boldsymbol{x}_t|\boldsymbol{x}_0) = \mathcal{N}(\boldsymbol{x}_t; \bar{\alpha}_t \boldsymbol{x}_0,\bar{\beta}_t^2 \boldsymbol{I})\end{equation}<br />
å¹¶ä¸”ä¸å¤±ä¸€èˆ¬æ€§å‡è®¾èµ·ç‚¹æ˜¯$t=0$ï¼Œç»ˆç‚¹æ˜¯$t=1$ï¼Œé‚£ä¹ˆ$\bar{\alpha}_t,\bar{\beta}_t$è¦æ»¡è¶³çš„è¾¹ç•Œå°±æ˜¯<br />
\begin{equation} \bar{\alpha}_0 = 1,\quad \bar{\alpha}_1 = 0,\quad \bar{\beta}_0 = 0,\quad \bar{\beta}_1 = 1\end{equation}<br />
å½“ç„¶ï¼Œä¸Šè¿°è¾¹ç•Œæ¡ä»¶ç†è®ºä¸Šè¶³å¤Ÿè¿‘ä¼¼å°±è¡Œï¼Œä¹Ÿä¸ä¸€å®šéè¦ç²¾ç¡®ç›¸ç­‰ï¼Œæ¯”å¦‚ä¸Šä¸€ç¯‡æ–‡ç« æˆ‘ä»¬åˆ†æè¿‡DDPMç›¸å½“äºé€‰æ‹©äº†$\bar{\alpha}_t = e^{-5t^2}$ï¼Œå½“$t=1$æ—¶ç»“æœä¸º$e^{-5}\approx 0$ã€‚</p>
<p>æœ‰äº†$p(\boldsymbol{x}<em t="t" t_Delta="t+\Delta">t|\boldsymbol{x}_0)$ï¼Œæˆ‘ä»¬å»åæ¨$\eqref{eq:sde-forward}$ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯è¦æ±‚è§£$p(\boldsymbol{x}</em>}|\boldsymbol{x<em t="t" t_Delta="t+\Delta">t)$ï¼Œå®ƒè¦æ»¡è¶³<br />
\begin{equation} p(\boldsymbol{x}</em>}|\boldsymbol{x<em t="t" t_Delta="t+\Delta">0) = \int p(\boldsymbol{x}</em>}|\boldsymbol{x<em t="t" t_Delta="t+\Delta">t) p(\boldsymbol{x}_t|\boldsymbol{x}_0) d\boldsymbol{x}_t\end{equation}<br />
æˆ‘ä»¬è€ƒè™‘çº¿æ€§çš„è§£ï¼Œå³<br />
\begin{equation}d\boldsymbol{x} = f_t\boldsymbol{x} dt + g_t d\boldsymbol{w}\end{equation}<br />
è·Ÿ<a href="/archives/9181#%E5%BE%85%E5%AE%9A%E7%B3%BB%E6%95%B0">ã€Šç”Ÿæˆæ‰©æ•£æ¨¡å‹æ¼«è°ˆï¼ˆå››ï¼‰ï¼šDDIM = é«˜è§‚ç‚¹DDPMã€‹</a>ä¸€æ ·ï¼Œæˆ‘ä»¬å†™å‡º<br />
\begin{array}{c|c|c}<br />
\hline<br />
\text{è®°å·} &amp; \text{å«ä¹‰} &amp; \text{é‡‡æ ·}\\\<br />
\hline<br />
p(\boldsymbol{x}</em>}|\boldsymbol{x<em t="t" t_Delta="t+\Delta">0) &amp; \mathcal{N}(\boldsymbol{x}_t;\bar{\alpha}</em>} \boldsymbol{x<em t="t" t_Delta="t+\Delta">0,\bar{\beta}</em>}^2 \boldsymbol{I}) &amp; \boldsymbol{x<em t="t" t_Delta="t+\Delta">{t+\Delta t} = \bar{\alpha}</em>} \boldsymbol{x<em t="t" t_Delta="t+\Delta">0 + \bar{\beta}</em> \\\} \boldsymbol{\varepsilon<br />
\hline<br />
p(\boldsymbol{x}<em t="t" t_Delta="t+\Delta">t|\boldsymbol{x}_0) &amp; \mathcal{N}(\boldsymbol{x}_t;\bar{\alpha}_t \boldsymbol{x}_0,\bar{\beta}_t^2 \boldsymbol{I}) &amp; \boldsymbol{x}_t = \bar{\alpha}_t \boldsymbol{x}_0 + \bar{\beta}_t \boldsymbol{\varepsilon}_1 \\\<br />
\hline<br />
p(\boldsymbol{x}</em>}|\boldsymbol{x<em t="t" t_Delta="t+\Delta">t) &amp; \mathcal{N}(\boldsymbol{x}</em>}; (1 + f_t\Delta t) \boldsymbol{x<em t="t" t_Delta="t+\Delta">t, g_t^2 \Delta t\, \boldsymbol{I}) &amp; \boldsymbol{x}</em>} = (1 + f_t\Delta t) \boldsymbol{x<em t="t" t_Delta="t+\Delta">t + g_t\sqrt{\Delta t}\boldsymbol{\varepsilon}_2 \\\<br />
\hline<br />
{\begin{array}{c}\int p(\boldsymbol{x}</em>}|\boldsymbol{x<em t="t" t_Delta="t+\Delta">t) \\\<br />
p(\boldsymbol{x}_t|\boldsymbol{x}_0) d\boldsymbol{x}_t\end{array}} &amp; &amp; {\begin{aligned}&amp;\,\boldsymbol{x}</em> \\\<br />
=&amp;\, (1 + f_t\Delta t) \boldsymbol{x}<em t="t" t_Delta="t+\Delta">t + g_t\sqrt{\Delta t} \boldsymbol{\varepsilon}_2 \\\<br />
=&amp;\, (1 + f_t\Delta t) (\bar{\alpha}_t \boldsymbol{x}_0 + \bar{\beta}_t \boldsymbol{\varepsilon}_1) + g_t\sqrt{\Delta t} \boldsymbol{\varepsilon}_2 \\\<br />
=&amp;\, (1 + f_t\Delta t) \bar{\alpha}_t \boldsymbol{x}_0 + ((1 + f_t\Delta t)\bar{\beta}_t \boldsymbol{\varepsilon}_1 + g_t\sqrt{\Delta t} \boldsymbol{\varepsilon}_2) \\\<br />
\end{aligned}} \\\<br />
\hline<br />
\end{array}<br />
ç”±æ­¤å¯å¾—<br />
\begin{equation}\begin{aligned}<br />
\bar{\alpha}</em>} =&amp;\, (1 + f_t\Delta t) \bar{\alpha<em t="t" t_Delta="t+\Delta">t \\\<br />
\bar{\beta}</em>_t^2 + g_t^2\Delta t}^2 =&amp;\, (1 + f_t\Delta t)^2\bar{\beta<br />
\end{aligned}\end{equation}<br />
ä»¤$\Delta t\to 0$ï¼Œåˆ†åˆ«è§£å¾—<br />
\begin{equation}<br />
f_t = \frac{d}{dt} \left(\ln \bar{\alpha}_t\right) = \frac{1}{\bar{\alpha}_t}\frac{d\bar{\alpha}_t}{dt}, \quad g_t^2 = \bar{\alpha}_t^2 \frac{d}{dt}\left(\frac{\bar{\beta}_t^2}{\bar{\alpha}_t^2}\right) = 2\bar{\alpha}_t \bar{\beta}_t \frac{d}{dt}\left(\frac{\bar{\beta}_t}{\bar{\alpha}_t}\right)\end{equation}<br />
å–$\bar{\alpha}_t\equiv 1$æ—¶ï¼Œç»“æœå°±æ˜¯è®ºæ–‡ä¸­çš„VE-SDEï¼ˆVariance Exploding SDEï¼‰ï¼›è€Œå¦‚æœå–$\bar{\alpha}_t^2 + \bar{\beta}_t^2=1$æ—¶ï¼Œç»“æœå°±æ˜¯åŸè®ºæ–‡ä¸­çš„VP-SDEï¼ˆVariance Preserving SDEï¼‰ã€‚</p>
<p>è‡³äºæŸå¤±å‡½æ•°ï¼Œæ­¤æ—¶æˆ‘ä»¬å¯ä»¥ç®—å¾—<br />
\begin{equation}\nabla_{\boldsymbol{x}<em _boldsymbol_theta="\boldsymbol{\theta">t} \log p(\boldsymbol{x}_t|\boldsymbol{x}_0) = -\frac{\boldsymbol{x}_t - \bar{\alpha}_t\boldsymbol{x}_0}{\bar{\beta}_t^2}=-\frac{\boldsymbol{\varepsilon}}{\bar{\beta}_t}\end{equation}<br />
ç¬¬äºŒä¸ªç­‰å·æ˜¯å› ä¸º$\boldsymbol{x}_t = \bar{\alpha}_t\boldsymbol{x}_0 + \bar{\beta}_t\boldsymbol{\varepsilon}$ï¼Œä¸ºäº†è·Ÿä»¥å¾€çš„ç»“æœå¯¹é½ï¼Œæˆ‘ä»¬è®¾$\boldsymbol{s}</em>}}(\boldsymbol{x<em _boldsymbol_theta="\boldsymbol{\theta">t, t) = -\frac{\boldsymbol{\epsilon}</em>}}(\boldsymbol{x<em _boldsymbol_x="\boldsymbol{x">t, t)}{\bar{\beta}_t}$ï¼Œæ­¤æ—¶å¼$\eqref{eq:score-match}$ä¸º<br />
\begin{equation}\frac{1}{\bar{\beta}_t^2}\mathbb{E}</em><em _boldsymbol_theta="\boldsymbol{\theta">0\sim \tilde{p}(\boldsymbol{x}_0),\boldsymbol{\varepsilon}\sim\mathcal{N}(\boldsymbol{0},\boldsymbol{I})}\left[\left\Vert \boldsymbol{\epsilon}</em>}}(\bar{\alpha<em _boldsymbol_theta="\boldsymbol{\theta">t\boldsymbol{x}_0 + \bar{\beta}_t\boldsymbol{\varepsilon}, t) - \boldsymbol{\varepsilon}\right\Vert^2\right]\end{equation}<br />
å¿½ç•¥ç³»æ•°åå°±æ˜¯DDPMçš„æŸå¤±å‡½æ•°ï¼Œè€Œç”¨$-\frac{\boldsymbol{\epsilon}</em>}}(\boldsymbol{x<em t="t" t_Delta="t+\Delta">{t+\Delta t}, t+\Delta t)}{\bar{\beta}</em>}}$æ›¿æ¢æ‰å¼$\eqref{eq:reverse-sde-discrete}$çš„$\nabla_{\boldsymbol{x<em t="t" t_Delta="t+\Delta">{t+\Delta t}}\log p(\boldsymbol{x}</em>)$åï¼Œç»“æœä¸DDPMçš„é‡‡æ ·è¿‡ç¨‹å…·æœ‰ç›¸åŒçš„ä¸€é˜¶è¿‘ä¼¼ï¼ˆæ„å‘³ç€$\Delta t\to 0$æ—¶ä¸¤è€…ç­‰ä»·ï¼‰ã€‚</p>
<h2 id="_5">æ–‡ç« å°ç»“</h2>
<p>æœ¬æ–‡ä¸»è¦ä»‹ç»äº†å®‹é£åšå£«å»ºç«‹çš„åˆ©ç”¨SDEç†è§£æ‰©æ•£æ¨¡å‹çš„ä¸€èˆ¬æ¡†æ¶ï¼Œå…¶ä¸­åŒ…æ‹¬ä»¥å°½å¯èƒ½ç›´è§‚çš„è¯­è¨€æ¨å¯¼äº†åå‘SDEã€å¾—åˆ†åŒ¹é…ç­‰ç»“æœï¼Œå¹¶å¯¹æ–¹ç¨‹çš„æ±‚è§£ç»™å‡ºäº†è‡ªå·±çš„æƒ³æ³•ã€‚</p>
<p><em><strong>è½¬è½½åˆ°è¯·åŒ…æ‹¬æœ¬æ–‡åœ°å€ï¼š</strong><a href="https://spaces.ac.cn/archives/9209">https://spaces.ac.cn/archives/9209</a></em></p>
<p><em><strong>æ›´è¯¦ç»†çš„è½¬è½½äº‹å®œè¯·å‚è€ƒï¼š</strong></em><a href="https://spaces.ac.cn/archives/6508#%E6%96%87%E7%AB%A0%E5%A6%82%E4%BD%95%E8%BD%AC%E8%BD%BD/%E5%BC%95%E7%94%A8" title="ã€Šç§‘å­¦ç©ºé—´FAQã€‹">ã€Šç§‘å­¦ç©ºé—´FAQã€‹</a></p>
<p><strong>å¦‚æœæ‚¨è¿˜æœ‰ä»€ä¹ˆç–‘æƒ‘æˆ–å»ºè®®ï¼Œæ¬¢è¿åœ¨ä¸‹æ–¹è¯„è®ºåŒºç»§ç»­è®¨è®ºã€‚</strong></p>
<p><strong>å¦‚æœæ‚¨è§‰å¾—æœ¬æ–‡è¿˜ä¸é”™ï¼Œæ¬¢è¿åˆ†äº«/æ‰“èµæœ¬æ–‡ã€‚æ‰“èµå¹¶éè¦ä»ä¸­è·å¾—æ”¶ç›Šï¼Œè€Œæ˜¯å¸Œæœ›çŸ¥é“ç§‘å­¦ç©ºé—´è·å¾—äº†å¤šå°‘è¯»è€…çš„çœŸå¿ƒå…³æ³¨ã€‚å½“ç„¶ï¼Œå¦‚æœä½ æ— è§†å®ƒï¼Œä¹Ÿä¸ä¼šå½±å“ä½ çš„é˜…è¯»ã€‚å†æ¬¡è¡¨ç¤ºæ¬¢è¿å’Œæ„Ÿè°¢ï¼</strong></p>
<p>æ‰“èµ</p>
<p><img alt="ç§‘å­¦ç©ºé—´" src="https://spaces.ac.cn/usr/themes/geekg/payment/wx.png" /></p>
<p>å¾®ä¿¡æ‰“èµ</p>
<p><img alt="ç§‘å­¦ç©ºé—´" src="https://spaces.ac.cn/usr/themes/geekg/payment/zfb.png" /></p>
<p>æ”¯ä»˜å®æ‰“èµ</p>
<p>å› ä¸ºç½‘ç«™åå°å¯¹æ‰“èµå¹¶æ— è®°å½•ï¼Œå› æ­¤æ¬¢è¿åœ¨æ‰“èµæ—¶å€™å¤‡æ³¨ç•™è¨€ã€‚ä½ è¿˜å¯ä»¥<a href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&amp;email=tN7d1drY3drrx8H0xcWa19vZ"><strong>ç‚¹å‡»è¿™é‡Œ</strong></a>æˆ–åœ¨ä¸‹æ–¹è¯„è®ºåŒºç•™è¨€æ¥å‘ŠçŸ¥ä½ çš„å»ºè®®æˆ–éœ€æ±‚ã€‚</p>
<p><strong>å¦‚æœæ‚¨éœ€è¦å¼•ç”¨æœ¬æ–‡ï¼Œè¯·å‚è€ƒï¼š</strong></p>
<p>è‹å‰‘æ—. (Aug. 03, 2022). ã€Šç”Ÿæˆæ‰©æ•£æ¨¡å‹æ¼«è°ˆï¼ˆäº”ï¼‰ï¼šä¸€èˆ¬æ¡†æ¶ä¹‹SDEç¯‡ ã€‹[Blog post]. Retrieved from <a href="https://spaces.ac.cn/archives/9209">https://spaces.ac.cn/archives/9209</a></p>
<p>@online{kexuefm-9209,<br />
title={ç”Ÿæˆæ‰©æ•£æ¨¡å‹æ¼«è°ˆï¼ˆäº”ï¼‰ï¼šä¸€èˆ¬æ¡†æ¶ä¹‹SDEç¯‡},<br />
author={è‹å‰‘æ—},<br />
year={2022},<br />
month={Aug},<br />
url={\url{https://spaces.ac.cn/archives/9209}},<br />
} </p>
<hr />
<h2 id="_6">å…¬å¼æ¨å¯¼ä¸æ³¨é‡Š</h2>
<p>æœ¬èŠ‚æä¾›æ–‡ç« ä¸­æ¶‰åŠçš„éšæœºå¾®åˆ†æ–¹ç¨‹ï¼ˆSDEï¼‰æ¡†æ¶çš„æè¯¦ç»†æ•°å­¦æ¨å¯¼ï¼ŒåŒ…æ‹¬ItÃ´ç§¯åˆ†ã€ItÃ´å¼•ç†ã€å‰å‘SDEã€é€†å‘SDEã€Andersonå®šç†ã€Fokker-Planckæ–¹ç¨‹ã€æ¦‚ç‡æµODEç­‰æ ¸å¿ƒå†…å®¹ã€‚</p>
<h3 id="1">1. éšæœºå¾®åˆ†æ–¹ç¨‹åŸºç¡€ç†è®º</h3>
<h4 id="11-brown">1.1 Brownè¿åŠ¨ä¸éšæœºè¿‡ç¨‹</h4>
<p><strong>å®šä¹‰ï¼ˆæ ‡å‡†Brownè¿åŠ¨ï¼‰</strong>ï¼šéšæœºè¿‡ç¨‹ ${\boldsymbol{w}<em 0="0" t_geq="t\geq">t}</em>$ ç§°ä¸ºæ ‡å‡†Brownè¿åŠ¨ï¼ˆæˆ–Wienerè¿‡ç¨‹ï¼‰ï¼Œå¦‚æœæ»¡è¶³ï¼š</p>
<ol>
<li>$\boldsymbol{w}_0 = \boldsymbol{0}$ï¼ˆå‡ ä¹å¤„å¤„ï¼‰</li>
<li>å¯¹äºä»»æ„ $0 \leq s &lt; t$ï¼Œå¢é‡ $\boldsymbol{w}_t - \boldsymbol{w}_s \sim \mathcal{N}(\boldsymbol{0}, (t-s)\boldsymbol{I})$</li>
<li>å¯¹äºä»»æ„ä¸ç›¸äº¤çš„æ—¶é—´åŒºé—´ï¼Œå¢é‡ç›¸äº’ç‹¬ç«‹</li>
<li>$\boldsymbol{w}_t$ å…³äº $t$ å‡ ä¹å¤„å¤„è¿ç»­</li>
</ol>
<p><strong>æ€§è´¨1ï¼ˆäºŒæ¬¡å˜å·®ï¼‰</strong>ï¼šBrownè¿åŠ¨çš„é‡è¦æ€§è´¨æ˜¯å…¶äºŒæ¬¡å˜å·®ã€‚å¯¹äºåˆ†å‰² $0 = t_0 &lt; t_1 &lt; \cdots &lt; t_n = t$ï¼Œå½“ $\max_i(t_{i+1} - t_i) \to 0$ æ—¶ï¼Œæˆ‘ä»¬æœ‰ï¼š</p>
<p>$$
\sum_{i=0}^{n-1} (\boldsymbol{w}_{t_{i+1}} - \boldsymbol{w}_{t_i})(\boldsymbol{w}_{t_{i+1}} - \boldsymbol{w}_{t_i})^T \to t\boldsymbol{I} \quad \text{ï¼ˆä¾æ¦‚ç‡ï¼‰}
$$</p>
<p>è¿™æ„å‘³ç€åœ¨å½¢å¼ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥å†™ $(d\boldsymbol{w})^2 = dt \cdot \boldsymbol{I}$ï¼Œè¿™æ˜¯ItÃ´ç§¯åˆ†çš„æ ¸å¿ƒæ€§è´¨ã€‚</p>
<p><strong>æ€§è´¨2ï¼ˆæ— å¤„å¯å¾®ï¼‰</strong>ï¼šè™½ç„¶Brownè¿åŠ¨è½¨é“è¿ç»­ï¼Œä½†å®ƒå‡ ä¹å¤„å¤„ä¸å¯å¾®ã€‚è¿™å¯ä»¥ä»äºŒæ¬¡å˜å·®çœ‹å‡ºï¼šå¦‚æœ $\boldsymbol{w}_t$ å¯å¾®ï¼Œé‚£ä¹ˆäºŒæ¬¡å˜å·®åº”è¯¥è¶‹äº0ï¼Œä½†å®é™…ä¸Šå®ƒè¶‹äº $t$ã€‚</p>
<h4 id="12-ito">1.2 ItÃ´ç§¯åˆ†çš„å®šä¹‰</h4>
<p>å¯¹äºBrownè¿åŠ¨ $\boldsymbol{w}_t$ï¼Œæˆ‘ä»¬å¸Œæœ›å®šä¹‰å½¢å¦‚ $\int_0^t \boldsymbol{h}_s d\boldsymbol{w}_s$ çš„ç§¯åˆ†ã€‚ç”±äº $\boldsymbol{w}_t$ ä¸å¯å¾®ï¼Œè¿™ä¸èƒ½ç”¨å¸¸è§„çš„Riemann-Stieltjesç§¯åˆ†å®šä¹‰ã€‚</p>
<p><strong>æ„é€ ï¼ˆItÃ´ç§¯åˆ†ï¼‰</strong>ï¼šå¯¹äºç®€å•è¿‡ç¨‹ $\boldsymbol{h}<em i="0">t = \sum</em>}^{n-1} \boldsymbol{\xi<em _t_i_="[t_i," t__i_1="t_{i+1">i \mathbb{1}</em>})}(t)$ï¼Œå…¶ä¸­ $\boldsymbol{\xi<em t_i="t_i">i$ æ˜¯å…³äº $\mathcal{F}</em>}$ å¯æµ‹çš„ï¼ˆ$\mathcal{F<em s_leq="s\leq" t="t">t$ æ˜¯ç”± ${\boldsymbol{w}_s}</em>$ ç”Ÿæˆçš„ $\sigma$-ä»£æ•°ï¼‰ï¼Œå®šä¹‰ï¼š</p>
<p>$$
\int_0^t \boldsymbol{h}_s d\boldsymbol{w}_s := \sum_{i=0}^{n-1} \boldsymbol{\xi}_i (\boldsymbol{w}_{t_{i+1}\wedge t} - \boldsymbol{w}_{t_i \wedge t})
$$</p>
<p>å…¶ä¸­ $a \wedge b = \min(a,b)$ã€‚</p>
<p>ç„¶åé€šè¿‡ $L^2$ æé™å°†å®šä¹‰æ‰©å±•åˆ°æ‰€æœ‰æ»¡è¶³ $\mathbb{E}[\int_0^T |\boldsymbol{h}_s|^2 ds] &lt; \infty$ çš„é€‚åº”è¿‡ç¨‹ã€‚</p>
<p><strong>ItÃ´ç­‰è·æ€§è´¨</strong>ï¼šå¯¹äºæ»¡è¶³æ¡ä»¶çš„é€‚åº”è¿‡ç¨‹ $\boldsymbol{h}_t$ï¼Œæœ‰ï¼š</p>
<p>$$
\mathbb{E}\left[\left\|\int_0^t \boldsymbol{h}_s d\boldsymbol{w}_s\right\|^2\right] = \mathbb{E}\left[\int_0^t \|\boldsymbol{h}_s\|^2 ds\right]
$$</p>
<p>è¿™æ˜¯ItÃ´ç§¯åˆ†çš„æ ¸å¿ƒæ€§è´¨ï¼Œè¯´æ˜ItÃ´ç§¯åˆ†æ˜¯ä¸€ä¸ªé…ï¼ˆmartingaleï¼‰ã€‚</p>
<h4 id="13-itoito">1.3 ItÃ´å¼•ç†ï¼ˆItÃ´å…¬å¼ï¼‰</h4>
<p><strong>å®šç†ï¼ˆä¸€ç»´ItÃ´å¼•ç†ï¼‰</strong>ï¼šè®¾ $x_t$ æ»¡è¶³SDEï¼š</p>
<p>$$
dx_t = \mu_t dt + \sigma_t dw_t
$$</p>
<p>ä¸” $f(x,t)$ æ˜¯ $C^{1,2}$ å‡½æ•°ï¼ˆå¯¹ $t$ ä¸€é˜¶è¿ç»­å¯å¾®ï¼Œå¯¹ $x$ äºŒé˜¶è¿ç»­å¯å¾®ï¼‰ï¼Œåˆ™ $y_t = f(x_t, t)$ æ»¡è¶³ï¼š</p>
<p>$$
dy_t = \left(\frac{\partial f}{\partial t} + \mu_t \frac{\partial f}{\partial x} + \frac{1}{2}\sigma_t^2 \frac{\partial^2 f}{\partial x^2}\right)dt + \sigma_t \frac{\partial f}{\partial x} dw_t
$$</p>
<p><strong>è¯¦ç»†æ¨å¯¼</strong>ï¼š</p>
<ol>
<li>å¯¹ $f(x_t, t)$ åšTaylorå±•å¼€ï¼ˆåˆ°äºŒé˜¶ï¼‰ï¼š</li>
</ol>
<p>$$
\begin{aligned}
df &= f(x_{t+dt}, t+dt) - f(x_t, t) \\
&= \frac{\partial f}{\partial t}dt + \frac{\partial f}{\partial x}dx + \frac{1}{2}\frac{\partial^2 f}{\partial x^2}(dx)^2 + \frac{\partial^2 f}{\partial x \partial t}dx\,dt + \frac{1}{2}\frac{\partial^2 f}{\partial t^2}(dt)^2 + O(dt^{3/2})
\end{aligned}
$$</p>
<ol>
<li>è®¡ç®— $(dx)^2$ï¼š</li>
</ol>
<p>$$
\begin{aligned}
(dx)^2 &= (\mu_t dt + \sigma_t dw_t)^2 \\
&= \mu_t^2 (dt)^2 + 2\mu_t \sigma_t dt\,dw_t + \sigma_t^2 (dw_t)^2
\end{aligned}
$$</p>
<ol>
<li>åº”ç”¨éšæœºå¾®ç§¯åˆ†è§„åˆ™ï¼š</li>
<li>$(dt)^2 = 0$ï¼ˆé«˜é˜¶æ— ç©·å°ï¼‰</li>
<li>$dt \cdot dw_t = 0$ï¼ˆé«˜é˜¶æ— ç©·å°ï¼‰</li>
<li>
<p>$(dw_t)^2 = dt$ï¼ˆBrownè¿åŠ¨çš„äºŒæ¬¡å˜å·®æ€§è´¨ï¼‰</p>
</li>
<li>
<p>å› æ­¤ï¼š</p>
</li>
</ol>
<p>$$
(dx)^2 = \sigma_t^2 dt
$$</p>
<ol>
<li>ä»£å…¥å¾—ï¼š</li>
</ol>
<p>$$
df = \left(\frac{\partial f}{\partial t} + \mu_t \frac{\partial f}{\partial x} + \frac{1}{2}\sigma_t^2 \frac{\partial^2 f}{\partial x^2}\right)dt + \sigma_t \frac{\partial f}{\partial x} dw_t
$$</p>
<p><strong>å¤šç»´ItÃ´å¼•ç†</strong>ï¼šå¯¹äº $d$-ç»´è¿‡ç¨‹ $\boldsymbol{x}_t$ æ»¡è¶³ï¼š</p>
<p>$$
d\boldsymbol{x}_t = \boldsymbol{\mu}_t dt + \boldsymbol{\Sigma}_t d\boldsymbol{w}_t
$$</p>
<p>å…¶ä¸­ $\boldsymbol{\mu}_t \in \mathbb{R}^d$ï¼Œ$\boldsymbol{\Sigma}_t \in \mathbb{R}^{d \times d}$ï¼Œ$\boldsymbol{w}_t$ æ˜¯ $d$-ç»´Brownè¿åŠ¨ã€‚è‹¥ $f: \mathbb{R}^d \times \mathbb{R} \to \mathbb{R}$ æ˜¯ $C^{1,2}$ å‡½æ•°ï¼Œåˆ™ï¼š</p>
<p>$$
df(\boldsymbol{x}_t, t) = \left(\frac{\partial f}{\partial t} + \sum_{i=1}^d \mu_{t,i} \frac{\partial f}{\partial x_i} + \frac{1}{2}\sum_{i,j=1}^d (\boldsymbol{\Sigma}_t \boldsymbol{\Sigma}_t^T)_{ij} \frac{\partial^2 f}{\partial x_i \partial x_j}\right)dt + \sum_{i=1}^d \sum_{k=1}^d (\boldsymbol{\Sigma}_t)_{ik} \frac{\partial f}{\partial x_i} dw_{t,k}
$$</p>
<h3 id="2-sde">2. å‰å‘SDEçš„è¯¦ç»†åˆ†æ</h3>
<h4 id="21">2.1 å‰å‘æ‰©æ•£è¿‡ç¨‹</h4>
<p>æ–‡ç« ä¸­å®šä¹‰çš„å‰å‘SDEä¸ºï¼š</p>
<p>$$
d\boldsymbol{x} = \boldsymbol{f}_t(\boldsymbol{x}) dt + g_t d\boldsymbol{w}
$$</p>
<p>è¿™é‡Œï¼š
- $\boldsymbol{f}_t(\boldsymbol{x})$ï¼šæ¼‚ç§»ç³»æ•°ï¼ˆdrift coefficientï¼‰ï¼Œæè¿°ç¡®å®šæ€§å˜åŒ–
- $g_t$ï¼šæ‰©æ•£ç³»æ•°ï¼ˆdiffusion coefficientï¼‰ï¼Œæè¿°éšæœºæ€§å¼ºåº¦
- $\boldsymbol{w}_t$ï¼šæ ‡å‡†Brownè¿åŠ¨</p>
<p><strong>ç¦»æ•£åŒ–ï¼ˆEuler-Maruyamaæ–¹æ³•ï¼‰</strong>ï¼šæœ€ç®€å•çš„æ•°å€¼æ–¹æ³•æ˜¯Euler-Maruyamaç¦»æ•£åŒ–ï¼š</p>
<p>$$
\boldsymbol{x}_{t+\Delta t} = \boldsymbol{x}_t + \boldsymbol{f}_t(\boldsymbol{x}_t) \Delta t + g_t \sqrt{\Delta t} \boldsymbol{\varepsilon}, \quad \boldsymbol{\varepsilon} \sim \mathcal{N}(\boldsymbol{0}, \boldsymbol{I})
$$</p>
<p>æ³¨æ„ $\sqrt{\Delta t}$ æ¥è‡ªäºBrownè¿åŠ¨å¢é‡çš„æ–¹å·®ï¼š$\boldsymbol{w}_{t+\Delta t} - \boldsymbol{w}_t \sim \mathcal{N}(\boldsymbol{0}, \Delta t \boldsymbol{I})$ã€‚</p>
<h4 id="22">2.2 è½¬ç§»æ¦‚ç‡å¯†åº¦</h4>
<p>ç»™å®šåˆå§‹æ¡ä»¶ $\boldsymbol{x}_t = \boldsymbol{x}$ï¼Œåœ¨ $\Delta t$ æ—¶é—´åçš„æ¡ä»¶åˆ†å¸ƒä¸ºï¼š</p>
<p>$$
p(\boldsymbol{x}_{t+\Delta t}|\boldsymbol{x}_t = \boldsymbol{x}) \approx \mathcal{N}(\boldsymbol{x} + \boldsymbol{f}_t(\boldsymbol{x})\Delta t, g_t^2 \Delta t \boldsymbol{I})
$$</p>
<p>æ¦‚ç‡å¯†åº¦å‡½æ•°ï¼š</p>
<p>$$
p(\boldsymbol{x}_{t+\Delta t}|\boldsymbol{x}_t) = \frac{1}{(2\pi g_t^2 \Delta t)^{d/2}} \exp\left(-\frac{\|\boldsymbol{x}_{t+\Delta t} - \boldsymbol{x}_t - \boldsymbol{f}_t(\boldsymbol{x}_t)\Delta t\|^2}{2g_t^2 \Delta t}\right)
$$</p>
<p>å…¶ä¸­ $d$ æ˜¯å‘é‡ç»´åº¦ã€‚</p>
<h3 id="3-sde">3. é€†å‘SDEçš„è¯¦ç»†æ¨å¯¼</h3>
<h4 id="31">3.1 æ—¶é—´åè½¬é—®é¢˜</h4>
<p>ç»™å®šå‰å‘SDEï¼š</p>
<p>$$
d\boldsymbol{x} = \boldsymbol{f}_t(\boldsymbol{x}) dt + g_t d\boldsymbol{w}
$$</p>
<p>æˆ‘ä»¬å¸Œæœ›æ‰¾åˆ°é€†å‘è¿‡ç¨‹çš„SDEï¼Œå³ä» $t=T$ åˆ° $t=0$ çš„æ¼”åŒ–ã€‚</p>
<h4 id="32-anderson">3.2 Andersonå®šç†</h4>
<p><strong>å®šç†ï¼ˆAnderson, 1982ï¼‰</strong>ï¼šå¦‚æœå‰å‘è¿‡ç¨‹æ»¡è¶³ï¼š</p>
<p>$$
d\boldsymbol{x} = \boldsymbol{f}_t(\boldsymbol{x}) dt + g_t d\boldsymbol{w}
$$</p>
<p>é‚£ä¹ˆé€†å‘è¿‡ç¨‹ï¼ˆä» $t=T$ åå‘åˆ° $t=0$ï¼‰æ»¡è¶³ï¼š</p>
<p>$$
d\boldsymbol{x} = \left[\boldsymbol{f}_t(\boldsymbol{x}) - g_t^2 \nabla_{\boldsymbol{x}} \log p_t(\boldsymbol{x})\right] dt + g_t d\bar{\boldsymbol{w}}
$$</p>
<p>å…¶ä¸­ $\bar{\boldsymbol{w}}_t$ æ˜¯é€†å‘æ—¶é—´çš„Brownè¿åŠ¨ï¼Œ$p_t(\boldsymbol{x})$ æ˜¯è¾¹ç¼˜åˆ†å¸ƒå¯†åº¦ã€‚</p>
<p><strong>è¯¦ç»†æ¨å¯¼</strong>ï¼š</p>
<p><strong>æ­¥éª¤1</strong>ï¼šå»ºç«‹è´å¶æ–¯å…³ç³»</p>
<p>å‰å‘è½¬ç§»æ¦‚ç‡ï¼š</p>
<p>$$
p(\boldsymbol{x}_{t+\Delta t}|\boldsymbol{x}_t) \propto \exp\left(-\frac{\|\boldsymbol{x}_{t+\Delta t} - \boldsymbol{x}_t - \boldsymbol{f}_t(\boldsymbol{x}_t)\Delta t\|^2}{2g_t^2\Delta t}\right)
$$</p>
<p>é€†å‘è½¬ç§»æ¦‚ç‡ï¼ˆè´å¶æ–¯å®šç†ï¼‰ï¼š</p>
<p>$$
p(\boldsymbol{x}_t|\boldsymbol{x}_{t+\Delta t}) = \frac{p(\boldsymbol{x}_{t+\Delta t}|\boldsymbol{x}_t) p(\boldsymbol{x}_t)}{p(\boldsymbol{x}_{t+\Delta t})}
$$</p>
<p>å–å¯¹æ•°ï¼š</p>
<p>$$
\log p(\boldsymbol{x}_t|\boldsymbol{x}_{t+\Delta t}) = \log p(\boldsymbol{x}_{t+\Delta t}|\boldsymbol{x}_t) + \log p(\boldsymbol{x}_t) - \log p(\boldsymbol{x}_{t+\Delta t})
$$</p>
<p><strong>æ­¥éª¤2</strong>ï¼šTaylorå±•å¼€</p>
<p>å¯¹ $\log p(\boldsymbol{x}_{t+\Delta t})$ åœ¨ $\boldsymbol{x}_t$ é™„è¿‘å±•å¼€ï¼š</p>
<p>$$
\begin{aligned}
\log p(\boldsymbol{x}_{t+\Delta t}) &\approx \log p(\boldsymbol{x}_t) + (\boldsymbol{x}_{t+\Delta t} - \boldsymbol{x}_t)^T \nabla_{\boldsymbol{x}_t} \log p(\boldsymbol{x}_t) \\
&\quad + \frac{1}{2}(\boldsymbol{x}_{t+\Delta t} - \boldsymbol{x}_t)^T \nabla_{\boldsymbol{x}_t}^2 \log p(\boldsymbol{x}_t) (\boldsymbol{x}_{t+\Delta t} - \boldsymbol{x}_t) \\
&\quad + \Delta t \frac{\partial}{\partial t}\log p(\boldsymbol{x}_t)
\end{aligned}
$$</p>
<p>æ³¨æ„è¿™é‡ŒåŒ…å«æ—¶é—´å¯¼æ•°é¡¹ï¼Œå› ä¸º $p(\boldsymbol{x}<em t="t" t_Delta="t+\Delta">{t+\Delta t})$ å®é™…ä¸Šæ˜¯ $p</em>)$ã€‚}(\boldsymbol{x}_{t+\Delta t</p>
<p><strong>æ­¥éª¤3</strong>ï¼šç®€åŒ–ï¼ˆä»…ä¿ç•™ä¸€é˜¶é¡¹ï¼‰</p>
<p>å½“ $\Delta t \to 0$ æ—¶ï¼Œ$\boldsymbol{x}_{t+\Delta t} - \boldsymbol{x}_t = O(\sqrt{\Delta t})$ï¼ˆå› ä¸ºéšæœºé¡¹ï¼‰ï¼Œå› æ­¤ï¼š</p>
<ul>
<li>çº¿æ€§é¡¹ï¼š$O(\sqrt{\Delta t})$</li>
<li>äºŒæ¬¡é¡¹ï¼š$O(\Delta t)$ï¼ˆä¸ $\Delta t$ é¡¹åŒé˜¶ï¼Œä½†ç³»æ•°è¾ƒå°ï¼‰</li>
<li>æ—¶é—´å¯¼æ•°é¡¹ï¼š$O(\Delta t)$</li>
</ul>
<p>ä¸»è¦çš„ä¸€é˜¶è¿‘ä¼¼ï¼š</p>
<p>$$
\log p(\boldsymbol{x}_{t+\Delta t}) \approx \log p(\boldsymbol{x}_t) + (\boldsymbol{x}_{t+\Delta t} - \boldsymbol{x}_t)^T \nabla_{\boldsymbol{x}_t} \log p(\boldsymbol{x}_t) + \Delta t \frac{\partial}{\partial t}\log p(\boldsymbol{x}_t)
$$</p>
<p><strong>æ­¥éª¤4</strong>ï¼šä»£å…¥å‰å‘è½¬ç§»æ¦‚ç‡</p>
<p>$$
\begin{aligned}
&\log p(\boldsymbol{x}_t|\boldsymbol{x}_{t+\Delta t}) \\
&= -\frac{\|\boldsymbol{x}_{t+\Delta t} - \boldsymbol{x}_t - \boldsymbol{f}_t(\boldsymbol{x}_t)\Delta t\|^2}{2g_t^2\Delta t} + \log p(\boldsymbol{x}_t) - \log p(\boldsymbol{x}_{t+\Delta t}) + C \\
&\approx -\frac{\|\boldsymbol{x}_{t+\Delta t} - \boldsymbol{x}_t - \boldsymbol{f}_t(\boldsymbol{x}_t)\Delta t\|^2}{2g_t^2\Delta t} - (\boldsymbol{x}_{t+\Delta t} - \boldsymbol{x}_t)^T \nabla_{\boldsymbol{x}_t} \log p(\boldsymbol{x}_t) + C'
\end{aligned}
$$</p>
<p><strong>æ­¥éª¤5</strong>ï¼šé…æ–¹</p>
<p>å±•å¼€äºŒæ¬¡é¡¹ï¼š</p>
<p>$$
\begin{aligned}
&-\frac{\|\boldsymbol{x}_{t+\Delta t} - \boldsymbol{x}_t - \boldsymbol{f}_t(\boldsymbol{x}_t)\Delta t\|^2}{2g_t^2\Delta t} - (\boldsymbol{x}_{t+\Delta t} - \boldsymbol{x}_t)^T \nabla_{\boldsymbol{x}_t} \log p(\boldsymbol{x}_t) \\
&= -\frac{1}{2g_t^2\Delta t}\left[\|\boldsymbol{x}_{t+\Delta t} - \boldsymbol{x}_t\|^2 - 2(\boldsymbol{x}_{t+\Delta t} - \boldsymbol{x}_t)^T \boldsymbol{f}_t(\boldsymbol{x}_t)\Delta t + \|\boldsymbol{f}_t(\boldsymbol{x}_t)\|^2 (\Delta t)^2\right] \\
&\quad - (\boldsymbol{x}_{t+\Delta t} - \boldsymbol{x}_t)^T \nabla_{\boldsymbol{x}_t} \log p(\boldsymbol{x}_t) \\
&= -\frac{1}{2g_t^2\Delta t}\left[\|\boldsymbol{x}_{t+\Delta t} - \boldsymbol{x}_t\|^2 - 2(\boldsymbol{x}_{t+\Delta t} - \boldsymbol{x}_t)^T (\boldsymbol{f}_t(\boldsymbol{x}_t)\Delta t + g_t^2 \nabla_{\boldsymbol{x}_t} \log p(\boldsymbol{x}_t))\right] + O(\Delta t)
\end{aligned}
$$</p>
<p>é…æ–¹å¾—ï¼š</p>
<p>$$
= -\frac{\|\boldsymbol{x}_{t+\Delta t} - \boldsymbol{x}_t - (\boldsymbol{f}_t(\boldsymbol{x}_t) - g_t^2 \nabla_{\boldsymbol{x}_t} \log p(\boldsymbol{x}_t))\Delta t\|^2}{2g_t^2\Delta t} + O(\Delta t)
$$</p>
<p><strong>æ­¥éª¤6</strong>ï¼šå¾—åˆ°é€†å‘SDE</p>
<p>å› æ­¤ï¼Œ$p(\boldsymbol{x}<em t="t" t_Delta="t+\Delta">t|\boldsymbol{x}</em>)$ è¿‘ä¼¼ä¸ºæ­£æ€åˆ†å¸ƒï¼š</p>
<p>$$
p(\boldsymbol{x}_t|\boldsymbol{x}_{t+\Delta t}) \approx \mathcal{N}\left(\boldsymbol{x}_{t+\Delta t} - [\boldsymbol{f}_{t+\Delta t}(\boldsymbol{x}_{t+\Delta t}) - g_{t+\Delta t}^2 \nabla_{\boldsymbol{x}} \log p_{t+\Delta t}(\boldsymbol{x}_{t+\Delta t})]\Delta t, g_{t+\Delta t}^2 \Delta t \boldsymbol{I}\right)
$$</p>
<p>å¯¹åº”çš„é€†å‘SDEï¼ˆæ—¶é—´åå‘ï¼‰ï¼š</p>
<p>$$
d\boldsymbol{x} = [\boldsymbol{f}_t(\boldsymbol{x}) - g_t^2 \nabla_{\boldsymbol{x}} \log p_t(\boldsymbol{x})] dt + g_t d\bar{\boldsymbol{w}}
$$</p>
<h3 id="4-score">4. Scoreå‡½æ•°çš„å®šä¹‰å’Œæ€§è´¨</h3>
<h4 id="41-score">4.1 Scoreå‡½æ•°å®šä¹‰</h4>
<p><strong>å®šä¹‰</strong>ï¼šç»™å®šæ¦‚ç‡åˆ†å¸ƒ $p(\boldsymbol{x})$ï¼Œå…¶scoreå‡½æ•°å®šä¹‰ä¸ºï¼š</p>
<p>$$
\boldsymbol{s}(\boldsymbol{x}) := \nabla_{\boldsymbol{x}} \log p(\boldsymbol{x})
$$</p>
<p>Scoreå‡½æ•°æŒ‡å‘æ¦‚ç‡å¯†åº¦å¢é•¿æœ€å¿«çš„æ–¹å‘ã€‚</p>
<p><strong>æ€§è´¨1ï¼ˆé›¶å‡å€¼ï¼‰</strong>ï¼šå¯¹äºä»»æ„æ¦‚ç‡åˆ†å¸ƒï¼Œå…¶scoreå‡½æ•°çš„æœŸæœ›ä¸ºé›¶ï¼š</p>
<p>$$
\mathbb{E}_{\boldsymbol{x} \sim p}[\boldsymbol{s}(\boldsymbol{x})] = \int \nabla_{\boldsymbol{x}} \log p(\boldsymbol{x}) \cdot p(\boldsymbol{x}) d\boldsymbol{x} = \int \nabla_{\boldsymbol{x}} p(\boldsymbol{x}) d\boldsymbol{x} = \nabla_{\boldsymbol{x}} \int p(\boldsymbol{x}) d\boldsymbol{x} = \nabla_{\boldsymbol{x}} 1 = \boldsymbol{0}
$$</p>
<p>ï¼ˆå‡è®¾å¯ä»¥äº¤æ¢ç§¯åˆ†å’Œå¾®åˆ†çš„é¡ºåºï¼‰</p>
<p><strong>æ€§è´¨2ï¼ˆæ¡ä»¶scoreï¼‰</strong>ï¼šå¯¹äºæ¡ä»¶åˆ†å¸ƒ $p(\boldsymbol{x}_t|\boldsymbol{x}_0)$ï¼Œæ¡ä»¶scoreä¸ºï¼š</p>
<p>$$
\nabla_{\boldsymbol{x}_t} \log p(\boldsymbol{x}_t|\boldsymbol{x}_0)
$$</p>
<p>å¯¹äºé«˜æ–¯åˆ†å¸ƒ $p(\boldsymbol{x}_t|\boldsymbol{x}_0) = \mathcal{N}(\boldsymbol{\mu}_t(\boldsymbol{x}_0), \boldsymbol{\Sigma}_t)$ï¼š</p>
<p>$$
\log p(\boldsymbol{x}_t|\boldsymbol{x}_0) = -\frac{1}{2}(\boldsymbol{x}_t - \boldsymbol{\mu}_t)^T \boldsymbol{\Sigma}_t^{-1} (\boldsymbol{x}_t - \boldsymbol{\mu}_t) + C
$$</p>
<p>å› æ­¤ï¼š</p>
<p>$$
\nabla_{\boldsymbol{x}_t} \log p(\boldsymbol{x}_t|\boldsymbol{x}_0) = -\boldsymbol{\Sigma}_t^{-1}(\boldsymbol{x}_t - \boldsymbol{\mu}_t)
$$</p>
<p>å¯¹äºDDPMä¸­çš„ $p(\boldsymbol{x}_t|\boldsymbol{x}_0) = \mathcal{N}(\bar{\alpha}_t \boldsymbol{x}_0, \bar{\beta}_t^2 \boldsymbol{I})$ï¼š</p>
<p>$$
\nabla_{\boldsymbol{x}_t} \log p(\boldsymbol{x}_t|\boldsymbol{x}_0) = -\frac{\boldsymbol{x}_t - \bar{\alpha}_t \boldsymbol{x}_0}{\bar{\beta}_t^2} = -\frac{\boldsymbol{\varepsilon}}{\bar{\beta}_t}
$$</p>
<p>å…¶ä¸­ $\boldsymbol{x}_t = \bar{\alpha}_t \boldsymbol{x}_0 + \bar{\beta}_t \boldsymbol{\varepsilon}$ï¼Œ$\boldsymbol{\varepsilon} \sim \mathcal{N}(\boldsymbol{0}, \boldsymbol{I})$ã€‚</p>
<h4 id="42-score">4.2 è¾¹ç¼˜score</h4>
<p>è¾¹ç¼˜åˆ†å¸ƒçš„scoreï¼š</p>
<p>$$
\nabla_{\boldsymbol{x}_t} \log p_t(\boldsymbol{x}_t) = \nabla_{\boldsymbol{x}_t} \log \int p(\boldsymbol{x}_t|\boldsymbol{x}_0) p(\boldsymbol{x}_0) d\boldsymbol{x}_0
$$</p>
<p>åˆ©ç”¨ $\nabla \log f = \frac{\nabla f}{f}$ï¼š</p>
<p>$$
\begin{aligned}
\nabla_{\boldsymbol{x}_t} \log p_t(\boldsymbol{x}_t) &= \frac{\int \nabla_{\boldsymbol{x}_t} p(\boldsymbol{x}_t|\boldsymbol{x}_0) p(\boldsymbol{x}_0) d\boldsymbol{x}_0}{\int p(\boldsymbol{x}_t|\boldsymbol{x}_0) p(\boldsymbol{x}_0) d\boldsymbol{x}_0} \\
&= \frac{\int p(\boldsymbol{x}_t|\boldsymbol{x}_0) \nabla_{\boldsymbol{x}_t} \log p(\boldsymbol{x}_t|\boldsymbol{x}_0) p(\boldsymbol{x}_0) d\boldsymbol{x}_0}{\int p(\boldsymbol{x}_t|\boldsymbol{x}_0) p(\boldsymbol{x}_0) d\boldsymbol{x}_0} \\
&= \mathbb{E}_{\boldsymbol{x}_0 \sim p(\boldsymbol{x}_0|\boldsymbol{x}_t)}[\nabla_{\boldsymbol{x}_t} \log p(\boldsymbol{x}_t|\boldsymbol{x}_0)]
\end{aligned}
$$</p>
<p>è¿™è¡¨æ˜è¾¹ç¼˜scoreæ˜¯æ¡ä»¶scoreå…³äºåéªŒ $p(\boldsymbol{x}_0|\boldsymbol{x}_t)$ çš„æœŸæœ›ã€‚</p>
<h3 id="5-fokker-planck">5. Fokker-Planckæ–¹ç¨‹</h3>
<h4 id="51-fokker-planck">5.1 å‰å‘Fokker-Planckæ–¹ç¨‹</h4>
<p><strong>å®šç†</strong>ï¼šå¦‚æœ $\boldsymbol{x}_t$ æ»¡è¶³SDEï¼š</p>
<p>$$
d\boldsymbol{x}_t = \boldsymbol{f}_t(\boldsymbol{x}_t) dt + g_t d\boldsymbol{w}_t
$$</p>
<p>é‚£ä¹ˆå…¶æ¦‚ç‡å¯†åº¦ $p_t(\boldsymbol{x})$ æ»¡è¶³Fokker-Planckæ–¹ç¨‹ï¼ˆä¹Ÿç§°ä¸ºKolmogorovå‰å‘æ–¹ç¨‹ï¼‰ï¼š</p>
<p>$$
\frac{\partial p_t(\boldsymbol{x})}{\partial t} = -\nabla \cdot (\boldsymbol{f}_t(\boldsymbol{x}) p_t(\boldsymbol{x})) + \frac{g_t^2}{2} \Delta p_t(\boldsymbol{x})
$$</p>
<p>å…¶ä¸­ $\nabla \cdot$ æ˜¯æ•£åº¦ç®—å­ï¼Œ$\Delta = \nabla^2$ æ˜¯æ‹‰æ™®æ‹‰æ–¯ç®—å­ã€‚</p>
<p><strong>è¯¦ç»†æ¨å¯¼</strong>ï¼š</p>
<p><strong>æ­¥éª¤1</strong>ï¼šMasteræ–¹ç¨‹</p>
<p>ä»Chapman-Kolmogorovæ–¹ç¨‹å‡ºå‘ï¼š</p>
<p>$$
p_t(\boldsymbol{x}) = \int p(\boldsymbol{x}|\boldsymbol{y}) p_{t-\Delta t}(\boldsymbol{y}) d\boldsymbol{y}
$$</p>
<p>å…¶ä¸­ $p(\boldsymbol{x}|\boldsymbol{y})$ æ˜¯ä» $\boldsymbol{y}$ åœ¨æ—¶é—´ $\Delta t$ å†…è½¬ç§»åˆ° $\boldsymbol{x}$ çš„æ¦‚ç‡å¯†åº¦ã€‚</p>
<p><strong>æ­¥éª¤2</strong>ï¼šKramers-Moyalå±•å¼€</p>
<p>å¯¹äºSDEï¼Œè½¬ç§»æ¦‚ç‡åœ¨ $\Delta t \to 0$ æ—¶å¯ä»¥å±•å¼€ï¼š</p>
<p>$$
p(\boldsymbol{x}|\boldsymbol{y}) = \delta(\boldsymbol{x} - \boldsymbol{y} - \boldsymbol{f}_t(\boldsymbol{y})\Delta t) * \mathcal{N}(\boldsymbol{0}, g_t^2 \Delta t \boldsymbol{I})
$$</p>
<p>å…¶ä¸­ $*$ è¡¨ç¤ºå·ç§¯ã€‚</p>
<p><strong>æ­¥éª¤3</strong>ï¼šå¯¹ $p_t$ åšæ—¶é—´å·®åˆ†</p>
<p>$$
\frac{p_t(\boldsymbol{x}) - p_{t-\Delta t}(\boldsymbol{x})}{\Delta t} = \frac{1}{\Delta t}\int [p(\boldsymbol{x}|\boldsymbol{y}) - \delta(\boldsymbol{x} - \boldsymbol{y})] p_{t-\Delta t}(\boldsymbol{y}) d\boldsymbol{y}
$$</p>
<p><strong>æ­¥éª¤4</strong>ï¼šTaylorå±•å¼€</p>
<p>å¯¹ $p_{t-\Delta t}(\boldsymbol{y})$ åœ¨ $\boldsymbol{y} = \boldsymbol{x}$ é™„è¿‘å±•å¼€ï¼š</p>
<p>$$
p_{t-\Delta t}(\boldsymbol{y}) = p_{t-\Delta t}(\boldsymbol{x}) - (\boldsymbol{y} - \boldsymbol{x})^T \nabla p_{t-\Delta t}(\boldsymbol{x}) + \frac{1}{2}(\boldsymbol{y} - \boldsymbol{x})^T \nabla^2 p_{t-\Delta t}(\boldsymbol{x}) (\boldsymbol{y} - \boldsymbol{x}) + \cdots
$$</p>
<p><strong>æ­¥éª¤5</strong>ï¼šè®¡ç®—çŸ©</p>
<p>å¯¹äºè½¬ç§»æ¦‚ç‡ï¼Œæˆ‘ä»¬éœ€è¦è®¡ç®—ï¼š</p>
<p>$$
\begin{aligned}
\text{ä¸€é˜¶çŸ©ï¼š} &\quad \mathbb{E}[\boldsymbol{x} - \boldsymbol{y}|\boldsymbol{y}] = \boldsymbol{f}_t(\boldsymbol{y}) \Delta t \\
\text{äºŒé˜¶çŸ©ï¼š} &\quad \mathbb{E}[(\boldsymbol{x} - \boldsymbol{y})(\boldsymbol{x} - \boldsymbol{y})^T|\boldsymbol{y}] = g_t^2 \Delta t \boldsymbol{I} + O((\Delta t)^2)
\end{aligned}
$$</p>
<p><strong>æ­¥éª¤6</strong>ï¼šä»£å…¥å¹¶å–æé™</p>
<p>$$
\begin{aligned}
\frac{\partial p_t}{\partial t} &= -\nabla \cdot (\boldsymbol{f}_t p_t) + \frac{1}{2} \text{Tr}(g_t^2 \boldsymbol{I} \nabla^2 p_t) \\
&= -\nabla \cdot (\boldsymbol{f}_t p_t) + \frac{g_t^2}{2} \Delta p_t
\end{aligned}
$$</p>
<h4 id="52-fokker-planck">5.2 é€†å‘Fokker-Planckæ–¹ç¨‹</h4>
<p>å¯¹äºé€†å‘SDEï¼š</p>
<p>$$
d\boldsymbol{x} = [\boldsymbol{f}_t(\boldsymbol{x}) - g_t^2 \nabla_{\boldsymbol{x}} \log p_t(\boldsymbol{x})] dt + g_t d\bar{\boldsymbol{w}}
$$</p>
<p>å…¶æ¼‚ç§»é¡¹ä¸º $\tilde{\boldsymbol{f}}<em _boldsymbol_x="\boldsymbol{x">t(\boldsymbol{x}) = \boldsymbol{f}_t(\boldsymbol{x}) - g_t^2 \nabla</em>)$ï¼Œå› æ­¤æ—¶é—´åå‘çš„Fokker-Planckæ–¹ç¨‹ä¸ºï¼š}} \log p_t(\boldsymbol{x</p>
<p>$$
-\frac{\partial p_t(\boldsymbol{x})}{\partial t} = -\nabla \cdot ([\boldsymbol{f}_t(\boldsymbol{x}) - g_t^2 \nabla_{\boldsymbol{x}} \log p_t(\boldsymbol{x})] p_t(\boldsymbol{x})) + \frac{g_t^2}{2} \Delta p_t(\boldsymbol{x})
$$</p>
<p>å±•å¼€å³è¾¹ï¼š</p>
<p>$$
\begin{aligned}
&-\nabla \cdot (\boldsymbol{f}_t p_t) + \nabla \cdot (g_t^2 (\nabla p_t)) + \frac{g_t^2}{2} \Delta p_t \\
&= -\nabla \cdot (\boldsymbol{f}_t p_t) + g_t^2 \Delta p_t + \frac{g_t^2}{2} \Delta p_t \\
&= -\nabla \cdot (\boldsymbol{f}_t p_t) + \frac{g_t^2}{2} \Delta p_t
\end{aligned}
$$</p>
<p>è¿™æ°å¥½æŠµæ¶ˆï¼Œè¯´æ˜é€†å‘SDEç¡®å®ä½¿ $p_t$ æ²¿æ—¶é—´åå‘æ¼”åŒ–å›åˆå§‹åˆ†å¸ƒã€‚</p>
<h3 id="6-ode">6. æ¦‚ç‡æµODE</h3>
<h4 id="61-sdeode">6.1 ä»SDEåˆ°ODE</h4>
<p><strong>å®šç†</strong>ï¼šå¯¹äºå‰å‘SDEï¼š</p>
<p>$$
d\boldsymbol{x} = \boldsymbol{f}_t(\boldsymbol{x}) dt + g_t d\boldsymbol{w}
$$</p>
<p>å­˜åœ¨ä¸€ä¸ªç¡®å®šæ€§çš„ODEï¼ˆå¸¸å¾®åˆ†æ–¹ç¨‹ï¼‰ï¼Œç§°ä¸ºæ¦‚ç‡æµODEï¼š</p>
<p>$$
d\boldsymbol{x} = \left[\boldsymbol{f}_t(\boldsymbol{x}) - \frac{1}{2}g_t^2 \nabla_{\boldsymbol{x}} \log p_t(\boldsymbol{x})\right] dt
$$</p>
<p>å®ƒå…·æœ‰ä¸åŸSDEç›¸åŒçš„è¾¹ç¼˜åˆ†å¸ƒ $p_t(\boldsymbol{x})$ã€‚</p>
<p><strong>æ¨å¯¼æ€è·¯</strong>ï¼šä¸¤ä¸ªè¿‡ç¨‹æœ‰ç›¸åŒè¾¹ç¼˜åˆ†å¸ƒï¼Œæ„å‘³ç€å®ƒä»¬æ»¡è¶³ç›¸åŒçš„Fokker-Planckæ–¹ç¨‹ã€‚å¯¹äºODEï¼š</p>
<p>$$
d\boldsymbol{x} = \boldsymbol{u}_t(\boldsymbol{x}) dt
$$</p>
<p>å…¶Fokker-Planckæ–¹ç¨‹ä¸ºï¼ˆæ— æ‰©æ•£é¡¹ï¼‰ï¼š</p>
<p>$$
\frac{\partial p_t}{\partial t} = -\nabla \cdot (\boldsymbol{u}_t p_t)
$$</p>
<p>è¦ä¸åŸSDEçš„Fokker-Planckæ–¹ç¨‹ç›¸åŒï¼š</p>
<p>$$
-\nabla \cdot (\boldsymbol{u}_t p_t) = -\nabla \cdot (\boldsymbol{f}_t p_t) + \frac{g_t^2}{2} \Delta p_t
$$</p>
<p>å±•å¼€å³è¾¹çš„æ‹‰æ™®æ‹‰æ–¯é¡¹ï¼š</p>
<p>$$
\Delta p_t = \nabla \cdot (\nabla p_t) = \nabla \cdot (p_t \nabla \log p_t)
$$</p>
<p>å› æ­¤ï¼š</p>
<p>$$
-\nabla \cdot (\boldsymbol{u}_t p_t) = -\nabla \cdot (\boldsymbol{f}_t p_t) + \frac{g_t^2}{2} \nabla \cdot (p_t \nabla \log p_t)
$$</p>
<p>æ¶ˆå»æ•£åº¦ç®—å­ï¼ˆåœ¨é€‚å½“æ¡ä»¶ä¸‹ï¼‰ï¼š</p>
<p>$$
\boldsymbol{u}_t = \boldsymbol{f}_t - \frac{g_t^2}{2} \nabla \log p_t
$$</p>
<h4 id="62-ode">6.2 é€†å‘æ¦‚ç‡æµODE</h4>
<p>ç±»ä¼¼åœ°ï¼Œé€†å‘è¿‡ç¨‹ä¹Ÿå¯ä»¥å†™æˆODEå½¢å¼ï¼š</p>
<p>$$
d\boldsymbol{x} = \left[\boldsymbol{f}_t(\boldsymbol{x}) - g_t^2 \nabla_{\boldsymbol{x}} \log p_t(\boldsymbol{x}) + \frac{g_t^2}{2} \nabla_{\boldsymbol{x}} \log p_t(\boldsymbol{x})\right] dt = \left[\boldsymbol{f}_t(\boldsymbol{x}) - \frac{g_t^2}{2} \nabla_{\boldsymbol{x}} \log p_t(\boldsymbol{x})\right] dt
$$</p>
<p>è¿™ä¸å‰å‘æ¦‚ç‡æµODEï¼ˆæ—¶é—´åå‘ï¼‰æ˜¯ä¸€è‡´çš„ã€‚</p>
<p><strong>ä¼˜åŠ¿</strong>ï¼šODEé‡‡æ ·çš„ä¼˜åŠ¿åœ¨äºï¼š
1. ç¡®å®šæ€§ï¼šç»™å®šåˆå§‹å™ªå£°ï¼Œç”Ÿæˆç»“æœå”¯ä¸€
2. ç²¾ç¡®é‡æ„ï¼šå¯ä»¥ä»æ•°æ®ç¼–ç åˆ°æ½œç©ºé—´å†è§£ç å›æ¥
3. æ’å€¼ï¼šå¯ä»¥åœ¨æ½œç©ºé—´è¿›è¡Œæœ‰æ„ä¹‰çš„æ’å€¼</p>
<h3 id="7-ddpm">7. ä¸ç¦»æ•£DDPMçš„è¿ç»­æé™å…³ç³»</h3>
<h4 id="71-ddpm">7.1 DDPMçš„ç¦»æ•£å½¢å¼</h4>
<p>DDPMå®šä¹‰ï¼š</p>
<p>$$
\boldsymbol{x}_t = \sqrt{\alpha_t} \boldsymbol{x}_{t-1} + \sqrt{1 - \alpha_t} \boldsymbol{\varepsilon}_t
$$</p>
<p>ç´¯ç§¯å½¢å¼ï¼š</p>
<p>$$
\boldsymbol{x}_t = \sqrt{\bar{\alpha}_t} \boldsymbol{x}_0 + \sqrt{1 - \bar{\alpha}_t} \boldsymbol{\varepsilon}
$$</p>
<p>å…¶ä¸­ $\bar{\alpha}<em s="1">t = \prod</em>^t \alpha_s$ã€‚</p>
<h4 id="72">7.2 è¿ç»­æé™</h4>
<p>è®¾æ€»æ—¶é•¿ä¸º1ï¼Œæ­¥æ•°ä¸º $N$ï¼Œåˆ™ $\Delta t = 1/N$ï¼Œ$t_k = k\Delta t$ã€‚</p>
<p>å®šä¹‰è¿ç»­å‡½æ•° $\bar{\alpha}(t)$ ä½¿å¾— $\bar{\alpha}(t_k) = \bar{\alpha}_k$ã€‚</p>
<p>å¯¹æ•°å¾®åˆ†ï¼š</p>
<p>$$
\frac{d \log \bar{\alpha}(t)}{dt} = \lim_{\Delta t \to 0} \frac{\log \bar{\alpha}_{t+\Delta t} - \log \bar{\alpha}_t}{\Delta t} = \lim_{\Delta t \to 0} \frac{\log \alpha_{t+\Delta t}}{\Delta t}
$$</p>
<p>å¯¹äºDDPMï¼Œ$\alpha_t = 1 - \beta_t$ï¼Œ$\beta_t$ å¾ˆå°ï¼Œå› æ­¤ï¼š</p>
<p>$$
\log \alpha_t = \log(1 - \beta_t) \approx -\beta_t
$$</p>
<p>å®šä¹‰ $\beta(t)$ ä½¿å¾— $\beta(t_k) = \beta_k$ï¼Œåˆ™ï¼š</p>
<p>$$
\frac{d \log \bar{\alpha}(t)}{dt} \approx -\frac{\beta(t)}{\Delta t} \cdot \Delta t = -\beta(t)
$$</p>
<p>å› æ­¤ï¼š</p>
<p>$$
\bar{\alpha}(t) = \exp\left(-\int_0^t \beta(s) ds\right)
$$</p>
<h4 id="73-sde">7.3 ä»ç¦»æ•£åˆ°è¿ç»­SDE</h4>
<p>ç¦»æ•£æ­¥éª¤ï¼š</p>
<p>$$
\boldsymbol{x}_{t+\Delta t} - \boldsymbol{x}_t = (\sqrt{\alpha_{t+\Delta t}} - 1)\boldsymbol{x}_t + \sqrt{1 - \alpha_{t+\Delta t}} \boldsymbol{\varepsilon}
$$</p>
<p>è¿ç»­æé™ï¼š</p>
<p>$$
\sqrt{\alpha_{t+\Delta t}} = \sqrt{1 - \beta_{t+\Delta t}} \approx 1 - \frac{\beta_{t+\Delta t}}{2}
$$</p>
<p>å› æ­¤ï¼š</p>
<p>$$
\boldsymbol{x}_{t+\Delta t} - \boldsymbol{x}_t \approx -\frac{\beta_t}{2}\boldsymbol{x}_t \Delta t + \sqrt{\beta_t \Delta t} \boldsymbol{\varepsilon}
$$</p>
<p>å¯¹åº”SDEï¼š</p>
<p>$$
d\boldsymbol{x} = -\frac{1}{2}\beta_t \boldsymbol{x} dt + \sqrt{\beta_t} d\boldsymbol{w}
$$</p>
<p>è¿™æ­£æ˜¯VP-SDEï¼ˆVariance Preserving SDEï¼‰çš„å½¢å¼ï¼Œå…¶ä¸­ï¼š
- $\boldsymbol{f}_t(\boldsymbol{x}) = -\frac{1}{2}\beta_t \boldsymbol{x}$
- $g_t = \sqrt{\beta_t}$</p>
<h3 id="8">8. é‡‡æ ·ç®—æ³•</h3>
<h4 id="81-euler-maruyama">8.1 Euler-Maruyamaæ–¹æ³•</h4>
<p>å¯¹äºé€†å‘SDEï¼š</p>
<p>$$
d\boldsymbol{x} = [\boldsymbol{f}_t(\boldsymbol{x}) - g_t^2 \nabla_{\boldsymbol{x}} \log p_t(\boldsymbol{x})] dt + g_t d\bar{\boldsymbol{w}}
$$</p>
<p>Euler-Maruyamaç¦»æ•£åŒ–ï¼š</p>
<p>$$
\boldsymbol{x}_{t-\Delta t} = \boldsymbol{x}_t - [\boldsymbol{f}_t(\boldsymbol{x}_t) - g_t^2 \boldsymbol{s}_{\boldsymbol{\theta}}(\boldsymbol{x}_t, t)] \Delta t + g_t \sqrt{\Delta t} \boldsymbol{z}_t
$$</p>
<p>å…¶ä¸­ $\boldsymbol{z}<em _boldsymbol_theta="\boldsymbol{\theta">t \sim \mathcal{N}(\boldsymbol{0}, \boldsymbol{I})$ï¼Œ$\boldsymbol{s}</em>$ æ˜¯è®­ç»ƒå¥½çš„scoreç½‘ç»œã€‚}</p>
<p><strong>ç®—æ³•ï¼ˆé€†å‘é‡‡æ ·ï¼‰</strong>ï¼š</p>
<div class="codehilite"><pre><span></span><code>è¾“å…¥ï¼šscoreç½‘ç»œ s_Î¸, åˆå§‹å™ªå£° x_T ~ N(0, I), æ—¶é—´æ­¥é•¿ Î”t
è¾“å‡ºï¼šç”Ÿæˆæ ·æœ¬ x_0

for t = T, T-Î”t, ..., Î”t:
    z ~ N(0, I)  # å½“ t &gt; Î”t æ—¶
    å¦‚æœ t = Î”t: z = 0  # æœ€åä¸€æ­¥ä¸åŠ å™ªå£°

    # è®¡ç®—æ¼‚ç§»å’Œæ‰©æ•£
    drift = f_t(x_t) - g_t^2 <span class="gs">* s_Î¸(x_t, t)</span>
<span class="gs">    diffusion = g_t *</span> sqrt(Î”t) <span class="gs">* z</span>

<span class="gs">    # æ›´æ–°</span>
<span class="gs">    x_{t-Î”t} = x_t - drift *</span> Î”t + diffusion

è¿”å› x_0
</code></pre></div>

<h4 id="82-predictor-corrector">8.2 é¢„æµ‹å™¨-æ ¡æ­£å™¨é‡‡æ ·ï¼ˆPredictor-Correctorï¼‰</h4>
<p>ä¸ºäº†æé«˜é‡‡æ ·è´¨é‡ï¼Œå¯ä»¥ç»“åˆé¢„æµ‹æ­¥éª¤å’ŒLangevinåŠ¨åŠ›å­¦æ ¡æ­£æ­¥éª¤ï¼š</p>
<p><strong>é¢„æµ‹æ­¥éª¤ï¼ˆEuler-Maruyamaï¼‰</strong>ï¼š</p>
<p>$$
\tilde{\boldsymbol{x}}_{t-\Delta t} = \boldsymbol{x}_t - [\boldsymbol{f}_t(\boldsymbol{x}_t) - g_t^2 \boldsymbol{s}_{\boldsymbol{\theta}}(\boldsymbol{x}_t, t)] \Delta t + g_t \sqrt{\Delta t} \boldsymbol{z}_t
$$</p>
<p><strong>æ ¡æ­£æ­¥éª¤ï¼ˆLangevin MCMCï¼‰</strong>ï¼šå¯¹äº $M$ æ­¥ï¼š</p>
<p>$$
\boldsymbol{x}^{(m+1)} = \boldsymbol{x}^{(m)} + \epsilon \boldsymbol{s}_{\boldsymbol{\theta}}(\boldsymbol{x}^{(m)}, t) + \sqrt{2\epsilon} \boldsymbol{z}^{(m)}
$$</p>
<p>å…¶ä¸­ $\boldsymbol{x}^{(0)} = \tilde{\boldsymbol{x}}<em t="t" t-_Delta="t-\Delta">{t-\Delta t}$ï¼Œæœ€ç»ˆ $\boldsymbol{x}</em>$ã€‚} = \boldsymbol{x}^{(M)</p>
<h4 id="83-ode">8.3 ODEæ±‚è§£å™¨</h4>
<p>å¯¹äºæ¦‚ç‡æµODEï¼š</p>
<p>$$
d\boldsymbol{x} = \left[\boldsymbol{f}_t(\boldsymbol{x}) - \frac{1}{2}g_t^2 \nabla_{\boldsymbol{x}} \log p_t(\boldsymbol{x})\right] dt
$$</p>
<p>å¯ä»¥ä½¿ç”¨é«˜é˜¶ODEæ±‚è§£å™¨ï¼Œå¦‚Runge-Kuttaæ–¹æ³•ï¼š</p>
<p><strong>RK4ï¼ˆå››é˜¶Runge-Kuttaï¼‰</strong>ï¼š</p>
<p>$$
\begin{aligned}
\boldsymbol{k}_1 &= \boldsymbol{f}_t(\boldsymbol{x}_t) - \frac{1}{2}g_t^2 \boldsymbol{s}_{\boldsymbol{\theta}}(\boldsymbol{x}_t, t) \\
\boldsymbol{k}_2 &= \boldsymbol{f}_{t-\Delta t/2}(\boldsymbol{x}_t - \frac{\Delta t}{2}\boldsymbol{k}_1) - \frac{1}{2}g_{t-\Delta t/2}^2 \boldsymbol{s}_{\boldsymbol{\theta}}(\boldsymbol{x}_t - \frac{\Delta t}{2}\boldsymbol{k}_1, t-\frac{\Delta t}{2}) \\
\boldsymbol{k}_3 &= \boldsymbol{f}_{t-\Delta t/2}(\boldsymbol{x}_t - \frac{\Delta t}{2}\boldsymbol{k}_2) - \frac{1}{2}g_{t-\Delta t/2}^2 \boldsymbol{s}_{\boldsymbol{\theta}}(\boldsymbol{x}_t - \frac{\Delta t}{2}\boldsymbol{k}_2, t-\frac{\Delta t}{2}) \\
\boldsymbol{k}_4 &= \boldsymbol{f}_{t-\Delta t}(\boldsymbol{x}_t - \Delta t \boldsymbol{k}_3) - \frac{1}{2}g_{t-\Delta t}^2 \boldsymbol{s}_{\boldsymbol{\theta}}(\boldsymbol{x}_t - \Delta t \boldsymbol{k}_3, t-\Delta t) \\
\boldsymbol{x}_{t-\Delta t} &= \boldsymbol{x}_t - \frac{\Delta t}{6}(\boldsymbol{k}_1 + 2\boldsymbol{k}_2 + 2\boldsymbol{k}_3 + \boldsymbol{k}_4)
\end{aligned}
$$</p>
<p>ODEæ±‚è§£é€šå¸¸æ¯”SDEé‡‡æ ·éœ€è¦æ›´å°‘çš„æ­¥æ•°å³å¯è·å¾—é«˜è´¨é‡æ ·æœ¬ã€‚</p>
<h3 id="9">9. è®­ç»ƒè¿‡ç¨‹çš„å®Œæ•´æ¨å¯¼</h3>
<h4 id="91-score">9.1 ScoreåŒ¹é…ç›®æ ‡</h4>
<p>ç›®æ ‡æ˜¯å­¦ä¹  $\boldsymbol{s}<em _boldsymbol_x="\boldsymbol{x">{\boldsymbol{\theta}}(\boldsymbol{x}_t, t) \approx \nabla</em>_t)$ã€‚}_t} \log p_t(\boldsymbol{x</p>
<p>å®Œæ•´çš„denoising score matchingæŸå¤±ï¼š</p>
<p>$$
\mathcal{L}(\boldsymbol{\theta}) = \mathbb{E}_{t \sim \mathcal{U}[0,T]} \mathbb{E}_{\boldsymbol{x}_0 \sim p_0} \mathbb{E}_{\boldsymbol{x}_t \sim p(\boldsymbol{x}_t|\boldsymbol{x}_0)} \left[\lambda(t) \|\boldsymbol{s}_{\boldsymbol{\theta}}(\boldsymbol{x}_t, t) - \nabla_{\boldsymbol{x}_t} \log p(\boldsymbol{x}_t|\boldsymbol{x}_0)\|^2\right]
$$</p>
<p>å…¶ä¸­ $\lambda(t)$ æ˜¯æƒé‡å‡½æ•°ã€‚</p>
<h4 id="92-sde">9.2 å¯¹äºçº¿æ€§SDEçš„ç®€åŒ–</h4>
<p>å¯¹äº $p(\boldsymbol{x}_t|\boldsymbol{x}_0) = \mathcal{N}(\bar{\alpha}_t \boldsymbol{x}_0, \bar{\beta}_t^2 \boldsymbol{I})$ï¼Œé‡‡æ · $\boldsymbol{x}_t = \bar{\alpha}_t \boldsymbol{x}_0 + \bar{\beta}_t \boldsymbol{\varepsilon}$ï¼Œ$\boldsymbol{\varepsilon} \sim \mathcal{N}(\boldsymbol{0}, \boldsymbol{I})$ã€‚</p>
<p>æ¡ä»¶scoreï¼š</p>
<p>$$
\nabla_{\boldsymbol{x}_t} \log p(\boldsymbol{x}_t|\boldsymbol{x}_0) = -\frac{\boldsymbol{x}_t - \bar{\alpha}_t \boldsymbol{x}_0}{\bar{\beta}_t^2} = -\frac{\boldsymbol{\varepsilon}}{\bar{\beta}_t}
$$</p>
<p>å¦‚æœå‚æ•°åŒ–ä¸º $\boldsymbol{s}<em _boldsymbol_theta="\boldsymbol{\theta">{\boldsymbol{\theta}}(\boldsymbol{x}_t, t) = -\frac{\boldsymbol{\epsilon}</em>$ï¼Œåˆ™æŸå¤±å˜ä¸ºï¼š}}(\boldsymbol{x}_t, t)}{\bar{\beta}_t</p>
<p>$$
\mathcal{L}(\boldsymbol{\theta}) = \mathbb{E}_{t, \boldsymbol{x}_0, \boldsymbol{\varepsilon}} \left[\frac{\lambda(t)}{\bar{\beta}_t^2} \|\boldsymbol{\epsilon}_{\boldsymbol{\theta}}(\bar{\alpha}_t \boldsymbol{x}_0 + \bar{\beta}_t \boldsymbol{\varepsilon}, t) - \boldsymbol{\varepsilon}\|^2\right]
$$</p>
<p>é€‰æ‹© $\lambda(t) = \bar{\beta}_t^2$ å¾—åˆ°DDPMæŸå¤±ï¼š</p>
<p>$$
\mathcal{L}_{\text{simple}}(\boldsymbol{\theta}) = \mathbb{E}_{t, \boldsymbol{x}_0, \boldsymbol{\varepsilon}} \left[\|\boldsymbol{\epsilon}_{\boldsymbol{\theta}}(\boldsymbol{x}_t, t) - \boldsymbol{\varepsilon}\|^2\right]
$$</p>
<h3 id="10">10. æ€»ç»“ä¸ç»Ÿä¸€è§†è§’</h3>
<h4 id="101">10.1 ä¸‰ç§ç­‰ä»·è¡¨ç¤º</h4>
<p>å¯¹äºæ‰©æ•£æ¨¡å‹ï¼Œæœ‰ä¸‰ç§ç­‰ä»·çš„è¡¨ç¤ºæ–¹å¼ï¼š</p>
<ol>
<li><strong>å™ªå£°é¢„æµ‹</strong>ï¼š$\boldsymbol{\epsilon}_{\boldsymbol{\theta}}(\boldsymbol{x}_t, t) \approx \boldsymbol{\varepsilon}$</li>
<li><strong>Scoreé¢„æµ‹</strong>ï¼š$\boldsymbol{s}<em _boldsymbol_x="\boldsymbol{x">{\boldsymbol{\theta}}(\boldsymbol{x}_t, t) \approx \nabla</em>_t)$}_t} \log p_t(\boldsymbol{x</li>
<li><strong>æ•°æ®é¢„æµ‹</strong>ï¼š$\hat{\boldsymbol{x}}_{\boldsymbol{\theta}}(\boldsymbol{x}_t, t) \approx \mathbb{E}[\boldsymbol{x}_0|\boldsymbol{x}_t]$</li>
</ol>
<p>å®ƒä»¬ä¹‹é—´çš„å…³ç³»ï¼š</p>
<p>$$
\boldsymbol{s}_{\boldsymbol{\theta}} = -\frac{\boldsymbol{\epsilon}_{\boldsymbol{\theta}}}{\bar{\beta}_t} = -\frac{\boldsymbol{x}_t - \bar{\alpha}_t \hat{\boldsymbol{x}}_{\boldsymbol{\theta}}}{\bar{\beta}_t^2}
$$</p>
<p>$$
\hat{\boldsymbol{x}}_{\boldsymbol{\theta}} = \frac{\boldsymbol{x}_t - \bar{\beta}_t \boldsymbol{\epsilon}_{\boldsymbol{\theta}}}{\bar{\alpha}_t}
$$</p>
<h4 id="102">10.2 è¿ç»­æ—¶é—´æ¡†æ¶çš„ä¼˜åŠ¿</h4>
<p>SDEæ¡†æ¶çš„ä¸»è¦ä¼˜åŠ¿ï¼š</p>
<ol>
<li><strong>ç†è®ºç»Ÿä¸€</strong>ï¼šå°†DDPMã€score matchingã€å»å™ªç­‰ç»Ÿä¸€åœ¨åŒä¸€æ¡†æ¶ä¸‹</li>
<li><strong>çµæ´»é‡‡æ ·</strong>ï¼šå¯ä»¥é€‰æ‹©ä»»æ„æ­¥æ•°ï¼Œä¸å—è®­ç»ƒæ—¶æ­¥æ•°é™åˆ¶</li>
<li><strong>å¤šç§æ±‚è§£å™¨</strong>ï¼šå¯ä»¥ä½¿ç”¨SDEæ±‚è§£å™¨æˆ–ODEæ±‚è§£å™¨</li>
<li><strong>ç²¾ç¡®ä¼¼ç„¶è®¡ç®—</strong>ï¼šé€šè¿‡ODEå¯ä»¥ç²¾ç¡®è®¡ç®—ä¼¼ç„¶ï¼ˆä½¿ç”¨è¿ç»­å½’ä¸€åŒ–æµï¼‰</li>
<li><strong>æ¡ä»¶ç”Ÿæˆ</strong>ï¼šå®¹æ˜“æ‰©å±•åˆ°æ¡ä»¶ç”Ÿæˆå’Œå¼•å¯¼ç”Ÿæˆ</li>
</ol>
<p>è¿™ä¸ªç»Ÿä¸€çš„SDEè§†è§’ä¸ºæ‰©æ•£æ¨¡å‹æä¾›äº†åšå®çš„æ•°å­¦åŸºç¡€ï¼Œä½¿å¾—æˆ‘ä»¬èƒ½å¤Ÿæ›´æ·±å…¥åœ°ç†è§£å’Œæ”¹è¿›è¿™ç±»ç”Ÿæˆæ¨¡å‹ã€‚</p>
        </div>
    </div>
</body>
</html>