<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>一道概率不等式：盯着它到显然成立为止！ | ML & Math Blog Posts</title>
    <meta name="description" content="一道概率不等式：盯着它到显然成立为止！&para;
原文链接: https://spaces.ac.cn/archives/10902
发布日期: 

前两天，QQ群里有群友抛出了一道不等式求证：  

一道概率相关的不等式，出自《There is no fast single hashing algorithm》
简短的题目，加上“easily”的提示，让人觉得这似乎是显然成立的结果，然而提问者...">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css">

    <!-- Google Fonts -->
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="../assets/css/main.css">
    <link rel="stylesheet" href="../assets/css/post.css">

    <!-- Custom JS -->
    <script src="../assets/js/collapsible.js" defer></script>

    <!-- MathJax for math rendering with equation numbering -->
    <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        displayMath: [['$$', '$$'], ['\\[', '\\]']],
        processEscapes: true,
        processEnvironments: true,
        tags: 'ams',  // Enable equation numbering with AMS style
        tagSide: 'right',  // Place equation numbers on the right
        tagIndent: '0.8em',  // Indentation for equation numbers
        multlineWidth: '85%'
      },
      options: {
        skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre']
      }
    };
    </script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <!-- Syntax highlighting -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.7.0/build/styles/github.min.css">
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.7.0/build/highlight.min.js"></script>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light border-bottom">
        <div class="container">
            <a class="navbar-brand" href="../index.html">
                <i class="fas fa-brain"></i> ML & Math Blog
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="../index.html"><i class="fas fa-home"></i> 首页</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Post Content -->
    <article class="container post-container my-5">
        <!-- Breadcrumb Navigation -->
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="../index.html"><i class="fas fa-home"></i> 首页</a></li>
                
                <li class="breadcrumb-item"><a href="../index.html?tags=不等式">不等式</a></li>
                
                <li class="breadcrumb-item active" aria-current="page">
                    #319 一道概率不等式：盯着它到显然成立为止！
                </li>
            </ol>
        </nav>

        <!-- Post Header -->
        <header class="post-header mb-4">
            <h1 class="post-title">
                <span class="post-number">#319</span>
                一道概率不等式：盯着它到显然成立为止！
            </h1>
            <div class="post-meta">
                <span><i class="far fa-calendar"></i> 2025-04-30</span>
                
            </div>
            
            <div class="post-tags mt-3">
                
                <a href="../index.html?tags=不等式" class="tag-link">
                    <span class="tag"><i class="fas fa-tag"></i> 不等式</span>
                </a>
                
                <a href="../index.html?tags=概率" class="tag-link">
                    <span class="tag"><i class="fas fa-tag"></i> 概率</span>
                </a>
                
                <a href="../index.html?tags=显然成立" class="tag-link">
                    <span class="tag"><i class="fas fa-tag"></i> 显然成立</span>
                </a>
                
                <a href="../index.html?tags=生成模型" class="tag-link">
                    <span class="tag"><i class="fas fa-tag"></i> 生成模型</span>
                </a>
                
                <a href="../index.html?tags=attention" class="tag-link">
                    <span class="tag"><i class="fas fa-tag"></i> attention</span>
                </a>
                
            </div>
            
        </header>

        <div class="row">
            <!-- Main Content -->
            <div class="col-lg-9">
                <!-- Post Body -->
                <div class="post-content">
                    <h1 id="_1">一道概率不等式：盯着它到显然成立为止！<a class="toc-link" href="#_1" title="Permanent link">&para;</a></h1>
<p><strong>原文链接</strong>: <a href="https://spaces.ac.cn/archives/10902">https://spaces.ac.cn/archives/10902</a></p>
<p><strong>发布日期</strong>: </p>
<hr />
<p>前两天，QQ群里有群友抛出了一道不等式求证：  </p>
<p><a href="/usr/uploads/2025/04/3939521975.jpg" title="点击查看原图"><img alt="一道概率相关的不等式，出自《There is no fast single hashing algorithm》" src="/usr/uploads/2025/04/3939521975.jpg" /></a></p>
<p>一道概率相关的不等式，出自《There is no fast single hashing algorithm》</p>
<p>简短的题目，加上“easily”的提示，让人觉得这似乎是显然成立的结果，然而提问者却表示尝试了很久仍未果。那么实际情况如何呢？是否真的是显然成立呢？</p>
<h2 id="_2">初步尝试<a class="toc-link" href="#_2" title="Permanent link">&para;</a></h2>
<p>题目等价于证<br />
\begin{equation}\sum_{i=0}^j p^i \leq \sum_{i=0}^j \left(\log\frac{1}{1-p}\right)^i/i!,\qquad p\in[0, 1)\label{eq:q}\end{equation}<br />
所给的提示是<br />
\begin{equation}\log\frac{1}{1-p} = \sum_{i=1}^{\infty} \frac{p^i}{i} = p + \frac{p^2}{2} + \frac{p^3}{3} + \cdots \label{eq:log-1-p}\end{equation}<br />
这个提示似乎在引导我们替换掉式$\eqref{eq:q}$右端的$\log\frac{1}{1-p}$，然后展开成$p$的幂级数来逐项对比。由于$\log\frac{1}{1-p}$的展开式系数全是正数，所以式$\eqref{eq:q}$展开成$p$的幂级数后每一项系数必然也都是正数，因此我们只要证明前$j$项系数都大于等于1。</p>
<p>思路看上去靠谱，然而将一个幂级数的$i$次幂重新展开为幂级数是一件非常繁琐的事情，所以实际上很难走通。笔者又另外尝试了一些思路，比如设$x=\log\frac{1}{1-p}$转为关于$x$的不等式来证，看上去也很有希望，但最终都被卡住，无法完整完成证明。</p>
<p>所以，初次尝试宣布失败。</p>
<h2 id="_3">泰勒硬刚<a class="toc-link" href="#_3" title="Permanent link">&para;</a></h2>
<p>兜兜转转，回到原点。试了大半天，总感觉还是将式$\eqref{eq:q}$右端展开为幂级数的思路靠谱，但直接对式$\eqref{eq:log-1-p}$求幂走不通的话，我们只能回到泰勒展开的原始做法——求导。</p>
<p>简单起见，我们定义<br />
\begin{equation}f_j(x) = \sum_{i=0}^j \frac{x^i}{i!}\end{equation}<br />
原题就是证<br />
\begin{equation}f_j(x) \geq \sum_{i=0}^j p^i,\qquad x = \log\frac{1}{1-p}\end{equation}<br />
我们转化为证<br />
\begin{equation}\left.\frac{d^k}{dp^k}f_j(x)\right|<em j-1="j-1">{p=0} \,\,\geq\,\, \left\{\begin{aligned}&amp;\, 1,\,\, k \leq j \\[5pt]
&amp;\,0,\,\, k &gt; j\end{aligned}\right.\end{equation}<br />
留意到当$j \geq 0$时$f_j(0)=1$，当$j &lt; 0$时我们定义$f_j(x)\equiv 0$，以及成立$f_j'(x)= f</em>(x)$，于是我们有<br />
\begin{gather}\frac{d}{dp}f_j(x) = f_{j-1}(x) \frac{1}{1-p} \\
\frac{d^2}{dp^2}f_j(x) = [f_{j-1}(x) + f_{j-2}(x)]\frac{1}{(1-p)^2} \\
\frac{d^3}{dp^3}f_j(x) = [2f_{j-1}(x) + 3f_{j-2}(x) + f_{j-3}(x)]\frac{1}{(1-p)^3} \\
\vdots \notag\\
\frac{d^k}{dp^k}f_j(x) = [\alpha_1 f_{j-1}(x) + \alpha_2 f_{j-2}(x) + \cdots + \alpha_k f_{j-k}(x)]\frac{1}{(1-p)^k} \\[8pt]
\frac{d^{k+1}}{dp^{k+1}}f_j(x) = \left[\begin{aligned}
\alpha_1 f_{j-2}(x) + \alpha_2 f_{j-3}(x) + \cdots + \alpha_k f_{j-k-1}(x) \\
+ k(\alpha_1 f_{j-1}(x) + \alpha_2 f_{j-2}(x) + \cdots + \alpha_k f_{j-k}(x))
\end{aligned}\right]\frac{1}{(1-p)^{k+1}}<br />
\end{gather}<br />
规律：$\frac{d^k}{dp^k}f_j(x)$是$f_{j-1}(x),f_{j-2}(x),\cdots,f_{j-k}(x)$的线性组合与$\frac{1}{(1-p)^k}$的乘积，注意其实我们只关心$\left.\frac{d^k}{dp^k}f_j(x)\right|<em j-1="j-1">{p=0}$的值，上式代入$p=0$后就等于$f</em>(0)$非1即0）。根据$f_j(x)$的求导规律，我们可以得出：当$k \leq j$时，有}(x),f_{j-2}(x),\cdots,f_{j-k}(x)$中非零项的系数之和（注意$f_{j-1}(0),f_{j-2}(0),\cdots,f_{j-k<br />
\begin{equation}\left.\frac{d^k}{dp^k}f_j(x)\right|<em p="0">{p=0} = k \times \left.\frac{d^{k-1}}{dp^{k-1}}f_j(x)\right|</em>}\end{equation
所以$\left.\frac{d^k}{dp^k}f_j(x)\right|<em j-k="j-k">{p=0} = k!$，那么根据泰勒展开式$p^k$项的系数为$k!/k!=1$；当$k &gt; j$时，由于此时$f</em> &lt; k!$，所以$p^k$项的系数则小于1，但仍旧大于零，因此所证不等式成立。}(0)=0$，所以$\left.\frac{d^k}{dp^k}f_j(x)\right|_{p=0</p>
<h2 id="_4">显然易得<a class="toc-link" href="#_4" title="Permanent link">&para;</a></h2>
<p>这样看来，原题目并不是像作者说的显然成立了？笔者开始也是这样认为的，直到另一位群友给出了一个极其简单的理解视角，才恍然大悟，这道题还真的是显然成立的！</p>
<p>这个视角充分体现了逆向思维，如下：<br />
\begin{equation}\begin{aligned}
\sum_{i=0}^j \left(\log\frac{1}{1-p}\right)^i/i! =&amp;\, \sum_{i=0}^{\infty} \left(\log\frac{1}{1-p}\right)^i/i! - \sum_{i=j+1}^{\infty} \left(\log\frac{1}{1-p}\right)^i/i! \\
=&amp;\, \exp\left(\log\frac{1}{1-p}\right) - \sum_{i=j+1}^{\infty} \left(\log\frac{1}{1-p}\right)^i/i! \\
=&amp;\, \frac{1}{1-p} - \sum_{i=j+1}^{\infty} \left(\log\frac{1}{1-p}\right)^i/i! \\
=&amp;\, \sum_{i=1}^{\infty} p^i - \sum_{i=j+1}^{\infty} \left(\log\frac{1}{1-p}\right)^i/i! \\
\end{aligned}\end{equation}<br />
注意$\log\frac{1}{1-p}\sim p$，所以后面的$\sum_{i=j+1}^{\infty}$部分，只对$p^{j+1}$及以上的项有贡献，因此我们就近乎显然地证明了右端展开式的前$j+1$项系数都是1！整个证明并不难理解，真正难的地方是勇敢将右端的求和推到无穷项，然后留意到误差部分只对$p^{j+1}$及以上有贡献，这是经典的逆向思维。</p>
<p>数学，妙不可言～</p>
<p><em><strong>转载到请包括本文地址：</strong><a href="https://spaces.ac.cn/archives/10902">https://spaces.ac.cn/archives/10902</a></em></p>
<p><em><strong>更详细的转载事宜请参考：</strong></em><a href="https://spaces.ac.cn/archives/6508#%E6%96%87%E7%AB%A0%E5%A6%82%E4%BD%95%E8%BD%AC%E8%BD%BD/%E5%BC%95%E7%94%A8" title="《科学空间FAQ》">《科学空间FAQ》</a></p>
<p><strong>如果您还有什么疑惑或建议，欢迎在下方评论区继续讨论。</strong></p>
<p><strong>如果您觉得本文还不错，欢迎分享/打赏本文。打赏并非要从中获得收益，而是希望知道科学空间获得了多少读者的真心关注。当然，如果你无视它，也不会影响你的阅读。再次表示欢迎和感谢！</strong></p>
<p>打赏</p>
<p><img alt="科学空间" src="https://spaces.ac.cn/usr/themes/geekg/payment/wx.png" /></p>
<p>微信打赏</p>
<p><img alt="科学空间" src="https://spaces.ac.cn/usr/themes/geekg/payment/zfb.png" /></p>
<p>支付宝打赏</p>
<p>因为网站后台对打赏并无记录，因此欢迎在打赏时候备注留言。你还可以<a href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&amp;email=tN7d1drY3drrx8H0xcWa19vZ"><strong>点击这里</strong></a>或在下方评论区留言来告知你的建议或需求。</p>
<p><strong>如果您需要引用本文，请参考：</strong></p>
<p>苏剑林. (Apr. 30, 2025). 《一道概率不等式：盯着它到显然成立为止！ 》[Blog post]. Retrieved from <a href="https://spaces.ac.cn/archives/10902">https://spaces.ac.cn/archives/10902</a></p>
<p>@online{kexuefm-10902,<br />
title={一道概率不等式：盯着它到显然成立为止！},<br />
author={苏剑林},<br />
year={2025},<br />
month={Apr},<br />
url={\url{https://spaces.ac.cn/archives/10902}},<br />
} </p>
<hr />
<h2 id="_5">详细数学推导与扩展分析<a class="toc-link" href="#_5" title="Permanent link">&para;</a></h2>
<p>本节将对文中的概率不等式进行系统的数学推导,包括概率论基础、泰勒展开理论、多种证明方法及其应用。</p>
<h3 id="_6">一、概率基础与对数函数性质<a class="toc-link" href="#_6" title="Permanent link">&para;</a></h3>
<h4 id="11">1.1 对数函数的泰勒级数展开<a class="toc-link" href="#11" title="Permanent link">&para;</a></h4>
<p>对于 $p \in [0,1)$,函数 $\log\frac{1}{1-p}$ 的泰勒级数展开是本问题的核心。</p>
<p><strong>定理1.1</strong>(对数函数的幂级数展开): 对于 $|p| &lt; 1$,有
\begin{equation}
\log\frac{1}{1-p} = \sum_{i=1}^{\infty} \frac{p^i}{i} \tag{1}
\end{equation}</p>
<p><strong>证明</strong>: 从基本的几何级数出发。已知当 $|p| &lt; 1$ 时:
\begin{equation}
\frac{1}{1-p} = \sum_{i=0}^{\infty} p^i \tag{2}
\end{equation}</p>
<p>两边从0到$p$积分:
\begin{equation}
\int_0^p \frac{1}{1-t} dt = \int_0^p \sum_{i=0}^{\infty} t^i dt \tag{3}
\end{equation}</p>
<p>左边:
\begin{equation}
\int_0^p \frac{1}{1-t} dt = -\log(1-t)\Big|_0^p = -\log(1-p) + \log 1 = \log\frac{1}{1-p} \tag{4}
\end{equation}</p>
<p>右边(交换积分与求和,由逐项可积性保证):
\begin{equation}
\int_0^p \sum_{i=0}^{\infty} t^i dt = \sum_{i=0}^{\infty} \int_0^p t^i dt = \sum_{i=0}^{\infty} \frac{p^{i+1}}{i+1} = \sum_{i=1}^{\infty} \frac{p^i}{i} \tag{5}
\end{equation}</p>
<p>因此得证。$\square$</p>
<p><strong>数学直觉</strong>: 这个展开式表明 $\log\frac{1}{1-p}$ 可以看作是 $p, p^2/2, p^3/3, \ldots$ 的无穷和,系数递减但和发散(当$p\to 1^-$时)。</p>
<h4 id="12">1.2 对数函数的收敛性分析<a class="toc-link" href="#12" title="Permanent link">&para;</a></h4>
<p><strong>引理1.2</strong>(收敛半径): 级数 $\sum_{i=1}^{\infty} \frac{p^i}{i}$ 的收敛半径为1。</p>
<p><strong>证明</strong>: 使用比值判别法。设 $a_i = \frac{p^i}{i}$,则:
\begin{equation}
\left|\frac{a_{i+1}}{a_i}\right| = \left|\frac{p^{i+1}/(i+1)}{p^i/i}\right| = |p| \cdot \frac{i}{i+1} \to |p| \quad (i \to \infty) \tag{6}
\end{equation}</p>
<p>根据比值判别法:
- 当 $|p| &lt; 1$ 时,级数绝对收敛
- 当 $|p| &gt; 1$ 时,级数发散
- 当 $|p| = 1$ 时,需要进一步分析</p>
<p>对于 $p = 1$,级数变为调和级数 $\sum_{i=1}^{\infty} \frac{1}{i}$,发散。</p>
<p>对于 $p = -1$,级数变为 $\sum_{i=1}^{\infty} \frac{(-1)^i}{i}$,这是交错调和级数,条件收敛。$\square$</p>
<p><strong>实际意义</strong>: 在概率论中,$p \in [0,1)$ 确保了级数的绝对收敛性,这为后续分析提供了坚实基础。</p>
<h3 id="_7">二、指数函数的泰勒展开<a class="toc-link" href="#_7" title="Permanent link">&para;</a></h3>
<h4 id="21">2.1 指数函数的基本性质<a class="toc-link" href="#21" title="Permanent link">&para;</a></h4>
<p><strong>定理2.1</strong>(指数函数的泰勒级数): 对于所有 $x \in \mathbb{R}$:
\begin{equation}
e^x = \sum_{i=0}^{\infty} \frac{x^i}{i!} \tag{7}
\end{equation}</p>
<p><strong>证明</strong>: 这是指数函数在 $x=0$ 处的泰勒展开。由于 $\frac{d^n}{dx^n}e^x = e^x$ 对所有 $n$ 成立,在 $x=0$ 处有 $\frac{d^n}{dx^n}e^x\big|_{x=0} = 1$。</p>
<p>因此泰勒系数为:
\begin{equation}
a_n = \frac{1}{n!}\frac{d^n}{dx^n}e^x\Big|_{x=0} = \frac{1}{n!} \tag{8}
\end{equation}</p>
<p>余项分析表明对所有 $x$,余项 $R_n(x) \to 0$ 当 $n \to \infty$。$\square$</p>
<h4 id="22">2.2 截断指数级数的性质<a class="toc-link" href="#22" title="Permanent link">&para;</a></h4>
<p>定义截断的指数级数:
\begin{equation}
f_j(x) = \sum_{i=0}^{j} \frac{x^i}{i!} \tag{9}
\end{equation}</p>
<p><strong>引理2.2</strong>(截断误差估计): 对于 $x \geq 0$,有:
\begin{equation}
0 \leq e^x - f_j(x) = \sum_{i=j+1}^{\infty} \frac{x^i}{i!} \leq \frac{x^{j+1}}{(j+1)!} \cdot \frac{e^x}{1-x/(j+2)} \tag{10}
\end{equation}
(当 $x &lt; j+2$ 时)</p>
<p><strong>证明</strong>: 截断误差为:
\begin{equation}
e^x - f_j(x) = \sum_{i=j+1}^{\infty} \frac{x^i}{i!} \tag{11}
\end{equation}</p>
<p>提取第一项:
\begin{equation}
= \frac{x^{j+1}}{(j+1)!}\left(1 + \frac{x}{j+2} + \frac{x^2}{(j+2)(j+3)} + \cdots\right) \tag{12}
\end{equation}</p>
<p>放缩:
\begin{equation}
\leq \frac{x^{j+1}}{(j+1)!}\left(1 + \frac{x}{j+2} + \left(\frac{x}{j+2}\right)^2 + \cdots\right) = \frac{x^{j+1}}{(j+1)!} \cdot \frac{1}{1-x/(j+2)} \tag{13}
\end{equation}</p>
<p>同时注意到:
\begin{equation}
e^x = \sum_{i=0}^{\infty} \frac{x^i}{i!} \geq 1 \tag{14}
\end{equation}</p>
<p>因此得证。$\square$</p>
<h3 id="_8">三、原不等式的多种证明方法<a class="toc-link" href="#_8" title="Permanent link">&para;</a></h3>
<h4 id="31">3.1 直接泰勒展开法(证明方法一)<a class="toc-link" href="#31" title="Permanent link">&para;</a></h4>
<p><strong>目标</strong>: 证明对所有 $p \in [0,1)$ 和 $j \geq 0$:
\begin{equation}
\sum_{i=0}^j p^i \leq \sum_{i=0}^j \frac{\left(\log\frac{1}{1-p}\right)^i}{i!} \tag{15}
\end{equation}</p>
<p><strong>证明思路</strong>: 将右边展开为 $p$ 的幂级数,证明每一项系数都$\geq 1$(前$j+1$项)或$\geq 0$(后续项)。</p>
<p>设 $x = \log\frac{1}{1-p}$,根据式(1):
\begin{equation}
x = p + \frac{p^2}{2} + \frac{p^3}{3} + \cdots \tag{16}
\end{equation}</p>
<p>因此:
\begin{equation}
x = p(1 + p/2 + p^2/3 + \cdots) = p \cdot h(p) \tag{17}
\end{equation}</p>
<p>其中 $h(p) = 1 + p/2 + p^2/3 + \cdots &gt; 1$ 对 $p &gt; 0$。</p>
<p><strong>关键观察</strong>: 当将 $\sum_{i=0}^j \frac{x^i}{i!}$ 展开为 $p$ 的幂级数时:
\begin{equation}
\sum_{i=0}^j \frac{x^i}{i!} = \sum_{k=0}^{\infty} c_k p^k \tag{18}
\end{equation}</p>
<p>需要证明 $c_0=c_1=\cdots=c_j=1$,且 $c_k \geq 0$ 对所有 $k &gt; j$。</p>
<h4 id="32-">3.2 逆向思维法(证明方法二 - 文中采用)<a class="toc-link" href="#32-" title="Permanent link">&para;</a></h4>
<p>这是最简洁的证明。关键思想是:
\begin{equation}
\sum_{i=0}^j \frac{x^i}{i!} = \underbrace{e^x}<em i="j+1">{\text{完整和}} - \underbrace{\sum</em>
\end{equation}}^{\infty} \frac{x^i}{i!}}_{\text{误差项}} \tag{19</p>
<p>代入 $x = \log\frac{1}{1-p}$:
\begin{equation}
= \frac{1}{1-p} - \sum_{i=j+1}^{\infty} \frac{\left(\log\frac{1}{1-p}\right)^i}{i!} \tag{20}
\end{equation}</p>
<p>展开 $\frac{1}{1-p}$:
\begin{equation}
= \sum_{i=0}^{\infty} p^i - \sum_{i=j+1}^{\infty} \frac{\left(\log\frac{1}{1-p}\right)^i}{i!} \tag{21}
\end{equation}</p>
<p>\begin{equation}
= \sum_{i=0}^{j} p^i + \underbrace{\sum_{i=j+1}^{\infty} p^i - \sum_{i=j+1}^{\infty} \frac{\left(\log\frac{1}{1-p}\right)^i}{i!}}_{\text{高阶项之差}} \tag{22}
\end{equation}</p>
<p><strong>核心论证</strong>: 由于 $\log\frac{1}{1-p} \sim p$ 当 $p \to 0$,误差项 $\sum_{i=j+1}^{\infty} \frac{x^i}{i!}$ 从 $p^{j+1}$ 阶开始。</p>
<p>因此前 $j+1$ 项的系数确实都是1,而高阶项系数之差非负(因为几何级数增长比指数级数快)。$\square$</p>
<h4 id="33">3.3 概率论视角的证明(证明方法三)<a class="toc-link" href="#33" title="Permanent link">&para;</a></h4>
<p><strong>概率解释</strong>: 考虑Poisson分布和几何分布的关系。</p>
<p>设 $X \sim \text{Poisson}(\lambda)$,其中 $\lambda = \log\frac{1}{1-p}$。则:
\begin{equation}
P(X \leq j) = \sum_{i=0}^{j} \frac{e^{-\lambda}\lambda^i}{i!} = e^{-\lambda}\sum_{i=0}^{j} \frac{\lambda^i}{i!} \tag{23}
\end{equation}</p>
<p>设 $Y \sim \text{Geometric}(1-p)$,则:
\begin{equation}
P(Y \leq j) = \sum_{i=0}^{j} (1-p)p^i = (1-p)\frac{1-p^{j+1}}{1-p} = 1-p^{j+1} \tag{24}
\end{equation}</p>
<p>不等式(15)等价于(乘以 $e^{\lambda} = \frac{1}{1-p}$):
\begin{equation}
\sum_{i=0}^{j} p^i \cdot (1-p) \leq \sum_{i=0}^{j} \frac{\lambda^i}{i!} \tag{25}
\end{equation}</p>
<p>即:
\begin{equation}
(1-p^{j+1})(1-p) \leq \sum_{i=0}^{j} \frac{\lambda^i}{i!} \tag{26}
\end{equation}</p>
<p>这可以理解为几何分布和Poisson分布之间的概率不等式关系。</p>
<h3 id="_9">四、多项式逼近理论<a class="toc-link" href="#_9" title="Permanent link">&para;</a></h3>
<h4 id="41-stone-weierstrass">4.1 Stone-Weierstrass定理应用<a class="toc-link" href="#41-stone-weierstrass" title="Permanent link">&para;</a></h4>
<p><strong>定理4.1</strong>(Weierstrass逼近定理): 在闭区间 $[a,b]$ 上的任何连续函数都可以用多项式一致逼近。</p>
<p>对于函数 $g(p) = \sum_{i=0}^{j} p^i$ 和 $h(p) = \sum_{i=0}^{j} \frac{(\log\frac{1}{1-p})^i}{i!}$,它们在 $[0, 1-\epsilon]$ 上都是连续的。</p>
<p><strong>逼近误差分析</strong>: 定义逼近误差为:
\begin{equation}
E_j(p) = \sum_{i=0}^{j} \frac{(\log\frac{1}{1-p})^i}{i!} - \sum_{i=0}^{j} p^i \tag{27}
\end{equation}</p>
<p><strong>引理4.2</strong>(误差的渐近行为): 当 $p \to 0$ 时:
\begin{equation}
E_j(p) = O(p^{j+2}) \tag{28}
\end{equation}</p>
<p><strong>证明</strong>: 展开到 $p^{j+2}$ 阶:
\begin{equation}
\log\frac{1}{1-p} = p + \frac{p^2}{2} + O(p^3) \tag{29}
\end{equation}</p>
<p>因此:
\begin{equation}
\left(\log\frac{1}{1-p}\right)^2 = p^2 + p^3 + O(p^4) \tag{30}
\end{equation}</p>
<p>逐项分析可得结论。$\square$</p>
<h4 id="42-pade">4.2 Padé逼近与有理逼近<a class="toc-link" href="#42-pade" title="Permanent link">&para;</a></h4>
<p>Padé逼近提供了另一种理解框架。</p>
<p><strong>定义4.3</strong>(Padé逼近): 函数 $f(x)$ 的$[m/n]$ Padé逼近是有理函数 $R_{m,n}(x) = \frac{P_m(x)}{Q_n(x)}$,使得:
\begin{equation}
f(x) - R_{m,n}(x) = O(x^{m+n+1}) \tag{31}
\end{equation}</p>
<p>对于 $\frac{1}{1-p}$,其$[0/1]$ Padé逼近为:
\begin{equation}
\frac{1}{1-p} \approx \frac{1}{1-p} \tag{32}
\end{equation}
(完全精确)</p>
<p>而对于 $e^x$,其$[j/0]$ Padé逼近为:
\begin{equation}
e^x \approx \sum_{i=0}^{j} \frac{x^i}{i!} \tag{33}
\end{equation}</p>
<p>这正是我们的截断级数!</p>
<h3 id="_10">五、数值稳定性分析<a class="toc-link" href="#_10" title="Permanent link">&para;</a></h3>
<h4 id="51">5.1 直接计算的数值问题<a class="toc-link" href="#51" title="Permanent link">&para;</a></h4>
<p>在计算 $\sum_{i=0}^{j} \frac{(\log\frac{1}{1-p})^i}{i!}$ 时,可能遇到的数值问题:</p>
<p><strong>问题1</strong>: 当 $p \to 1^-$ 时,$\log\frac{1}{1-p} \to +\infty$,可能导致溢出。</p>
<p><strong>问题2</strong>: 当 $p$ 很小时,$\log\frac{1}{1-p} \approx p$,但直接计算 $\log(1-p)$ 会损失精度。</p>
<p><strong>解决方案</strong>:</p>
<p><strong>技巧5.1</strong>(log1p函数): 使用特殊函数 <code>log1p(x) = log(1+x)</code>,它对小的 $|x|$ 优化了精度:
\begin{equation}
\log\frac{1}{1-p} = -\log(1-p) = -\text{log1p}(-p) \tag{34}
\end{equation}</p>
<p><strong>技巧5.2</strong>(Horner法则): 计算多项式 $\sum_{i=0}^{j} \frac{x^i}{i!}$ 时,使用Horner法则:
\begin{equation}
f_j(x) = 1 + x\left(\frac{1}{1!} + x\left(\frac{1}{2!} + \cdots + x\frac{1}{j!}\right)\right) \tag{35}
\end{equation}</p>
<p>这减少了乘法次数并提高了数值稳定性。</p>
<h4 id="52">5.2 误差传播分析<a class="toc-link" href="#52" title="Permanent link">&para;</a></h4>
<p>设计算 $p$ 时有误差 $\delta p$,则误差传播到 $f_j(\log\frac{1}{1-p})$ 的程度为:
\begin{equation}
\delta f_j \approx \frac{\partial f_j}{\partial p} \delta p \tag{36}
\end{equation}</p>
<p>其中:
\begin{equation}
\frac{\partial f_j}{\partial p} = \sum_{i=1}^{j} \frac{i}{i!}\left(\log\frac{1}{1-p}\right)^{i-1} \cdot \frac{1}{1-p} \tag{37}
\end{equation}</p>
<p><strong>引理5.3</strong>(误差放大系数): 误差放大系数:
\begin{equation}
\left|\frac{\partial f_j}{\partial p}\right| \leq \frac{j}{1-p} \cdot e^{\log\frac{1}{1-p}} = \frac{j}{(1-p)^2} \tag{38}
\end{equation}</p>
<p>当 $p \to 1^-$ 时,误差放大严重!</p>
<h3 id="_11">六、概率生成函数理论<a class="toc-link" href="#_11" title="Permanent link">&para;</a></h3>
<h4 id="61">6.1 概率生成函数的定义<a class="toc-link" href="#61" title="Permanent link">&para;</a></h4>
<p>对于非负整数值随机变量 $X$,其概率生成函数(PGF)定义为:
\begin{equation}
G_X(s) = E[s^X] = \sum_{k=0}^{\infty} P(X=k) s^k \tag{39}
\end{equation}</p>
<p><strong>定理6.1</strong>(几何分布的PGF): 若 $X \sim \text{Geometric}(1-p)$,则:
\begin{equation}
G_X(s) = \frac{1-p}{1-ps} \tag{40}
\end{equation}</p>
<p><strong>证明</strong>:
\begin{equation}
G_X(s) = \sum_{k=0}^{\infty} (1-p)p^k s^k = (1-p)\sum_{k=0}^{\infty} (ps)^k = \frac{1-p}{1-ps} \tag{41}
\end{equation}
$\square$</p>
<h4 id="62">6.2 截断分布的生成函数<a class="toc-link" href="#62" title="Permanent link">&para;</a></h4>
<p>对于截断到 $j$ 的几何分布:
\begin{equation}
G_j(s) = \sum_{k=0}^{j} (1-p)p^k s^k = (1-p)\frac{1-(ps)^{j+1}}{1-ps} \tag{42}
\end{equation}</p>
<p>在 $s=1$ 处:
\begin{equation}
G_j(1) = (1-p)\frac{1-p^{j+1}}{1-p} = 1-p^{j+1} \tag{43}
\end{equation}</p>
<p>这正是截断几何分布的总概率(未归一化)。</p>
<h4 id="63">6.3 矩母函数与特征函数<a class="toc-link" href="#63" title="Permanent link">&para;</a></h4>
<p><strong>定义6.2</strong>(矩母函数): 随机变量 $X$ 的矩母函数为:
\begin{equation}
M_X(t) = E[e^{tX}] \tag{44}
\end{equation}</p>
<p>对于几何分布 $X \sim \text{Geometric}(1-p)$:
\begin{equation}
M_X(t) = \sum_{k=0}^{\infty} (1-p)p^k e^{tk} = \frac{1-p}{1-pe^t} \tag{45}
\end{equation}</p>
<p><strong>联系</strong>: 令 $t = \log s$,则 $M_X(t) = G_X(e^t)$。</p>
<h3 id="_12">七、渐近分析与大偏差理论<a class="toc-link" href="#_12" title="Permanent link">&para;</a></h3>
<h4 id="71-laplace">7.1 Laplace方法<a class="toc-link" href="#71-laplace" title="Permanent link">&para;</a></h4>
<p>当 $j$ 很大时,可以用Laplace方法分析积分:
\begin{equation}
\int_a^b e^{jf(x)} g(x) dx \approx \sqrt{\frac{2\pi}{j|f''(x_0)|}} e^{jf(x_0)} g(x_0) \tag{46}
\end{equation}</p>
<p>其中 $x_0$ 是 $f(x)$ 的最大值点。</p>
<h4 id="72-stirling">7.2 Stirling公式应用<a class="toc-link" href="#72-stirling" title="Permanent link">&para;</a></h4>
<p><strong>引理7.1</strong>(Stirling公式): 当 $n \to \infty$ 时:
\begin{equation}
n! \sim \sqrt{2\pi n}\left(\frac{n}{e}\right)^n \tag{47}
\end{equation}</p>
<p>因此:
\begin{equation}
\frac{x^n}{n!} \sim \frac{x^n}{\sqrt{2\pi n}(n/e)^n} = \frac{1}{\sqrt{2\pi n}}\left(\frac{ex}{n}\right)^n \tag{48}
\end{equation}</p>
<p>这对分析 $f_j(x)$ 的渐近行为很有用。</p>
<h3 id="_13">八、实际应用案例<a class="toc-link" href="#_13" title="Permanent link">&para;</a></h3>
<h4 id="81-hash">8.1 Hash算法分析<a class="toc-link" href="#81-hash" title="Permanent link">&para;</a></h4>
<p>在Hash算法中,文中的不等式可以用来分析碰撞概率。</p>
<p><strong>场景</strong>: 有 $n$ 个槽位,进行 $k$ 次独立的hash操作,每次hash到某个槽位的概率为 $1/n$。</p>
<p>某个槽位被hash到至少一次的概率约为:
\begin{equation}
1 - \left(1-\frac{1}{n}\right)^k \approx 1 - e^{-k/n} \tag{49}
\end{equation}</p>
<p>当 $k \ll n$ 时,使用不等式(15)可以得到更精确的界。</p>
<h4 id="82">8.2 优惠券收集问题<a class="toc-link" href="#82" title="Permanent link">&para;</a></h4>
<p><strong>问题</strong>: 有 $n$ 种优惠券,每次随机获得一种,需要多少次才能收集全部?</p>
<p>这涉及到几何分布的和,文中不等式提供了理论界。</p>
<h4 id="83">8.3 随机算法复杂度分析<a class="toc-link" href="#83" title="Permanent link">&para;</a></h4>
<p>许多随机算法的期望运行时间涉及几何级数和,文中不等式可以用于:
- 证明算法的期望复杂度上界
- 分析worst-case与average-case的差距
- 设计概率性能保证</p>
<h3 id="_14">九、进一步推广<a class="toc-link" href="#_14" title="Permanent link">&para;</a></h3>
<h4 id="91">9.1 推广到其他分布<a class="toc-link" href="#91" title="Permanent link">&para;</a></h4>
<p>不等式可以推广到形式:
\begin{equation}
\sum_{i=0}^{j} a^i \leq \sum_{i=0}^{j} \frac{(\log\frac{1}{1-a})^i}{i!} \tag{50}
\end{equation}</p>
<p>对所有 $a \in [0,1)$ 成立。</p>
<h4 id="92">9.2 多元推广<a class="toc-link" href="#92" title="Permanent link">&para;</a></h4>
<p>考虑多元情形:
\begin{equation}
\sum_{i_1+\cdots+i_k \leq j} p_1^{i_1}\cdots p_k^{i_k} \stackrel{?}{\leq} \sum_{i_1+\cdots+i_k \leq j} \frac{\left(\sum_{\ell} \log\frac{1}{1-p_\ell}\right)^{i_1+\cdots+i_k}}{(i_1+\cdots+i_k)!} \tag{51}
\end{equation}</p>
<p>这需要更深入的组合学分析。</p>
<h3 id="_15">十、总结与展望<a class="toc-link" href="#_15" title="Permanent link">&para;</a></h3>
<p>本文从一个看似简单的概率不等式出发,深入探讨了:</p>
<ol>
<li><strong>对数函数与指数函数的泰勒展开</strong>及其收敛性</li>
<li><strong>三种不同的证明方法</strong>:直接展开法、逆向思维法、概率论方法</li>
<li><strong>数值计算的稳定性</strong>问题和解决方案</li>
<li><strong>概率生成函数理论</strong>的应用</li>
<li><strong>实际应用</strong>场景</li>
</ol>
<p><strong>核心洞察</strong>: 表面上的"显然"往往蕴含着深刻的数学结构。这个不等式联系了:
- 几何级数(离散)与指数函数(连续)
- 代数不等式与概率论
- 局部展开与全局性质</p>
<p><strong>未来方向</strong>:
1. 寻找更紧的上界和下界
2. 推广到更一般的函数类
3. 探索在机器学习中的应用(如正则化理论)</p>
                </div>

                <!-- Previous/Next Navigation -->
                <nav class="post-navigation" aria-label="文章导航">
                    <div class="row g-3">
                        <div class="col-6">
                            
                            <a href="svd的导数.html" class="nav-link-prev">
                                <div class="nav-direction"><i class="fas fa-chevron-left"></i> 上一篇</div>
                                <div class="nav-title">#318 SVD的导数</div>
                            </a>
                            
                        </div>
                        <div class="col-6">
                            
                            <a href="transformer升级之路20mla好在哪里上.html" class="nav-link-next">
                                <div class="nav-direction">下一篇 <i class="fas fa-chevron-right"></i></div>
                                <div class="nav-title">#320 Transformer升级之路：20、MLA好在哪里?（上）</div>
                            </a>
                            
                        </div>
                    </div>
                </nav>

                <!-- Back to Home -->
                <div class="text-center mt-4 mb-4">
                    <a href="../index.html" class="btn btn-outline-primary">
                        <i class="fas fa-arrow-left"></i> 返回首页
                    </a>
                </div>
            </div>

            <!-- Sidebar (TOC) -->
            <div class="col-lg-3">
                <aside class="sidebar">
                    
                    <div class="toc-sidebar">
                        <h5 class="toc-title"><i class="fas fa-list"></i> 目录</h5>
                        <div class="toc-content">
                            <div class="toc">
<ul>
<li><a href="#_1">一道概率不等式：盯着它到显然成立为止！</a><ul>
<li><a href="#_2">初步尝试</a></li>
<li><a href="#_3">泰勒硬刚</a></li>
<li><a href="#_4">显然易得</a></li>
<li><a href="#_5">详细数学推导与扩展分析</a><ul>
<li><a href="#_6">一、概率基础与对数函数性质</a></li>
<li><a href="#_7">二、指数函数的泰勒展开</a></li>
<li><a href="#_8">三、原不等式的多种证明方法</a></li>
<li><a href="#_9">四、多项式逼近理论</a></li>
<li><a href="#_10">五、数值稳定性分析</a></li>
<li><a href="#_11">六、概率生成函数理论</a></li>
<li><a href="#_12">七、渐近分析与大偏差理论</a></li>
<li><a href="#_13">八、实际应用案例</a></li>
<li><a href="#_14">九、进一步推广</a></li>
<li><a href="#_15">十、总结与展望</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>

                        </div>
                        <div class="toc-actions">
                            <button class="btn btn-sm btn-outline-secondary" onclick="expandAll()">
                                <i class="fas fa-expand"></i> 全部展开
                            </button>
                            <button class="btn btn-sm btn-outline-secondary" onclick="collapseAll()">
                                <i class="fas fa-compress"></i> 全部折叠
                            </button>
                        </div>
                    </div>
                    

                    <!-- Back to Top Button -->
                    <button id="backToTop" class="back-to-top" title="回到顶部">
                        <i class="fas fa-arrow-up"></i>
                    </button>
                </aside>
            </div>
        </div>
    </article>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>
                博客来源: <a href="https://spaces.ac.cn" target="_blank">科学空间</a> |
                内容经过整理并添加详细数学推导
            </p>
            <p>
                Powered by <a href="https://pages.github.com/" target="_blank">GitHub Pages</a>
            </p>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Syntax highlighting -->
    <script>hljs.highlightAll();</script>

    <!-- Back to top functionality -->
    <script>
        // Show/hide back to top button based on scroll position
        window.addEventListener('scroll', function() {
            const backToTop = document.getElementById('backToTop');
            if (window.pageYOffset > 300) {
                backToTop.classList.add('show');
            } else {
                backToTop.classList.remove('show');
            }
        });

        // Smooth scroll to top
        document.getElementById('backToTop').addEventListener('click', function() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });

        // Sticky TOC sidebar
        window.addEventListener('scroll', function() {
            const sidebar = document.querySelector('.sidebar');
            if (!sidebar) return;

            const sidebarTop = sidebar.offsetTop;
            const scrollTop = window.pageYOffset;

            if (scrollTop > sidebarTop - 20) {
                sidebar.classList.add('sticky');
            } else {
                sidebar.classList.remove('sticky');
            }
        });
    </script>
</body>
</html>