<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>智能家居之热水器零冷水技术原理浅析 | ML & Math Blog Posts</title>
    <meta name="description" content="智能家居之热水器零冷水技术原理浅析&para;
原文链接: https://spaces.ac.cn/archives/9405
发布日期: 

如果家庭使用单一的热水器集中供热水，那么当我们想要用热水时，往往需要先放一段时间的冷水，而如果放冷水时间比较长的话，就会比较影响体验。所谓零冷水，实际上就是想办法提前把热水管中的冷水排放掉，以达到（几乎）瞬间出热水的效果。事实上，零冷水并不是什么高大上的...">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css">

    <!-- Google Fonts -->
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="../assets/css/main.css">
    <link rel="stylesheet" href="../assets/css/post.css">

    <!-- Custom JS -->
    <script src="../assets/js/collapsible.js" defer></script>

    <!-- MathJax for math rendering with equation numbering -->
    <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        displayMath: [['$$', '$$'], ['\\[', '\\]']],
        processEscapes: true,
        processEnvironments: true,
        tags: 'ams',  // Enable equation numbering with AMS style
        tagSide: 'right',  // Place equation numbers on the right
        tagIndent: '0.8em',  // Indentation for equation numbers
        multlineWidth: '85%'
      },
      options: {
        skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre']
      }
    };
    </script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <!-- Syntax highlighting -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.7.0/build/styles/github.min.css">
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.7.0/build/highlight.min.js"></script>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light border-bottom">
        <div class="container">
            <a class="navbar-brand" href="../index.html">
                <i class="fas fa-brain"></i> ML & Math Blog
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="../index.html"><i class="fas fa-home"></i> 首页</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Post Content -->
    <article class="container post-container my-5">
        <!-- Breadcrumb Navigation -->
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="../index.html"><i class="fas fa-home"></i> 首页</a></li>
                
                <li class="breadcrumb-item"><a href="../index.html?tags=智能家居">智能家居</a></li>
                
                <li class="breadcrumb-item active" aria-current="page">
                    #58 智能家居之热水器零冷水技术原理浅析
                </li>
            </ol>
        </nav>

        <!-- Post Header -->
        <header class="post-header mb-4">
            <h1 class="post-title">
                <span class="post-number">#58</span>
                智能家居之热水器零冷水技术原理浅析
            </h1>
            <div class="post-meta">
                <span><i class="far fa-calendar"></i> </span>
                
                <span class="ms-3">
                    <i class="fas fa-link"></i>
                    <a href="https://spaces.ac.cn/archives/9405" target="_blank" rel="noopener">原文链接</a>
                </span>
                
            </div>
            
            <div class="post-tags mt-3">
                
                <a href="../index.html?tags=智能家居" class="tag-link">
                    <span class="tag"><i class="fas fa-tag"></i> 智能家居</span>
                </a>
                
                <a href="../index.html?tags=生成模型" class="tag-link">
                    <span class="tag"><i class="fas fa-tag"></i> 生成模型</span>
                </a>
                
                <a href="../index.html?tags=attention" class="tag-link">
                    <span class="tag"><i class="fas fa-tag"></i> attention</span>
                </a>
                
                <a href="../index.html?tags=优化" class="tag-link">
                    <span class="tag"><i class="fas fa-tag"></i> 优化</span>
                </a>
                
                <a href="../index.html?tags=语言模型" class="tag-link">
                    <span class="tag"><i class="fas fa-tag"></i> 语言模型</span>
                </a>
                
            </div>
            
        </header>

        <div class="row">
            <!-- Main Content -->
            <div class="col-lg-9">
                <!-- Post Body -->
                <div class="post-content">
                    <h1 id="_1">智能家居之热水器零冷水技术原理浅析<a class="toc-link" href="#_1" title="Permanent link">&para;</a></h1>
<p><strong>原文链接</strong>: <a href="https://spaces.ac.cn/archives/9405">https://spaces.ac.cn/archives/9405</a></p>
<p><strong>发布日期</strong>: </p>
<hr />
<p>如果家庭使用单一的热水器集中供热水，那么当我们想要用热水时，往往需要先放一段时间的冷水，而如果放冷水时间比较长的话，就会比较影响体验。所谓零冷水，实际上就是想办法提前把热水管中的冷水排放掉，以达到（几乎）瞬间出热水的效果。事实上，零冷水并不是什么高大上的技术，但可能由于观念没跟上、理解上有误等原因，零冷水技术还没有在家庭中得到普及，不过随着大家对生活品质的要求越来越高，零冷水确实在慢慢流行起来了。</p>
<p>本文来简单分析一下零冷水技术的实现原理，包括各种方案的优缺点和自省DIY的参考思路。</p>
<h2 id="_2">写在前面<a class="toc-link" href="#_2" title="Permanent link">&para;</a></h2>
<p>在文章开始，需要纠正很多人的一个错误观念：零冷水不是为了省钱，而是为了提升生活品质。如果你是省钱最大的心态，那么接下来的内容就可以不用看了，零冷水技术对你毫无价值。</p>
<p>（多数）零冷水技术确实可以省水，但是省水不意味着省钱，零冷水的额外投入通常远大于省下来的水费。这个简单算一笔账就知道了，假设每次洗澡需要放一分钟冷水，我测了测，我家的热水管水压每分钟出水8升，再假设一家四口人，那么一天放掉32升水，按3块钱一吨来算，每天的水费是0.096元，一年大约35元。目前能买到的零冷水配件，最低配的要700元左右一套，同一牌子、同一配置的非零冷水热水器和零冷水热水器差价大概也要是这个水平甚至更多。这样一来，零冷水的额外投入足够用水700/35=20年了，这还没算零冷水带来的额外能源（燃气或电）的支出，因此通过省水来省钱并不现实。</p>
<p>所以，零冷水技术并不省钱，你可以说是为了节约水资源，也可以说是为了改善生活体验，主要是减少我们在洗澡前等待热水到来的时间，尤其是寒冷的冬天，瑟瑟发抖地等待一两分钟才有热水，容易感冒不说，终究是不大舒服，而且浪费时间。</p>
<h2 id="_3">技术分析<a class="toc-link" href="#_3" title="Permanent link">&para;</a></h2>
<p>简单起见，我们先简化问题，假设家里只有一个热水用水点，那么其水路可以简化为下图：  </p>
<p><a href="/usr/uploads/2023/01/4141530522.png" title="点击查看原图"><img alt="家庭水路简化示意图（假设只有一个用水点）" src="/usr/uploads/2023/01/4141530522.png" /></a></p>
<p>家庭水路简化示意图（假设只有一个用水点）</p>
<p>而长时间没有用热水后，热水管的水基本都冷却为冷水了，如下图：  </p>
<p><a href="/usr/uploads/2023/01/58355206.png" title="点击查看原图"><img alt="热水管的水变冷了" src="/usr/uploads/2023/01/58355206.png" /></a></p>
<p>热水管的水变冷了</p>
<p>文章开始就说了，零冷水就是想办法提前把热水管中的冷水排放掉。那么首先要解决的问题是：排放到哪里？答案主要有三个，下面逐一分析。</p>
<h3 id="_4">回水管<a class="toc-link" href="#_4" title="Permanent link">&para;</a></h3>
<p>如下图，回水管实际上就是将热水管“复制粘贴”一份，然后在用水点将它连接起来。如果是买现成的零冷水热水器，那么通常都会自带回水管接口，将热水管、冷水管、回水管分别接到相应的接口即可，热水管和回水管构成一个小循环，可以把热水管的冷水回收回去。  </p>
<p><a href="/usr/uploads/2023/01/786458335.png" title="点击查看原图"><img alt="加一条回水管，可以理解为热水管的复制或延长" src="/usr/uploads/2023/01/786458335.png" /></a></p>
<p>加一条回水管，可以理解为热水管的复制或延长</p>
<p>如果在已有的非零冷水热水器上DIY，那么就没有回水管接口了，我们可以将热水器端的回水管和冷水管连接起来，然后水是不会平白无故地循环流动的，所以我们需要一个增压泵（也叫循环泵、回水泵）来推动它，这个增压泵可以装在热水管的起点或者回水管的终点：  </p>
<p><a href="/usr/uploads/2023/01/209806523.png" title="点击查看原图"><img alt="增压泵可以安装在热水管的起点" src="/usr/uploads/2023/01/209806523.png" /></a></p>
<p>增压泵可以安装在热水管的起点</p>
<p><a href="/usr/uploads/2023/01/66020767.png" title="点击查看原图"><img alt="也可以安装在回水管的终点" src="/usr/uploads/2023/01/66020767.png" /></a></p>
<p>也可以安装在回水管的终点</p>
<p>实际上零冷水热水器主要就是把增压泵内置了而已。这样一来，只要增压泵启动，那么就可以推动热水管的冷水往回水管流去，形成水循环，最终整根热水管和冷水管都会是热水：  </p>
<p><a href="/usr/uploads/2023/01/2300256085.png" title="点击查看原图"><img alt="热水循环时，会加热整条回水管，存在一定的浪费" src="/usr/uploads/2023/01/2300256085.png" /></a></p>
<p>热水循环时，会加热整条回水管，存在一定的浪费</p>
<p>很显然，回水管那段热水，其实是没有作用的。虽说我们强调零冷水是为了改善体验而不是省钱，但如果在不影响体验的前提下能省一点燃气/电，那么也是好的。这里可以改进的地方，就是想办法只加热热水管的水，不加热回水管的水，一个朴素的方法就是增压泵加个定时，预先设定刚好加热完整根热水管的时长，但这个时长不好把控。更智能的方法是在热水管和回水管连接处加一个温控单向阀（流动方向是梯形的长边流到短边，温度到达某个设定值就闭阀）：  </p>
<p><a href="/usr/uploads/2023/01/2275716790.png" title="点击查看原图"><img alt="加个温控单向阀，可以避免回水管被加热" src="/usr/uploads/2023/01/2275716790.png" /></a></p>
<p>加个温控单向阀，可以避免回水管被加热</p>
<p>最后，为了防止回水管的水窜到冷水管（可能会引起部分冷水管变热，以及有用冷水也启动热水器的可能性），还可以在回水管跟冷水管的连接处再加一个单向阀（这个不用温控）：  </p>
<p><a href="/usr/uploads/2023/01/1074809949.png" title="点击查看原图"><img alt="再加个单向阀就完美了" src="/usr/uploads/2023/01/1074809949.png" /></a></p>
<p>再加个单向阀就完美了</p>
<p>至此，单一用水点的情况分析完了。回到现实生活中，家里一般有多个热水用水点，我们可以布成如下几种水路结构，以保证每个用水点都尽快出热水（省去了循环泵、单向阀，仅画出了基本的水路图）：  </p>
<p><a href="/usr/uploads/2023/01/3543531932.png" title="点击查看原图"><img alt="主线形的管道布局，俗称“小循环”" src="/usr/uploads/2023/01/3543531932.png" /></a></p>
<p>主线形的管道布局，俗称“小循环”</p>
<p><a href="/usr/uploads/2023/01/2225532930.png" title="点击查看原图"><img alt="最理想化的管道布局，俗称“大循环”" src="/usr/uploads/2023/01/2225532930.png" /></a></p>
<p>最理想化的管道布局，俗称“大循环”</p>
<p><a href="/usr/uploads/2023/01/769956707.png" title="点击查看原图"><img alt="跟“大循环”效果类似的管道布局" src="/usr/uploads/2023/01/769956707.png" /></a></p>
<p>跟“大循环”效果类似的管道布局</p>
<h3 id="_5">冷水管<a class="toc-link" href="#_5" title="Permanent link">&para;</a></h3>
<p>如果家里装修没有事先铺设回水管，那么上述方案就与你无缘了。此时一个很机智的想法是“排放到冷水管”中，通过一个单向阀连通出水口处的冷、热水管：  </p>
<p><a href="/usr/uploads/2023/01/1202746642.png" title="点击查看原图"><img alt="加单向阀让冷水管变回水管" src="/usr/uploads/2023/01/1202746642.png" /></a></p>
<p>加单向阀让冷水管变回水管</p>
<p>市面上多数号称可以无回水管使用的零冷水热水器，都是这个方案，确实可以凑合着用，但是会带来两个问题。首先，单向阀允许热水管的水流到冷水管，这意味着如果使用冷水，也有可能启动热水器放出热水，比如很多人诟病的无回水管零冷水会出现热水冲马桶现象。当然，如果只是这个问题，那么顶多浪费一点燃气/电，不算太严重，更严重的问题是热水循环过程中，可能会导致整条冷水管变热：  </p>
<p><a href="/usr/uploads/2023/01/4228399333.png" title="点击查看原图"><img alt="可能会导致整条冷水管变热" src="/usr/uploads/2023/01/4228399333.png" /></a></p>
<p>可能会导致整条冷水管变热</p>
<p>这就不单单是浪费燃气/电的问题了，因为有些用水点可能对温度特别敏感，比如RO反渗透净水器的最佳工作温度是38度左右，超出这个温度可能会导致不可逆的损坏，而热水循环的温度一般都40度以上。为了解决这个问题，升级版的方案是将单向阀换成温控单向阀：  </p>
<p><a href="/usr/uploads/2023/01/3073588008.png" title="点击查看原图"><img alt="将单向阀换成温控单向阀，可以避免冷水管变热" src="/usr/uploads/2023/01/3073588008.png" /></a></p>
<p>将单向阀换成温控单向阀，可以避免冷水管变热</p>
<p>温控单向阀保证了冷水管的温度不超过设定值，相比于纯粹单向阀，体验确实会有大提升，近来一些新的或者比较贵的零冷水热水器，都已经采用了这个方案。然而，这个方案理论上只能解决冷水管变热水的问题，但是无法解决放冷水也可能会启动热水器等问题。要彻底解决这两个问题，温控单向阀应该要换成具备如下特性的“温控常闭电磁阀”：</p>
<blockquote>
<p>1、默认状态下，阀门是关闭的，这样冷、热水管相当于断开，用冷水时就不会启动热水器；</p>
<p>2、当温度超过设定值时，阀门是关闭的，这样保证冷水管温度不会超过设定值；</p>
<p>3、当温度没超过设定值，且增压泵开启时，阀门开启，推动热水管的冷水流到冷水管。</p>
</blockquote>
<p>不难想象，这样的方案还要求“温控常闭电磁阀”跟增压泵有（无线）联动：  </p>
<p><a href="/usr/uploads/2023/01/1533212550.png" title="点击查看原图"><img alt="温控单向阀换成能跟增压泵联动的温控常闭电磁阀是最理想的" src="/usr/uploads/2023/01/1533212550.png" /></a></p>
<p>温控单向阀换成能跟增压泵联动的温控常闭电磁阀是最理想的</p>
<p>更进一步，我们还可以增加一个外部的遥控器，跟“温控常闭电磁阀”进行无线联动，以便可以手动按需启动零冷水：  </p>
<p><a href="/usr/uploads/2023/01/2265626088.png" title="点击查看原图"><img alt="再补充个遥控器就更好了" src="/usr/uploads/2023/01/2265626088.png" /></a></p>
<p>再补充个遥控器就更好了</p>
<p>目前市面上，笔者仅仅调查到一个名为“爱喜易”的牌子推出的零冷水DIY配件，是使用这个方案的。</p>
<p>如果是自己DIY，那么这个方案最大的困难是什么呢？是“电”！前面说的“单向阀”、“温控单向阀”，都有不用电的实现，但是“温控常闭电磁阀”，还要跟增压泵无线联动，那么就必须要用电了。而这个东西一般要安装在哪里呢？通常是洗漱台下方，或者内置在花洒中，这些地方通常是没有预留插座的，所以必须要用电池供电。而“温控常闭电磁阀”，既要跟增压泵联动，又要跟遥控器联动，它必须要作为无线联动的接收端，接收端是比较耗电的，一般电池撑不了多久，需要想办法降低耗电量，这有些难度，但也有现成可参考的方案，就不展开了。</p>
<p>如果有多个用水点，那么比较完美的方案就是每个用热水点都配上这样一个“温控常闭电磁阀”，这样就可以实现“点到点”的零冷水，是最省燃气/电的方案，但这样硬件成本也最大；如果想要节省成本，那么就是只在最远端的用热水点装一个“温控常闭电磁阀”（或温控单向阀），它的问题就是对于最近的用热水点，也要加热整条热水管。对于热水花洒，直接在花洒处加装个配件显然是太丑了，幸好浴室基本都配有相应的有热水的洗漱台，所以一般都加装在洗漱台下方，凑合着用，或者安装内置了相应配件的花洒了。</p>
<h3 id="_6">下水道<a class="toc-link" href="#_6" title="Permanent link">&para;</a></h3>
<p>其实，没有回水管的情况下，最简单的方案应该是直接将冷水排放到下水道中，跟人手动放水一个原理：  </p>
<p><a href="/usr/uploads/2023/01/3827725583.png" title="点击查看原图"><img alt="排放到下水道，也是可以考虑的解决方案" src="/usr/uploads/2023/01/3827725583.png" /></a></p>
<p>排放到下水道，也是可以考虑的解决方案</p>
<p>相比于排放到冷水管中，它的最大特点是省去了增压泵，并且冷热水彻底隔离了，唯一的缺点是不省水。我们可以算一下成本上值不值得。就以上面的“爱喜易”零冷水配件为例，增压泵单卖大概350元左右（市面上有比这更贵、也有比这更便宜的增压泵，但是考虑加上联动，估计大差不差），按照一开始的估算，这个钱足够我们“浪费”十年甚至更多的水的，而且对于爱折腾的你来说，十年还不更新方案吗？</p>
<p>所以，抛开“环保”、“节约水资源”的理念不说，直接排放到下水道应该是成本上最低的、而且最容易DIY的方案了（少了跟增压泵的联动）。当然，如果读者是坚定的环保支持者，那么就只能考虑前两种方案了。</p>
<h2 id="_7">文章小结<a class="toc-link" href="#_7" title="Permanent link">&para;</a></h2>
<p>本文介绍了实现热水器零冷水的原理，以及相应的几种DIY方案的分析和对比，供有需要的读者参考。</p>
<p>总的来说，零冷水的目的是提升生活品质，不是为了省钱。实现上，有无回水管都可以实现零冷水，个人觉得在最后的“温控常闭电磁阀”方案中，无回水管的体验也不逊色于有回水管的水路，因此个人认为零冷水可以放心入（如果是买现成的零冷水热水器，那么至少单向阀要换成温控单向阀）。最后，有用户提到的更费燃气/电的问题，零冷水确实会比无零冷水更多费一些燃气/电，但如果多出太多，通常是使用不当导致，比如24小时都开启零冷水，那自然是费气费电的。这就好比你人不在家但又24小时都开着空调，到头来说空调太费电又没用，天底下没有这样的道理吧？</p>
<p><em><strong>转载到请包括本文地址：</strong><a href="https://spaces.ac.cn/archives/9405">https://spaces.ac.cn/archives/9405</a></em></p>
<p><em><strong>更详细的转载事宜请参考：</strong></em><a href="https://spaces.ac.cn/archives/6508#%E6%96%87%E7%AB%A0%E5%A6%82%E4%BD%95%E8%BD%AC%E8%BD%BD/%E5%BC%95%E7%94%A8" title="《科学空间FAQ》">《科学空间FAQ》</a></p>
<p><strong>如果您还有什么疑惑或建议，欢迎在下方评论区继续讨论。</strong></p>
<p><strong>如果您觉得本文还不错，欢迎分享/打赏本文。打赏并非要从中获得收益，而是希望知道科学空间获得了多少读者的真心关注。当然，如果你无视它，也不会影响你的阅读。再次表示欢迎和感谢！</strong></p>
<p>打赏</p>
<p><img alt="科学空间" src="https://spaces.ac.cn/usr/themes/geekg/payment/wx.png" /></p>
<p>微信打赏</p>
<p><img alt="科学空间" src="https://spaces.ac.cn/usr/themes/geekg/payment/zfb.png" /></p>
<p>支付宝打赏</p>
<p>因为网站后台对打赏并无记录，因此欢迎在打赏时候备注留言。你还可以<a href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&amp;email=tN7d1drY3drrx8H0xcWa19vZ"><strong>点击这里</strong></a>或在下方评论区留言来告知你的建议或需求。</p>
<p><strong>如果您需要引用本文，请参考：</strong></p>
<p>苏剑林. (Jan. 04, 2023). 《智能家居之热水器零冷水技术原理浅析 》[Blog post]. Retrieved from <a href="https://spaces.ac.cn/archives/9405">https://spaces.ac.cn/archives/9405</a></p>
<p>@online{kexuefm-9405,<br />
title={智能家居之热水器零冷水技术原理浅析},<br />
author={苏剑林},<br />
year={2023},<br />
month={Jan},<br />
url={\url{https://spaces.ac.cn/archives/9405}},<br />
} </p>
<hr />
<h2 id="_8">公式推导与注释<a class="toc-link" href="#_8" title="Permanent link">&para;</a></h2>
<p>TODO: 添加详细的数学公式推导和注释</p>
                </div>

                <!-- Previous/Next Navigation -->
                <nav class="post-navigation" aria-label="文章导航">
                    <div class="row g-3">
                        <div class="col-6">
                            
                            <a href="关于维度公式n-833-log-n的可用性分析.html" class="nav-link-prev">
                                <div class="nav-direction"><i class="fas fa-chevron-left"></i> 上一篇</div>
                                <div class="nav-title">#57 关于维度公式“n > 8.33 log N”的可用性分析</div>
                            </a>
                            
                        </div>
                        <div class="col-6">
                            
                            <a href="智能家居之手搓一套能接入米家的零冷水装置.html" class="nav-link-next">
                                <div class="nav-direction">下一篇 <i class="fas fa-chevron-right"></i></div>
                                <div class="nav-title">#59 智能家居之手搓一套能接入米家的零冷水装置</div>
                            </a>
                            
                        </div>
                    </div>
                </nav>

                <!-- Back to Home -->
                <div class="text-center mt-4 mb-4">
                    <a href="../index.html" class="btn btn-outline-primary">
                        <i class="fas fa-arrow-left"></i> 返回首页
                    </a>
                </div>
            </div>

            <!-- Sidebar (TOC) -->
            <div class="col-lg-3">
                <aside class="sidebar">
                    
                    <div class="toc-sidebar">
                        <h5 class="toc-title"><i class="fas fa-list"></i> 目录</h5>
                        <div class="toc-content">
                            <div class="toc">
<ul>
<li><a href="#_1">智能家居之热水器零冷水技术原理浅析</a><ul>
<li><a href="#_2">写在前面</a></li>
<li><a href="#_3">技术分析</a><ul>
<li><a href="#_4">回水管</a></li>
<li><a href="#_5">冷水管</a></li>
<li><a href="#_6">下水道</a></li>
</ul>
</li>
<li><a href="#_7">文章小结</a></li>
<li><a href="#_8">公式推导与注释</a></li>
</ul>
</li>
</ul>
</div>

                        </div>
                        <div class="toc-actions">
                            <button class="btn btn-sm btn-outline-secondary" onclick="expandAll()">
                                <i class="fas fa-expand"></i> 全部展开
                            </button>
                            <button class="btn btn-sm btn-outline-secondary" onclick="collapseAll()">
                                <i class="fas fa-compress"></i> 全部折叠
                            </button>
                        </div>
                    </div>
                    

                    <!-- Back to Top Button -->
                    <button id="backToTop" class="back-to-top" title="回到顶部">
                        <i class="fas fa-arrow-up"></i>
                    </button>
                </aside>
            </div>
        </div>
    </article>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>
                博客来源: <a href="https://spaces.ac.cn" target="_blank">科学空间</a> |
                内容经过整理并添加详细数学推导
            </p>
            <p>
                Powered by <a href="https://pages.github.com/" target="_blank">GitHub Pages</a>
            </p>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Syntax highlighting -->
    <script>hljs.highlightAll();</script>

    <!-- Back to top functionality -->
    <script>
        // Show/hide back to top button based on scroll position
        window.addEventListener('scroll', function() {
            const backToTop = document.getElementById('backToTop');
            if (window.pageYOffset > 300) {
                backToTop.classList.add('show');
            } else {
                backToTop.classList.remove('show');
            }
        });

        // Smooth scroll to top
        document.getElementById('backToTop').addEventListener('click', function() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });

        // Sticky TOC sidebar
        window.addEventListener('scroll', function() {
            const sidebar = document.querySelector('.sidebar');
            if (!sidebar) return;

            const sidebarTop = sidebar.offsetTop;
            const scrollTop = window.pageYOffset;

            if (scrollTop > sidebarTop - 20) {
                sidebar.classList.add('sticky');
            } else {
                sidebar.classList.remove('sticky');
            }
        });
    </script>
</body>
</html>